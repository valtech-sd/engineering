var xrcontroller=pc.createScript("xrcontroller");xrcontroller.attributes.add("disableWorldTracking",{type:"boolean"}),xrcontroller.attributes.add("directionalLight",{type:"entity"}),xrcontroller.attributes.add("lightRatio",{type:"number"}),xrcontroller.attributes.add("exposureRatio",{type:"number"}),xrcontroller.attributes.add("shadowmaterial",{type:"asset"}),xrcontroller.prototype.initialize=function(){const t=this.disableWorldTracking,runOnLoad=({pcCamera:e,pcApp:a},i)=>()=>{XR8.XrController.configure({enableLighting:!0,disableWorldTracking:t}),XR8.addCameraPipelineModule({name:"xr-light",onUpdate:({processCpuResult:t})=>{t.reality&&t.reality.lighting&&t.reality.lighting.exposure&&(this.directionalLight.light.intensity=(1+t.reality.lighting.exposure)*this.lightRatio,this.app.scene.exposure=this.exposureRatio*this.directionalLight.light.intensity)}}),XR8.PlayCanvas.runXr({pcCamera:e,pcApp:a},i)};this.shadowmaterial&&XRExtras.PlayCanvas.makeShadowMaterial({pc:pc,material:this.shadowmaterial});const e=XRExtras.PlayCanvas.findOneCamera(this.entity);(()=>{XRExtras.Loading.showLoading({onxrloaded:runOnLoad({pcCamera:e,pcApp:this.app},[XRExtras.AlmostThere.pipelineModule(),XRExtras.Loading.pipelineModule(),XRExtras.RuntimeError.pipelineModule()])})})()};var taprecenter=pc.createScript("taprecenter");taprecenter.attributes.add("toSpawn",{type:"entity",title:"spawned Item",description:"Item to spawn"}),taprecenter.prototype.initialize=function(){var t=this.app;t.on("taprecenter:ready",(function(){pc.platform.mobile&&t.touch.on(pc.EVENT_TOUCHSTART,this.touchStart,this)}),this)},taprecenter.prototype.touchStart=function(t){var e=this.app;1===t.touches.length&&(this.toSpawn&&(this.toSpawn.enabled=!0),e.fire("game:hidetutorial"),e.fire("game:activatephysics"),e.touch.off(pc.EVENT_TOUCHSTART,this.touchStart,this))};var _Group=function(){this._tweens={},this._tweensAddedDuringUpdate={}};_Group.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,n){var e=Object.keys(this._tweens);if(0===e.length)return!1;for(t=void 0!==t?t:TWEEN.now();e.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<e.length;i++){var r=this._tweens[e[i]];r&&!1===r.update(t)&&(r._isPlaying=!1,n||delete this._tweens[e[i]])}e=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var TWEEN=new _Group;TWEEN.Group=_Group,TWEEN._nextId=0,TWEEN.nextId=function(){return TWEEN._nextId++},"undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?TWEEN.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?TWEEN.now=self.performance.now.bind(self.performance):void 0!==Date.now?TWEEN.now=Date.now:TWEEN.now=function(){return(new Date).getTime()},TWEEN.Tween=function(t,n){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=TWEEN.Easing.Linear.None,this._interpolationFunction=TWEEN.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=n||TWEEN,this._id=TWEEN.nextId()},TWEEN.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,n){return this._valuesEnd=Object.create(t),void 0!==n&&(this._duration=n),this},duration:function duration(t){return this._duration=t,this},start:function(t){for(var n in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?TWEEN.now()+parseFloat(t):t:TWEEN.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[n]instanceof Array){if(0===this._valuesEnd[n].length)continue;this._valuesEnd[n]=[this._object[n]].concat(this._valuesEnd[n])}void 0!==this._object[n]&&(this._valuesStart[n]=this._object[n],this._valuesStart[n]instanceof Array==!1&&(this._valuesStart[n]*=1),this._valuesStartRepeat[n]=this._valuesStart[n]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,n=this._chainedTweens.length;t<n;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function onRepeat(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var n,e,i;if(t<this._startTime)return!0;for(n in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),e=(t-this._startTime)/this._duration,e=0===this._duration||e>1?1:e,i=this._easingFunction(e),this._valuesEnd)if(void 0!==this._valuesStart[n]){var r=this._valuesStart[n]||0,a=this._valuesEnd[n];a instanceof Array?this._object[n]=this._interpolationFunction(a,i):("string"==typeof a&&(a="+"===a.charAt(0)||"-"===a.charAt(0)?r+parseFloat(a):parseFloat(a)),"number"==typeof a&&(this._object[n]=r+(a-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,e),1===e){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[n]&&(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo){var s=this._valuesStartRepeat[n];this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=s}this._valuesStart[n]=this._valuesStartRepeat[n]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,u=this._chainedTweens.length;o<u;o++)this._chainedTweens[o].start(this._startTime+this._duration);return!1}return!0}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),a=TWEEN.Interpolation.Utils.Linear;return n<0?a(t[0],t[1],i):n>1?a(t[e],t[e-1],e-i):a(t[r],t[r+1>e?e:r+1],i-r)},Bezier:function(t,n){for(var e=0,i=t.length-1,r=Math.pow,a=TWEEN.Interpolation.Utils.Bernstein,s=0;s<=i;s++)e+=r(1-n,i-s)*r(n,s)*t[s]*a(i,s);return e},CatmullRom:function(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),a=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[e]?(n<0&&(r=Math.floor(i=e*(1+n))),a(t[(r-1+e)%e],t[r],t[(r+1)%e],t[(r+2)%e],i-r)):n<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):n>1?t[e]-(a(t[e],t[e],t[e-1],t[e-1],i-e)-t[e]):a(t[r?r-1:0],t[r],t[e<r+1?e:r+1],t[e<r+2?e:r+2],i-r)},Utils:{Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=TWEEN.Interpolation.Utils.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var t=[1];return function(n){var e=1;if(t[n])return t[n];for(var i=n;i>1;i--)e*=i;return t[n]=e,e}}(),CatmullRom:function(t,n,e,i,r){var a=.5*(e-t),s=.5*(i-n),o=r*r;return(2*n-2*e+a+s)*(r*o)+(-3*n+3*e-2*a-s)*o+a*r+n}}},function(t){"function"==typeof define&&define.amd?define([],(function(){return TWEEN})):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==t&&(t.TWEEN=TWEEN)}(this);var LaunchUrl=pc.createScript("launchUrl");LaunchUrl.attributes.add("url",{type:"string"}),LaunchUrl.attributes.add("event",{type:"string"}),LaunchUrl.attributes.add("isVideo",{type:"boolean",default:!1}),LaunchUrl.prototype.initialize=function(){},LaunchUrl.prototype.launch=function(){this.app.fire(this.event,this.url)};var MultiMesh=pc.createScript("multiMesh");MultiMesh.attributes.add("LOD",{type:"number",default:0}),MultiMesh.prototype.initialize=function(){this.dict={};var e=this.entity.model.meshInstances;console.log("Total Nb mesh instances "+e.length);var t=0;for(t=0;t<e.length;++t){mesh=e[t];var s=mesh.node.name.lastIndexOf("_"),i=mesh.node.name.substr(0,s),n=mesh.node.name.substr(s+1,mesh.node.name.length);n!=="LOD"+this.LOD&&(mesh.visible=!1),i in this.dict||(this.dict[i]=[]),this.dict[i].push([n,t])}var h=0;for(var o in this.dict){console.log("key: "+o);var a=this.dict[o];for(t=0;t<a.length;++t)e[a[t][1]].visible&&(console.log("sub: "+a[t][0]+" index: "+a[t][1]+" name: "+e[a[t][1]].node.name),++h)}console.log("Nb mesh instances drawed "+h)};pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this},from:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,n;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,n))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._toQuat.setFromEulerAngles(i,e,n))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time=this.time-this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,n,s=this.time/this.duration,r=this.easing(s);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],n=this._ev[h],this.target[h]=e+(n-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceIn=function(t){return 1-BounceOut(1-t)},BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,n=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.Application.getApplication();t&&t.addTweenManager()}();var Button=pc.createScript("button");Button.attributes.add("sound",{type:"string"}),Button.attributes.add("event",{type:"string"}),Button.attributes.add("copyEnabled",{type:"boolean",default:!1}),Button.attributes.add("entityToCopyText",{type:"entity",title:"Entity to copy text"}),Button.attributes.add("eventCopy",{type:"string",default:"game:copycoupon"}),Button.attributes.add("switchEnabled",{type:"boolean",default:!1}),Button.attributes.add("stringidstart",{type:"string"}),Button.attributes.add("stringidfinish",{type:"string"}),Button.attributes.add("switchMessageTime",{type:"number",default:2e3}),Button.prototype.initialize=function(){this.app;this.pressed=!1,this.entity.element.on("click",this.onClick,this)},Button.prototype.onClick=function(t){var e=this.app;if((!this.entity.button||this.entity.button.active)&&(this.entity.script.pulse&&this.entity.script.pulse.pulse(),this.entity.script.launchUrl&&this.entity.script.launchUrl.launch(),e.fire(this.event),e.fire("game:playSound",this.sound),this.copyEnabled&&e.fire(this.eventCopy,this.entityToCopyText.element.text),this.switchEnabled)){var i=this;this.entity.element&&this.entity.element.text?(this.entity.element.text=e.i18n.getText(this.stringidfinish),setTimeout((function(){i.entity.element.text=e.i18n.getText(i.stringidstart)}),this.switchMessageTime)):this.entity.children.length>0&&this.entity.children[0]&&this.entity.children[0].element&&this.entity.children[0].element.text&&(this.entity.children[0].element.text=e.i18n.getText(this.stringidfinish),setTimeout((function(){i.entity.children[0].element.text=e.i18n.getText(i.stringidstart)}),this.switchMessageTime))}};var InfoBoardMgr=pc.createScript("infoBoardMgr");InfoBoardMgr.attributes.add("VideoBoard",{type:"entity"}),InfoBoardMgr.attributes.add("VideoPlayer",{type:"entity"}),InfoBoardMgr.attributes.add("popupWidth",{type:"number",default:640}),InfoBoardMgr.attributes.add("popupHeight",{type:"number",default:300}),InfoBoardMgr.attributes.add("initPos",{type:"vec3"}),InfoBoardMgr.attributes.add("togoPortrait",{type:"vec3"}),InfoBoardMgr.attributes.add("togoLandscape",{type:"vec3"}),InfoBoardMgr.attributes.add("durationIn",{type:"number",default:.1,description:"Tween animation duration"}),InfoBoardMgr.attributes.add("durationOut",{type:"number",default:.1,description:"Tween animation duration"}),InfoBoardMgr.prototype.initialize=function(){var t=this.app;this.buttonUrl="",this.tween=null,this.isVisible=!1,this.viewMode="Portrait",t.on("infoboard:playVideo",(function(i){i!==this.buttonUrl?(this.buttonUrl=i,this.isVisible?this.VideoPlayer.script.mediaPlayer.initVideo(this.buttonUrl):this.show()):t.fire("game:closeboard")}),this),t.on("infoboard:close",(function(){this.buttonUrl="",this.isVisible?this.hide():this.VideoPlayer.script.mediaPlayer.stopVideo()}),this),t.on("game:landscape",(function(){"Landscape"!==this.viewMode&&(this.viewMode="Landscape",this.isVisible&&(this.tween&&this.tween.stop(),this.isRunning=!1,this.show()))}),this),t.on("game:portrait",(function(){"Portrait"!==this.viewMode&&(this.viewMode="Portrait",this.isVisible&&(this.tween&&this.tween.stop(),this.isRunning=!1,this.show()))}),this)},InfoBoardMgr.prototype.show=function(){var t=this;if(this.isVisible||this.VideoPlayer.script.mediaPlayer.initVideo(this.buttonUrl),!this.isRunning){this.isRunning=!0,this.isVisible=!0;var i="Portrait"!==this.viewMode?this.togoLandscape:this.togoPortrait;this.tween=this.VideoBoard.tween(this.VideoBoard.getLocalPosition()).to({x:i.x,y:i.y,z:i.z},this.durationIn,pc.SineInOut),this.tween.on("complete",(function(){t.isRunning=!1})),this.tween.start()}},InfoBoardMgr.prototype.hide=function(){var t=this;this.isRunning||(this.isRunning=!0,this.isVisible=!1,this.tween=this.VideoBoard.tween(this.VideoBoard.getLocalPosition()).to({x:this.initPos.x,y:this.initPos.y,z:this.initPos.z},this.durationOut,pc.SineInOut),this.tween.on("complete",(function(){t.isRunning=!1,t.VideoPlayer.script.mediaPlayer.stopVideo()})),this.tween.start())};var Billboard=pc.createScript("billboard");Billboard.attributes.add("camera",{type:"entity",title:"Camera"}),Billboard.attributes.add("xaxis",{type:"boolean",default:!1}),Billboard.attributes.add("yaxis",{type:"boolean",default:!1}),Billboard.attributes.add("zaxis",{type:"boolean",default:!1}),Billboard.prototype.initialize=function(){this.x=this.entity.getLocalEulerAngles().x,this.y=this.entity.getLocalEulerAngles().y,this.z=this.entity.getLocalEulerAngles().z},Billboard.prototype.update=function(t){this.entity.setEulerAngles(this.xaxis?this.x+this.camera.getEulerAngles().x:this.x,this.yaxis?this.y+this.camera.getEulerAngles().y:this.y,this.zaxis?this.z+this.camera.getEulerAngles().z:this.z)};var GameManagerBike=pc.createScript("gameManager");GameManagerBike.attributes.add("TutorialUI",{type:"entity",title:"TutorialUI",description:"Tutorial UI to Hide"}),GameManagerBike.attributes.add("bike",{type:"entity",title:"Bike"}),GameManagerBike.attributes.add("floor",{type:"entity",title:"Floor"}),GameManagerBike.attributes.add("TimeDeactPhysic",{type:"number",title:"TimeDeactPhysic",default:1e3}),GameManagerBike.attributes.add("tutoIntro",{type:"entity"}),GameManagerBike.attributes.add("camera",{type:"entity"}),GameManagerBike.attributes.add("motorBorder",{type:"entity"}),GameManagerBike.attributes.add("batteryBorder",{type:"entity"}),GameManagerBike.attributes.add("driveBorder",{type:"entity"}),GameManagerBike.attributes.add("lineMotor",{type:"entity"}),GameManagerBike.attributes.add("lineBattery",{type:"entity"}),GameManagerBike.attributes.add("lineDrive",{type:"entity"}),GameManagerBike.attributes.add("circleAnim",{type:"entity"}),GameManagerBike.attributes.add("TimeDisplayInfo",{type:"number",title:"TimeDisplayInfo",default:2e3}),GameManagerBike.attributes.add("landscapeMobileScale",{type:"number",default:.02,description:"Landscape mobile scale"}),GameManagerBike.attributes.add("landscapeDesktopScale",{type:"number",default:.02,description:"Landscape desktop scale"}),GameManagerBike.attributes.add("portraitMobileScale",{type:"number",default:.028,description:"Portrait mobile scale"}),GameManagerBike.attributes.add("portraitDesktopScale",{type:"number",default:.022,description:"Portrait desktop scale"}),GameManagerBike.attributes.add("rentPage",{type:"entity"}),GameManagerBike.attributes.add("sharePage",{type:"entity"}),GameManagerBike.attributes.add("buyPage",{type:"entity"}),GameManagerBike.attributes.add("addPage",{type:"entity"}),GameManagerBike.attributes.add("payPage",{type:"entity"}),GameManagerBike.attributes.add("engineInfoPage",{type:"entity"}),GameManagerBike.attributes.add("batteryInfoPage",{type:"entity"}),GameManagerBike.attributes.add("bikeTypeInfoPage",{type:"entity"}),GameManagerBike.prototype.initialize=function(){var i=this.app;this._window=null,this.rayColor=new pc.Color(1,0,0),this.tmp=new pc.Vec3,this.myTimeout=null,this.bumpCount=0,this.currentUrl="",this.choiceMotor=-1,this.choiceBattery=-1,this.choiceType=-1,this.bikeX=this.bike.getLocalEulerAngles().x,this.bikeY=this.bike.getLocalEulerAngles().y,this.bikeZ=this.bike.getLocalEulerAngles().z,i.addTweenManager(),this.viewMode="Portrait",this.UpdateVisuals("Portrait"===this.viewMode),this.bike.collision.on("collisionstart",this.bikeOnFloor,this),this.bike.collision.on("contact",this.bikeBump,this),this.needUpdate=!1,i.on("game:landscape",(function(){var i=this;"Landscape"!==this.viewMode&&(this.viewMode="Landscape",setTimeout((function(){i.UpdateVisuals("Landscape"===i.viewMode),console.log(i.bike.getPosition()),console.log(i.camera.getPosition())}),100))}),this),i.on("game:portrait",(function(){var i=this;"Portrait"!==i.viewMode&&(i.viewMode="Portrait",setTimeout((function(){i.UpdateVisuals("Landscape"===i.viewMode),console.log(i.bike.getPosition()),console.log(i.camera.getPosition())}),100))}),this),i.on("game:activate",(function(i){var e=this.app;i.script.pulse.pulse(),e.fire("game:playSound","BtnClick"),setTimeout((function(){setTimeout((function(){i.tags.has("url")&&i.script.launchUrl.launch()}),600)}),100)}),this),this.isAction1=!1,i.on("game:action1",(function(i){var e=this.app;e.fire("game:infosOff"),this.isAction2=!1,this.isAstion3=!1,this.isAction1=!this.isAction1,this.currentUrl="",this.isAction1&&(this.currentUrl=i,e.fire("uiMgr:hideMain"),e.fire("uiMgr:showOption1"),e.fire("uiMgr:hideOption2"),e.fire("uiMgr:firstOptionText","1000 W",0===this.choiceMotor),e.fire("uiMgr:secondOptionText","2000 W",1===this.choiceMotor),e.fire("uiMgr:firstOptionCheckMark",0===this.choiceMotor),e.fire("uiMgr:secondOptionCheckMark",1===this.choiceMotor),e.fire("game:motorInfoOn"),0===this.choiceMotor?e.fire("uiMgr:videoText","2021 Valtechtronic 1000W Motor"):1===this.choiceMotor?e.fire("uiMgr:videoText","2021 Valtechtronic 2000W Motor"):e.fire("uiMgr:videoText","Motor Power")),e.fire("infoboard:playVideo",i),this.needUpdate=!0}),this),this.isAction2=!1,i.on("game:action2",(function(i){var e=this.app;e.fire("game:infosOff"),this.isAction1=!1,this.isAction3=!1,this.isAction2=!this.isAction2,this.currentUrl="",this.isAction2&&(this.currentUrl=i,e.fire("uiMgr:hideMain"),e.fire("uiMgr:showOption1"),e.fire("uiMgr:hideOption2"),e.fire("uiMgr:firstOptionText","500 W/h",0===this.choiceBattery),e.fire("uiMgr:secondOptionText","1000 W/h",1===this.choiceBattery),e.fire("uiMgr:firstOptionCheckMark",0===this.choiceBattery),e.fire("uiMgr:secondOptionCheckMark",1===this.choiceBattery),e.fire("game:batteryInfoOn"),0===this.choiceBattery?e.fire("uiMgr:videoText","2021 Valtechtronic 500W/h Motor"):1===this.choiceBattery?e.fire("uiMgr:videoText","2021 Valtechtronic 1000W/h Motor"):e.fire("uiMgr:videoText","Battery")),e.fire("infoboard:playVideo",i),this.needUpdate=!0}),this),this.isAction3=!1,i.on("game:action3",(function(i){var e=this.app;e.fire("game:infosOff"),this.isAction1=!1,this.isAction2=!1,this.isAction3=!this.isAction3,this.currentUrl="",this.isAction3&&(this.currentUrl=i,e.fire("uiMgr:hideMain"),e.fire("uiMgr:showOption1"),e.fire("uiMgr:hideOption2"),e.fire("uiMgr:firstOptionText","Wheel-Drive",0===this.choiceType),e.fire("uiMgr:secondOptionText","Hub-Drive",1===this.choiceType),e.fire("uiMgr:firstOptionCheckMark",0===this.choiceType),e.fire("uiMgr:secondOptionCheckMark",1===this.choiceType),e.fire("game:driveInfoOn"),0===this.choiceType?e.fire("uiMgr:videoText","2021 Valtechtronic Wheel-Drive"):1===this.choiceType?e.fire("uiMgr:videoText","2021 Valtechtronic Hub-Drive"):e.fire("uiMgr:videoText","Drive type")),e.fire("infoboard:playVideo",i),this.needUpdate=!0}),this),i.on("game:choiceDone1",(function(){this.app.fire("uiMgr:firstOptionCheckMark",!0),this.app.fire("uiMgr:secondOptionCheckMark",!1),this.isAction1?(this.choiceMotor=0,this.app.fire("uiMgr:videoText","2021 Valtechtronic 2000W Motor"),this.app.fire("uiMgr:checkmarkMotor")):this.isAction2?(this.choiceBattery=0,this.app.fire("uiMgr:videoText","2021 Valtechtronic 500W/h Motor"),this.app.fire("uiMgr:checkmarkBattery")):this.isAction3&&(this.choiceType=0,this.app.fire("uiMgr:videoText","2021 Valtechtronic Pedal-Assist"),this.app.fire("uiMgr:checkmarkType"))}),this),i.on("game:choiceDone2",(function(){this.app.fire("uiMgr:firstOptionCheckMark",!1),this.app.fire("uiMgr:secondOptionCheckMark",!0),this.isAction1?(this.choiceMotor=1,this.app.fire("uiMgr:videoText","2021 Valtechtronic 4000W Motor"),this.app.fire("uiMgr:checkmarkMotor")):this.isAction2?(this.choiceBattery=1,this.app.fire("uiMgr:videoText","2021 Valtechtronic 1000W/h Motor"),this.app.fire("uiMgr:checkmarkBattery")):this.isAction3&&(this.choiceType=1,this.app.fire("uiMgr:videoText","2021 Valtechtronic Throttle"),this.app.fire("uiMgr:checkmarkType"))}),this),i.on("game:moreInfo1",(function(){var i=this.app;if(this.isAction1){if(!this.engineInfoPage)return;i.fire("uiMgr:hideOption1"),i.fire("infoboard:close"),i.fire("game:infosOff"),this.engineInfoPage.script.uiMotor.showPage()}else if(this.isAction2){if(!this.batteryInfoPage)return;i.fire("uiMgr:hideOption1"),i.fire("infoboard:close"),i.fire("game:infosOff"),this.batteryInfoPage.script.uiBattery.showPage()}else if(this.isAction3){if(!this.bikeTypeInfoPage)return;i.fire("uiMgr:hideOption1"),i.fire("infoboard:close"),i.fire("game:infosOff"),this.bikeTypeInfoPage.script.uiTypes.showPage()}}),this),i.on("game:moreInfo2",(function(){var i=this.app;if(this.isAction1){if(!this.engineInfoPage)return;i.fire("uiMgr:hideOption1"),i.fire("infoboard:close"),i.fire("game:infosOff"),this.engineInfoPage.script.uiMotor.showPage2()}else if(this.isAction2){if(!this.batteryInfoPage)return;i.fire("uiMgr:hideOption1"),i.fire("infoboard:close"),i.fire("game:infosOff"),this.batteryInfoPage.script.uiBattery.showPage2()}else if(this.isAction3){if(!this.bikeTypeInfoPage)return;i.fire("uiMgr:hideOption1"),i.fire("infoboard:close"),i.fire("game:infosOff"),this.bikeTypeInfoPage.script.uiTypes.showPage2()}}),this),i.on("game:selectcolor",(function(){this.app.fire("uiMgr:hideOption1"),this.app.fire("uiMgr:showColors")}),this),i.on("game:closecolor",(function(){this.app.fire("uiMgr:hideOption2")}),this),i.on("game:colorgreen",(function(){this.app.fire("button:displaygreen"),this.app.fire("uiMgr:checkMarkColor"),this.app.fire("uiMgr:checkMarkWhite",!1),this.app.fire("uiMgr:checkMarkBlue",!1),this.app.fire("uiMgr:checkMarkGreen",!0),this.app.fire("uiMgr:checkMarkOrange",!1)}),this),i.on("game:colororange",(function(){this.app.fire("button:displayorange"),this.app.fire("uiMgr:checkMarkColor"),this.app.fire("uiMgr:checkMarkWhite",!1),this.app.fire("uiMgr:checkMarkBlue",!1),this.app.fire("uiMgr:checkMarkGreen",!1),this.app.fire("uiMgr:checkMarkOrange",!0)}),this),i.on("game:colorwhite",(function(){this.app.fire("button:displaywhite"),this.app.fire("uiMgr:checkMarkColor"),this.app.fire("uiMgr:checkMarkWhite",!0),this.app.fire("uiMgr:checkMarkBlue",!1),this.app.fire("uiMgr:checkMarkGreen",!1),this.app.fire("uiMgr:checkMarkOrange",!1)}),this),i.on("game:colorblue",(function(){this.app.fire("button:displayblue"),this.app.fire("uiMgr:checkMarkColor"),this.app.fire("uiMgr:checkMarkWhite",!1),this.app.fire("uiMgr:checkMarkBlue",!0),this.app.fire("uiMgr:checkMarkGreen",!1),this.app.fire("uiMgr:checkMarkOrange",!1)}),this),i.on("game:closeboard",(function(){this.isAction1=!1,this.isAction2=!1,this.isAction3=!1,this.needUpdate=!0,this.app.fire("uiMgr:showMain"),this.app.fire("uiMgr:hideOption1"),this.app.fire("infoboard:close"),this.app.fire("game:infosOff")}),this),i.on("game:hidetutorial",(function(){this.TutorialUI.enabled=!1}),this),i.on("bike:playSound",(function(i){this.bike.sound.play(i)}),this),i.on("bike:stopSound",(function(i){this.bike.sound.stop(i)}),this),i.on("game:playSound",(function(i){this.entity.sound.play(i)}),this),i.on("game:stopSound",(function(i){this.entity.sound.stop(i)}),this),i.on("game:activatephysics",(function(){var i=this;this.circleAnim.enabled=!1,this.bike.setEulerAngles(this.bikeX,this.bikeY+this.camera.getEulerAngles().y,this.bikeZ),this.bike.setPosition(this.circleAnim.getPosition().x,this.bike.getPosition().y,this.circleAnim.getPosition().z),this.bike.enabled=!0,this.bike.rigidbody.enabled=!0,setTimeout((function(){i.bike.rigidbody.enabled=!1}),this.TimeDeactPhysic)}),this),i.on("game:infosOff",(function(){this.motorBorder.enabled=!1,this.batteryBorder.enabled=!1,this.driveBorder.enabled=!1,this.lineMotor.script.lineBtwnEntity.rayColor.fromString("#36C8B0"),this.lineBattery.script.lineBtwnEntity.rayColor.fromString("#36C8B0"),this.lineDrive.script.lineBtwnEntity.rayColor.fromString("#36C8B0")}),this),i.on("game:motorInfoOn",(function(){this.lineMotor.script.lineBtwnEntity.rayColor.fromString("#FF0000"),this.motorBorder.enabled=!0}),this),i.on("game:batteryInfoOn",(function(){this.lineBattery.script.lineBtwnEntity.rayColor.fromString("#FF0000"),this.batteryBorder.enabled=!0}),this),i.on("game:driveInfoOn",(function(){this.lineDrive.script.lineBtwnEntity.rayColor.fromString("#FF0000"),this.driveBorder.enabled=!0}),this),i.on("game:openSharePage",(function(){if(this.sharePage){var i=this.app;i.fire("uiMgr:hideMain"),i.fire("uiMgr:hideOption1"),i.fire("uiMgr:hideOption2"),this.sharePage.script.uiShare.showPage()}}),this),i.on("game:openBuyPage",(function(){if(this.buyPage){var i=this.app;i.fire("uiMgr:hideMain"),i.fire("uiMgr:hideOption1"),i.fire("uiMgr:hideOption2"),this.buyPage.script.uiBuy.showPage()}}),this),i.on("game:openAddPage",(function(){if(this.addPage){var i=this.app;i.fire("uiMgr:hideMain"),i.fire("uiMgr:hideOption1"),i.fire("uiMgr:hideOption2"),this.addPage.script.uiAdd.showPage()}}),this),i.on("game:openPayPage",(function(){if(this.payPage){var i=this.app;i.fire("uiMgr:hideMain"),i.fire("uiMgr:hideOption1"),i.fire("uiMgr:hideOption2"),this.payPage.script.uiPay.showPage()}}),this),i.on("game:openRentPage",(function(){if(this.rentPage){var i=this.app;i.fire("uiMgr:hideMain"),i.fire("uiMgr:hideOption1"),i.fire("uiMgr:hideOption2"),this.rentPage.script.uiRide.showPage()}}),this),i.on("game:closeRentPage",(function(){this.app.fire("uiMgr:showMain")}),this),i.on("game:closeBuyPage",(function(){this.app.fire("uiMgr:showMain")}),this),i.on("game:closeAddPage",(function(){this.app.fire("uiMgr:showMain")}),this),i.on("game:closePayPage",(function(){this.app.fire("uiMgr:showMain")}),this),i.on("game:closeSharePage",(function(){this.app.fire("uiMgr:showMain")}),this),i.on("game:closeEngineInfoPage",(function(){this.isAction1=!1,this.isAction2=!1,this.isAction3=!1,this.app.fire("game:action1",this.currentUrl)}),this),i.on("game:closeBatteryInfoPage",(function(){this.isAction1=!1,this.isAction2=!1,this.isAction3=!1,this.app.fire("game:action2",this.currentUrl)}),this),i.on("game:closeBikeTypeInfoPage",(function(){this.isAction1=!1,this.isAction2=!1,this.isAction3=!1,this.app.fire("game:action3",this.currentUrl)}),this),i.on("game:recenter",(function(i){var e=this.app,t=e.graphicsDevice.width/2/window.devicePixelRatio,r=e.graphicsDevice.height/2/window.devicePixelRatio,a=this.camera.camera.screenToWorld(t,r,this.camera.camera.nearClip),o=this.camera.camera.screenToWorld(t,r,this.camera.camera.farClip);this.doRaycast(a,o)}),this),i.on("xr:realityready",(function(){console.log("xr ready!");var i=this.app;this.tutoIntro.enabled=!0,this.bike.enabled=!1,i.fire("taprecenter:ready"),i.fire("pulse:start")}),this)},GameManagerBike.prototype.postInitialize=function(){this.app},GameManagerBike.prototype.UpdateVisuals=function(i){this.app},GameManagerBike.prototype.bikeOnFloor=function(){var i=this.app;this.bike.collision.off("collisionstart",this.bikeOnFloor,this),i.fire("game:playSound","music"),i.fire("uiMgr:showMain")},GameManagerBike.prototype.bikeBump=function(){var i=this.app;++this.bumpCount,i.fire("game:playSound","bump"),3===this.bumpCount&&this.bike.collision.off("contact",this.bikeBump,this)},GameManagerBike.prototype.update=function(i){TWEEN.update(),this.needUpdate&&(this.needUpdate=!1,this.isAction1||this.isAction2||this.isAction3?this.app.fire("music:fadeOut","music"):this.app.fire("music:fadeIn","music"))},GameManagerBike.prototype.doRaycast=function(i,e){var t=this.app.systems.rigidbody.raycastFirst(i,e);t&&(this.bike.setEulerAngles(this.bikeX,this.bikeY+this.camera.getEulerAngles().y,this.bikeZ),this.bike.setPosition(t.point.x,this.bike.getPosition().y,t.point.z))};var HoverChangeColor=pc.createScript("hoverChangeColor");HoverChangeColor.attributes.add("hoverColor",{type:"rgb",default:[0,0,1]}),HoverChangeColor.prototype.initialize=function(){this.originalColor=this.entity.model.material.diffuse.clone(),this.tweenHoverOnDone=!0,this.tweenHoverOffDone=!0},HoverChangeColor.prototype.hoverOn=function(e){this.app;var o=this;if(this.tweenHoverOnDone){this.tweenHoverOnDone=!0;var t=this.entity.model.material,n=this.originalColor.clone(),i=this.entity.tween(n).to(o.hoverColor,e,pc.Linear);i.on("update",(function(){t.diffuse=n,t.update()})),i.on("complete",(function(){t.diffuse=o.hoverColor,t.update(),o.tweenHoverOnDone=!0})),i.start()}},HoverChangeColor.prototype.hoverOff=function(e){this.app;var o=this;if(this.tweenHoverOffDone){this.tweenHoverOffDone=!0;var t=this.entity.model.material,n=t.diffuse.clone(),i=this.entity.tween(n).to(o.originalColor,e,pc.Linear);i.on("update",(function(){t.diffuse=n,t.update()})),i.on("complete",(function(){t.diffuse=o.originalColor,t.update(),o.tweenHoverOffDone=!0})),i.start()}};var MediaPlayer=pc.createScript("mediaPlayer");MediaPlayer.attributes.add("screenMaterial",{type:"asset",assetType:"material",title:"Material"}),MediaPlayer.attributes.add("url",{type:"string",title:"Url"}),MediaPlayer.attributes.add("videoToPlay",{title:"Video",description:"MP4 video asset to play back on this video texture.",type:"asset"}),MediaPlayer.attributes.add("playButton",{type:"entity"}),MediaPlayer.attributes.add("stopButton",{type:"entity"}),MediaPlayer.attributes.add("ignoreEvents",{type:"boolean",default:!1}),MediaPlayer.attributes.add("autoPlay",{type:"boolean",default:!1}),MediaPlayer.attributes.add("volume",{type:"number",default:1}),MediaPlayer.prototype.createTexture=function(){var t,e,i=this.app;return(t=new pc.Texture(i.graphicsDevice,{format:pc.PIXELFORMAT_R8_G8_B8,autoMipmap:!1})).minFilter=pc.FILTER_LINEAR,t.magFilter=pc.FILTER_LINEAR,t.addressU=pc.ADDRESS_CLAMP_TO_EDGE,t.addressV=pc.ADDRESS_CLAMP_TO_EDGE,this.screenMaterial&&((e=this.screenMaterial.resource).emissiveMap=t,e.update()),t},MediaPlayer.prototype.initVideo=function(t){this.video.src=t,this.video.volume=this.volume,this.play(!1,!1)},MediaPlayer.prototype.stopVideo=function(){this.stop(!1)},MediaPlayer.prototype.initialize=function(){var t=this.app;this.isVideo=!1,this.updateEvery=2,this.playing=!1,this.frameCount=0;var e=this.createTexture(),i=document.createElement("video"),o=new Image;i.muted=!0,i.playsInline=!0,this.isFromUrl=!0;var a="";this.url?a=this.url.split(".").pop():this.videoToPlay&&(a=(a=this.videoToPlay.getFileUrl().split(".").pop()).split("?").shift(),this.isFromUrl=!1),"mp4"===a||this.isFromUrl?(i.addEventListener("canplay",(function(t){e.setSource(i)})),i.src=this.isFromUrl?this.url:this.videoToPlay.getFileUrl(),i.crossOrigin="anonymous",i.loop=!0,i.preload=!0,i.volume=this.volume,this.isVideo=!0):(o.addEventListener("load",(function(t){e.setSource(o)})),o.crossOrigin="anonymous",o.src=this.url,this.isVideo=!1),this.texture=e,this.image=o,this.video=i,t.on("media-player:playBtnClick",(function(t,e){this.ignoreEvents||this.play(t,e)}),this),t.on("media-player:stopBtnClick",(function(t){this.ignoreEvents||this.stop(t)}),this),t.on("media-player:muteVideo",(function(t){this.ignoreEvents||this.mute(t)}),this),this.autoPlay&&this.play(!1,!0),t.fire("pulse:start")},MediaPlayer.prototype.isPlaying=function(){return this.isVideo&&this.playing},MediaPlayer.prototype.PlayButtonEnabled=function(t){this.playButton&&(this.playButton.enabled=t)},MediaPlayer.prototype.StopButtonEnabled=function(t){this.stopButton&&(this.stopButton.enabled=t)},MediaPlayer.prototype.play=function(t,e){var i=this.app,o=this;this.isVideo&&(this.playing?(console.log("restart video"),this.PlayButtonEnabled(!1),this.StopButtonEnabled(!0),t&&(pc.platform.mobile&&!i.xr.active||this.stopButton&&(this.stopButton.model.material.emissive=this.stopButton.script.hoverChangeColor.hoverColor,this.stopButton.model.material.update())),setTimeout((function(){o.playing=!0,o.video.load(),o.video.muted=e,o.video.volume=o.volume,o.video.play(),i.fire("pulse:start")}),250)):(console.log("play video"),e||(this.PlayButtonEnabled(!1),this.StopButtonEnabled(!0)),t&&(pc.platform.mobile&&!i.xr.active||this.stopButton&&(this.stopButton.model.material.emissive=this.stopButton.script.hoverChangeColor.hoverColor,this.stopButton.model.material.update())),setTimeout((function(){o.playing=!0,o.video.muted=e,o.video.volume=o.volume,o.video.play(),i.fire("pulse:start")}),250)))},MediaPlayer.prototype.stop=function(t){var e=this.app,i=this;this.isVideo&&this.playing&&(console.log("stop video"),this.StopButtonEnabled(!1),this.PlayButtonEnabled(!0),t&&(pc.platform.mobile&&!e.xr.active||this.playButton&&(this.playButton.model.material.emissive=this.playButton.script.hoverChangeColor.hoverColor,this.playButton.model.material.update())),setTimeout((function(){i.playing=!1,i.video.muted=!0,i.video.load(),e.fire("pulse:start"),i.texture=i.createTexture(),i.texture.setSource(i.video)}),250))},MediaPlayer.prototype.mute=function(t){var e=this.app,i=this;this.video.muted||(t&&(pc.platform.mobile&&!e.xr.active||this.playButton&&(this.playButton.model.material.emissive=this.playButton.script.hoverChangeColor.hoverColor,this.playButton.model.material.update())),this.StopButtonEnabled(!1),this.PlayButtonEnabled(!0),setTimeout((function(){i.video.muted=!0,e.fire("pulse:start")}),250))},MediaPlayer.prototype.update=function(t){this.playing&&this.frameCount++%this.updateEvery==0&&this.texture.upload()};var FadingSoundIn=pc.createScript("FadeSoundIn");FadingSoundIn.attributes.add("duration",{type:"number",default:2,title:"Duration (Secs)"}),FadingSoundIn.attributes.add("startingEvent",{title:"Event",type:"string"}),FadingSoundIn.prototype.initialize=function(){this.isRunning=!1,this.app.on(this.startingEvent,(function(t){var n=this.entity.sound.slot(t);this.currentVolume=n.volume,this.fadeIn(t)}),this)},FadingSoundIn.prototype.fadeIn=function(t){var n=this,i=this.entity.sound.slot(t);if(!this.isRunning&&i&&i.instances[0]){this.isRunning=!0;var e={volume:i.instances[0].volume},u=this.entity.tween(e).to({volume:this.currentVolume},this.duration,pc.SineInOut);u.on("update",(function(){for(var t=0;t<i.instances.length;++t){i.instances[t].volume=e.volume}})).on("complete",(function(){n.isRunning=!1})),u.start()}};var FadingSoundOut=pc.createScript("FadeSoundOut");FadingSoundOut.attributes.add("duration",{type:"number",default:2,title:"Duration (Secs)"}),FadingSoundOut.attributes.add("startingEvent",{title:"Event",type:"string"}),FadingSoundOut.prototype.initialize=function(){this.isRunning=!1,this.app.on(this.startingEvent,(function(t){var n=this.entity.sound.slot(t);this.currentVolume=n.volume,this.fadeOut(t)}),this)},FadingSoundOut.prototype.fadeOut=function(t){var n=this,i=this.entity.sound.slot(t);if(!this.isRunning&&i&&i.instances[0]){this.isRunning=!0;var e={volume:i.instances[0].volume},u=this.entity.tween(e).to({volume:0},this.duration,pc.SineInOut);u.on("update",(function(){for(var t=0;t<i.instances.length;++t){i.instances[t].volume=e.volume}})).on("complete",(function(){n.isRunning=!1})),u.start()}};var TouchInput=pc.createScript("touchInput");TouchInput.attributes.add("cameraEntity",{type:"entity",title:"Camera Entity"}),TouchInput.attributes.add("orbitSensitivity",{type:"number",default:.3,title:"Orbit Sensitivity",description:"How fast the object moves around its pivot. Higher is faster"}),TouchInput.attributes.add("distanceSensitivity",{type:"number",default:.2,title:"Distance Sensitivity",description:"How fast the object moves in and out. Higher is faster"}),TouchInput.attributes.add("zoomSensibility",{type:"number",default:.2,title:"Zoom Sensitivity"}),TouchInput.attributes.add("pinchSensitivity",{type:"number",default:2,title:"Pinch Sensitivity",description:"How fast the object zooms in and out. Higher is faster"}),TouchInput.attributes.add("confidenceFingerCountLimit",{type:"number",default:5,title:"ConfidenceOnFingerCount",description:"number of frames needed to confirm nb of fingers"}),TouchInput.attributes.add("confidenceOpCountLimit",{type:"number",default:5,title:"ConfidenceOpCount",description:"number of frames needed to confirm operation"}),TouchInput.prototype.initialize=function(){this.lastTouchPoint=new pc.Vec2,this.lastPinchMidPoint=new pc.Vec2,this.lastPinchDistance=0,this.distance=0,this.isTranslation=!1,this.twoFingersAction=!1,this.confidenceFingerCount=0,this.confidenceOpCount=0,this.opValidated=!1,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchStop,this),this.app.touch.on(pc.EVENT_TOUCHCANCEL,this.onTouchStop,this)),this.on("destroy",(function(){this.app.touch&&(this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchStop,this),this.app.touch.off(pc.EVENT_TOUCHCANCEL,this.onTouchStop,this))}))},TouchInput.prototype.onTouchStart=function(t){var i=t.touches[0];this.lastTouchPoint.set(i.x,i.y);var n=t.touches;1==n.length?this.lastTouchPoint.set(n[0].x,n[0].y):2==n.length&&(this.lastPinchDistance=this.getPinchDistance(n[0],n[1]),this.calcMidPoint(n[0],n[1],this.lastPinchMidPoint))},TouchInput.prototype.onTouchStop=function(t){this.isTranslation=!1,this.twoFingersAction=!1,this.confidenceFingerCount=0,this.confidenceOpCount=0,this.opValidated=!1},TouchInput.pinchMidPoint=new pc.Vec2,TouchInput.posDiff=new pc.Vec3,TouchInput.prototype.onTouchMove=function(t){if(this.confidenceFingerCount++,!(this.confidenceFingerCount<this.confidenceFingerCountLimit)){var i=TouchInput.pinchMidPoint,n=TouchInput.posDiff,o=t.touches;if(1==o.length){if(this.twoFingersAction)return;var e=t.touches[0],s=e.x-this.lastTouchPoint.x,c=e.y-this.lastTouchPoint.y;this.rotate(s,c),this.lastTouchPoint.set(e.x,e.y)}else if(2==o.length){this.twoFingersAction=!0;var h=this.getPinchDistance(o[0],o[1]),u=h-this.lastPinchDistance;this.lastPinchDistance=h;this.cameraEntity.camera;if(n.sub2(this.cameraEntity.getPosition(),this.entity.getPosition()),this.distance=n.length(),!this.opValidated)if(Math.abs(u)<this.pinchSensitivity){if(this.isTranslation||(this.confidenceOpCount=0),this.isTranslation=!0,this.confidenceOpCount++,this.confidenceOpCount<this.confidenceOpCountLimit)return;this.opValidated=!0}else{if(this.isTranslation&&(this.confidenceOpCount=0),this.isTranslation=!1,this.confidenceOpCount++,this.confidenceOpCount<this.confidenceOpCountLimit)return;this.opValidated=!0}if(!this.opValidated)return;if(this.calcMidPoint(o[0],o[1],i),this.isTranslation)this.pan(i);else{var a=this.distance=u*this.distanceSensitivity*.1*(.1*this.distance);this.zoom(a*this.zoomSensibility)}this.lastPinchMidPoint.copy(i)}}},TouchInput.horizontalQuat=new pc.Quat,TouchInput.verticalQuat=new pc.Quat,TouchInput.resultQuat=new pc.Quat,TouchInput.transformedForward=new pc.Vec3,TouchInput.prototype.rotate=function(t,i){var n=TouchInput.horizontalQuat,o=TouchInput.verticalQuat,e=TouchInput.resultQuat;n.setFromAxisAngle(this.cameraEntity.up,t*this.orbitSensitivity),o.setFromAxisAngle(this.cameraEntity.right,i*this.orbitSensitivity),e.mul2(n,o),e.mul(this.entity.getRotation());var s=this.getYaw(e);this.entity.setRotation((new pc.Quat).setFromEulerAngles(0,s,0))},TouchInput.prototype.getYaw=function(t){var i=TouchInput.transformedForward;return t.transformVector(pc.Vec3.FORWARD,i),Math.atan2(-i.x,-i.z)*pc.math.RAD_TO_DEG},TouchInput.fromWorldPoint=new pc.Vec3,TouchInput.toWorldPoint=new pc.Vec3,TouchInput.worldDiff=new pc.Vec3,TouchInput.prototype.pan=function(t){var i=TouchInput.fromWorldPoint,n=TouchInput.toWorldPoint,o=TouchInput.worldDiff,e=this.cameraEntity.camera;e.screenToWorld(t.x,t.y,this.distance,i),e.screenToWorld(this.lastPinchMidPoint.x,this.lastPinchMidPoint.y,this.distance,n),o.sub2(i,n);var s=this.entity.getLocalPosition();this.entity.setLocalPosition(s.x+o.x,s.y,s.z+o.z)},TouchInput.prototype.zoom=function(t){var i=this.entity.getLocalScale();this.entity.setLocalScale(i.x+t,i.y+t,i.z+t)},TouchInput.prototype.getPinchDistance=function(t,i){var n=t.x-i.x,o=t.y-i.y;return Math.sqrt(n*n+o*o)},TouchInput.prototype.calcMidPoint=function(t,i,n){n.set(i.x-t.x,i.y-t.y),n.scale(.5),n.x+=t.x,n.y+=t.y};var Tweener=pc.createScript("tweener");Tweener.attributes.add("event",{title:"Event",type:"string"}),Tweener.attributes.add("duration",{title:"Duration",type:"number",default:1e3}),Tweener.attributes.add("easingFunction",{title:"Easing Function",type:"number",enum:[{Linear:0},{Quadratic:1},{Cubic:2},{Quartic:3},{Quintic:4},{Sinusoidal:5},{Exponential:6},{Circular:7},{Elastic:8},{Back:9},{Bounce:10}]}),Tweener.attributes.add("easingType",{title:"Easing Type",type:"number",enum:[{In:0},{Out:1},{InOut:2}]}),Tweener.attributes.add("delay",{title:"Delay",type:"number",default:0}),Tweener.attributes.add("repeat",{title:"Repeat",type:"number",default:0}),Tweener.attributes.add("repeatDelay",{title:"Repeat Delay",type:"number",default:0}),Tweener.attributes.add("yoyo",{title:"Yoyo",type:"boolean",default:!1}),Tweener.attributes.add("startPos",{title:"Start Pos",type:"vec3",default:[0,0,0]}),Tweener.attributes.add("endPos",{title:"End Pos",type:"vec3",default:[0,0,0]}),Tweener.attributes.add("startRot",{title:"Start Rot",type:"vec3",default:[0,0,0]}),Tweener.attributes.add("endRot",{title:"End Rot",type:"vec3",default:[0,0,0]}),Tweener.attributes.add("startScale",{title:"Start Scale",type:"vec3",default:[1,1,1]}),Tweener.attributes.add("endScale",{title:"End Scale",type:"vec3",default:[1,1,1]}),Tweener.attributes.add("startEvent",{title:"Start Event",type:"string"}),Tweener.attributes.add("stopEvent",{title:"Stop Event",type:"string"}),Tweener.attributes.add("updateEvent",{title:"Update Event",type:"string"}),Tweener.attributes.add("completeEvent",{title:"Complete Event",type:"string"}),Tweener.attributes.add("repeatEvent",{title:"Repeat Event",type:"string"}),Tweener.prototype.initialize=function(){var t=this.app;this.initialPos=this.entity.getPosition().clone(),this.initialScl=this.entity.getLocalScale().clone(),this.initialRot=this.entity.getLocalEulerAngles().clone(),this.tween=null,t.on(this.event,(function(){this.start()}),this),this.on("enable",(function(){this.entity.setPosition(this.initialPos),this.entity.setLocalScale(this.initialScl),this.entity.setLocalEulerAngles(this.initialRot)})),this.on("attr",(function(t,e,i){this.start()}))},Tweener.prototype.start=function(){var t,e=this.app,i=["Linear","Quadratic","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce"];t=0===this.easingFunction?TWEEN.Easing[i[this.easingFunction]].None:TWEEN.Easing[i[this.easingFunction]][["In","Out","InOut"][this.easingType]],this.tween&&this.tween.stop();var n={px:this.startPos.x,py:this.startPos.y,pz:this.startPos.z,sx:this.startScale.x,sy:this.startScale.y,sz:this.startScale.z,rx:this.startRot.x,ry:this.startRot.y,rz:this.startRot.z},a={px:this.endPos.x,py:this.endPos.y,pz:this.endPos.z,sx:this.endScale.x,sy:this.endScale.y,sz:this.endScale.z,rx:this.endRot.x,ry:this.endRot.y,rz:this.endRot.z},s=this.entity;this.tween=new TWEEN.Tween(n).to(a,this.duration).easing(t).onStart(function(t){""!==this.startEvent&&e.fire(this.startEvent)}.bind(this)).onStop(function(t){""!==this.stopEvent&&e.fire(this.stopEvent)}.bind(this)).onUpdate(function(t){s.setPosition(t.px,t.py,t.pz),s.setLocalScale(t.sx,t.sy,t.sz),s.setEulerAngles(t.rx,t.ry,t.rz),""!==this.updateEvent&&e.fire(this.updateEvent)}.bind(this)).onComplete(function(t){""!==this.completeEvent&&e.fire(this.completeEvent)}.bind(this)).onRepeat(function(t){""!==this.repeatEvent&&e.fire(this.repeatEvent)}.bind(this)).repeat(this.repeat).repeatDelay(this.repeatDelay).yoyo(this.yoyo).delay(this.delay).start()};var InteractionManager=pc.createScript("interactionManager");InteractionManager.attributes.add("cameraEntity",{type:"entity"}),InteractionManager.prototype.initialize=function(){var t=this.app;this.selectedEntity=null,this.worldPos=new pc.Vec3,this.isAction=!1,this.isDragging=!1,this.timer=0,t.touch&&(t.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),t.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this),t.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this))},InteractionManager.prototype.onTouchStart=function(t){this.isAction=!0},InteractionManager.prototype.onTouchEnd=function(t){this.app;if(this.isAction=!1,this.isDragging)this.isDragging=!1;else if(1===t.changedTouches.length){var i=t.changedTouches[0];this.onSelect(i.x,i.y);t.event.preventDefault()}},InteractionManager.prototype.onTouchMove=function(t){this.isAction&&(this.isDragging=!0)},InteractionManager.prototype.onSelect=function(t,i){var n=this.app,a=this.cameraEntity.camera.screenToWorld(t,i,this.cameraEntity.camera.nearClip),e=this.cameraEntity.camera.screenToWorld(t,i,this.cameraEntity.camera.farClip),o=n.systems.rigidbody.raycastFirst(a,e);if(o){var r=o.entity;r.tags.has("clickable")&&n.fire("game:activate",r)}return!(null==o)};var Pulse=pc.createScript("pulse");Pulse.attributes.add("startingEvent",{title:"Event",type:"string"}),Pulse.attributes.add("loop",{title:"Loop",type:"boolean",default:!1}),Pulse.attributes.add("duration",{type:"number",default:.1,description:"Tween animation duration"}),Pulse.attributes.add("scaleincrement",{type:"number",default:1,description:"Amout of scaling on pulse animation"}),Pulse.prototype.initialize=function(){this.isRunning=!1,this.app.on(this.startingEvent,(function(){this.pulse()}),this)},Pulse.prototype.pulse=function(){var t=this;if(!this.isRunning){this.isRunning=!0;var e=this.entity.getLocalScale().clone(),i=this.entity.tween(this.entity.getLocalScale()).to({x:e.x+this.scaleincrement,y:e.y+this.scaleincrement,z:e.z+this.scaleincrement},this.duration,pc.SineInOut);this.loop?i.loop(!0).yoyo(!0):i.yoyo(!0).repeat(2).on("complete",(function(){t.isRunning=!1})),i.start()}};pc.script.createLoadingScreen((function(e){var t,a;t=["html {","    -webkit-text-size-adjust: none;","    touch-action: pan-y;","}","body {","    background-color: #1b1b1b;","}","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #1b1b1b;","}","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","#application-splash img {","    width: 100%;","}","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 2px;","    width: 100%;","    background-color: #1d292c;","}","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #0dfcb2;","}","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){window.addEventListener("wheel",(e=>{e.preventDefault()}),{passive:!1});var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t),t.style.display="none";var a=document.createElement("img");a.src="https://d148xrjotn7dtb.cloudfront.net/FS_logo.png",t.appendChild(a),a.onload=function(){t.style.display="block"};var n=document.createElement("div");n.id="progress-bar-container",t.appendChild(n);var o=document.createElement("div");o.id="progress-bar",n.appendChild(o)}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));var ScrollingTexture=pc.createScript("scrollingTexture");ScrollingTexture.attributes.add("materialAsset",{type:"asset"}),ScrollingTexture.attributes.add("speed",{type:"vec2"}),ScrollingTexture.tmp=new pc.Vec2,ScrollingTexture.prototype.initialize=function(){this.materialAsset&&(this.material=this.materialAsset.resource)},ScrollingTexture.prototype.update=function(e){var t=ScrollingTexture.tmp;t.set(this.speed.x,this.speed.y),t.scale(e),this.material.diffuseMapOffset.add(t),this.material.normalMapOffset.add(t),this.material.update()};var SwitchingMaterials=pc.createScript("switchingMaterials");SwitchingMaterials.attributes.add("materials",{type:"asset",assetType:"material",array:!0,title:"Materials"}),SwitchingMaterials.prototype.initialize=function(){var t=this;this.materialIndex=0;this.app.on("uimanager:switch",(function(a){t.changeMaterial(a)}));for(var a=this.app.assets.findByTag("color"),i=0;i<a.length;i++)a[i].resource||this.app.assets.load(a[i])},SwitchingMaterials.prototype.changeMaterial=function(t){if(t<this.materials.length&&t>=0){this.materialIndex=t;for(var a=this.materials[this.materialIndex],i=this.entity.model.meshInstances,e=0;e<i.length;++e){i[e].material=a.resource}}},SwitchingMaterials.prototype.postInitialize=function(){var t=this;this.app.on("button:displaywhite",(function(){t.changeMaterial(0)}),this),this.app.on("button:displayorange",(function(){t.changeMaterial(1)}),this),this.app.on("button:displayblue",(function(){t.changeMaterial(2)}),this),this.app.on("button:displaygreen",(function(){t.changeMaterial(3)}),this)},SwitchingMaterials.prototype.changeToNextMaterial=function(t){this.materialIndex=(this.materialIndex+1)%this.materials.length;for(var a=this.materials[this.materialIndex],i=this.entity.model.meshInstances,e=0;e<i.length;++e){i[e].material=a.resource}};var Line=pc.createScript("lineBtwnPos");Line.attributes.add("from",{type:"vec3"}),Line.attributes.add("to",{type:"vec3"}),Line.attributes.add("rayColor",{type:"rgb",default:[1,0,0]}),Line.prototype.initialize=function(){},Line.prototype.update=function(t){this.app.renderLine(this.from,this.to,this.rayColor)};var LineBtwnEntity=pc.createScript("lineBtwnEntity");LineBtwnEntity.attributes.add("from",{type:"entity"}),LineBtwnEntity.attributes.add("to",{type:"entity"}),LineBtwnEntity.attributes.add("rayColor",{type:"rgb",default:[1,0,0]}),LineBtwnEntity.prototype.initialize=function(){},LineBtwnEntity.prototype.update=function(t){this.app.renderLine(this.from.getPosition(),this.to.getPosition(),this.rayColor)};var LineBtwnEntityPos=pc.createScript("lineBtwnEntityPos");LineBtwnEntityPos.attributes.add("from",{type:"entity"}),LineBtwnEntityPos.attributes.add("to",{type:"vec3"}),LineBtwnEntityPos.attributes.add("rayColor",{type:"rgb",default:[1,0,0]}),LineBtwnEntityPos.prototype.initialize=function(){},LineBtwnEntityPos.prototype.update=function(t){this.app.renderLine(this.from.getPosition(),this.to,this.rayColor)};var CameraAspect=pc.createScript("cameraAspect");CameraAspect.attributes.add("PortraitModeTrigger",{type:"number",default:1.65}),CameraAspect.prototype.initialize=function(){},CameraAspect.prototype.postInitialize=function(){var t=this.app;this.isLandscape=!0;var a=this.app.graphicsDevice.canvas;this.currentAspectRatio=a.width/a.height,this.currentAspectRatio<=this.PortraitModeTrigger&&(this.isLandscape=!1,t.fire("game:portrait"))},CameraAspect.prototype.update=function(t){var a=this.app,i=this.app.graphicsDevice.canvas,e=i.width/i.height;e!==this.currentAspectRatio&&(e<=this.PortraitModeTrigger&&this.isLandscape?(this.isLandscape=!1,a.fire("game:portrait")):e>this.PortraitModeTrigger&&!this.isLandscape&&(this.isLandscape=!0,a.fire("game:landscape")),this.currentAspectRatio=e)};var UIMgr=pc.createScript("uiMgr");UIMgr.attributes.add("checkMarkMotor",{type:"entity"}),UIMgr.attributes.add("checkMarkBattery",{type:"entity"}),UIMgr.attributes.add("checkMarkType",{type:"entity"}),UIMgr.attributes.add("checkMarkColor",{type:"entity"}),UIMgr.attributes.add("checkMarkBlue",{type:"entity"}),UIMgr.attributes.add("checkMarkOrange",{type:"entity"}),UIMgr.attributes.add("checkMarkGreen",{type:"entity"}),UIMgr.attributes.add("checkMarkWhite",{type:"entity"}),UIMgr.attributes.add("firstOptionText",{type:"entity"}),UIMgr.attributes.add("secondOptionText",{type:"entity"}),UIMgr.attributes.add("videoText",{type:"entity"}),UIMgr.attributes.add("firstOptionCheckMark",{type:"entity"}),UIMgr.attributes.add("secondOptionCheckMark",{type:"entity"}),UIMgr.attributes.add("leftBoard",{type:"entity"}),UIMgr.attributes.add("pos1",{type:"vec3"}),UIMgr.attributes.add("togo1",{type:"vec3"}),UIMgr.attributes.add("rightBoard",{type:"entity"}),UIMgr.attributes.add("pos2",{type:"vec3"}),UIMgr.attributes.add("togo2",{type:"vec3"}),UIMgr.attributes.add("optionBoard1",{type:"entity"}),UIMgr.attributes.add("pos3",{type:"vec3"}),UIMgr.attributes.add("togo3Portrait",{type:"vec3"}),UIMgr.attributes.add("togo3Landscape",{type:"vec3"}),UIMgr.attributes.add("optionBoard2",{type:"entity"}),UIMgr.attributes.add("pos4",{type:"vec3"}),UIMgr.attributes.add("togo4Portrait",{type:"vec3"}),UIMgr.attributes.add("togo4Landscape",{type:"vec3"}),UIMgr.attributes.add("durationIn",{type:"number",default:.1,description:"Tween animation duration"}),UIMgr.attributes.add("durationOut",{type:"number",default:.1,description:"Tween animation duration"}),UIMgr.prototype.initialize=function(){var t=this.app;this.viewMode="Portrait",this.isMainVisible=!1,this.isOption1Visible=!1,this.isOption2Visible=!1,this.isDone1=!1,this.tween1=null,this.isDone2=!1,this.tween2=null,this.tween3=null,this.tween4=null,t.on("uiMgr:showMain",(function(){this.isMainVisible||this.showMain()}),this),t.on("uiMgr:hideMain",(function(){this.isMainVisible&&this.hideMain()}),this),t.on("uiMgr:showOption1",(function(){this.isOption1Visible||this.showOption1()}),this),t.on("uiMgr:hideOption1",(function(){this.isOption1Visible&&this.hideOption1()}),this),t.on("uiMgr:showColors",(function(){this.isOption2Visible?this.hideOption2():this.showOption2()}),this),t.on("uiMgr:showOption2",(function(){this.isOption2Visible||this.showOption2()}),this),t.on("uiMgr:hideOption2",(function(){this.isOption2Visible&&this.hideOption2()}),this),t.on("uiMgr:checkmarkMotor",(function(){this.checkMarkMotor.enabled=!0}),this),t.on("uiMgr:checkmarkBattery",(function(){this.checkMarkBattery.enabled=!0}),this),t.on("uiMgr:checkmarkType",(function(){this.checkMarkType.enabled=!0}),this),t.on("uiMgr:checkMarkColor",(function(){this.checkMarkColor.enabled=!0}),this),t.on("uiMgr:checkMarkBlue",(function(t){this.checkMarkBlue.enabled=t}),this),t.on("uiMgr:checkMarkGreen",(function(t){this.checkMarkGreen.enabled=t}),this),t.on("uiMgr:checkMarkOrange",(function(t){this.checkMarkOrange.enabled=t}),this),t.on("uiMgr:checkMarkWhite",(function(t){this.checkMarkWhite.enabled=t}),this),t.on("uiMgr:firstOptionText",(function(t){this.firstOptionText.element.text=t}),this),t.on("uiMgr:secondOptionText",(function(t){this.secondOptionText.element.text=t}),this),t.on("uiMgr:firstOptionCheckMark",(function(t){this.firstOptionCheckMark.enabled=t}),this),t.on("uiMgr:secondOptionCheckMark",(function(t){this.secondOptionCheckMark.enabled=t}),this),t.on("uiMgr:videoText",(function(t){this.videoText.element.text=t}),this),t.on("game:landscape",(function(){"Landscape"!==this.viewMode&&(this.viewMode="Landscape",this.isOption1Visible?(this.tween3&&this.tween3.stop(),this.isOption1Running=!1,this.showOption1()):this.isOption2Visible&&(this.tween4&&this.tween4.stop(),this.isOption2Running=!1,this.showOption2()))}),this),t.on("game:portrait",(function(){"Portrait"!==this.viewMode&&(this.viewMode="Portrait",this.isOption1Visible?(this.tween3&&this.tween3.stop(),this.isOption1Running=!1,this.showOption1()):this.isOption2Visible&&(this.tween4&&this.tween4.stop(),this.isOption2Running=!1,this.showOption2()))}),this)},UIMgr.prototype.showMain=function(){var t=this;this.isMainRunning||(this.isMainRunning=!0,this.isMainVisible=!0,tween1=this.leftBoard.tween(this.leftBoard.getLocalPosition()).to({x:this.togo1.x,y:this.togo1.y,z:this.togo1.z},this.durationIn,pc.SineInOut),tween2=this.rightBoard.tween(this.rightBoard.getLocalPosition()).to({x:this.togo2.x,y:this.togo2.y,z:this.togo2.z},this.durationIn,pc.SineInOut),this.isDone1=!1,this.isDone2=!1,tween1.on("complete",(function(){t.isDone1=!0})),tween2.on("complete",(function(){t.isDone2=!0})),tween1.start(),tween2.start())},UIMgr.prototype.hideMain=function(){var t=this;this.isMainRunning||(this.isMainRunning=!0,this.isMainVisible=!1,tween1=this.leftBoard.tween(this.leftBoard.getLocalPosition()).to({x:this.pos1.x,y:this.pos1.y,z:this.pos1.z},this.durationOut,pc.SineInOut),tween2=this.rightBoard.tween(this.rightBoard.getLocalPosition()).to({x:this.pos2.x,y:this.pos2.y,z:this.pos2.z},this.durationOut,pc.SineInOut),this.isDone1=!1,this.isDone2=!1,tween1.on("complete",(function(){t.isDone1=!0})),tween2.on("complete",(function(){t.isDone2=!0})),tween1.start(),tween2.start())},UIMgr.prototype.showOption1=function(){var t=this;if(!this.isOption1Running){this.isOption1Running=!0,this.isOption1Visible=!0;var i="Portrait"!==this.viewMode?this.togo3Landscape:this.togo3Portrait;tween3=this.optionBoard1.tween(this.optionBoard1.getLocalPosition()).to({x:i.x,y:i.y,z:i.z},this.durationIn,pc.SineInOut),tween3.on("complete",(function(){t.isOption1Running=!1})),tween3.start()}},UIMgr.prototype.hideOption1=function(){var t=this;this.isOption1Running||(this.isOption1Running=!0,this.isOption1Visible=!1,tween3=this.optionBoard1.tween(this.optionBoard1.getLocalPosition()).to({x:this.pos3.x,y:this.pos3.y,z:this.pos3.z},this.durationOut,pc.SineInOut),tween3.on("complete",(function(){t.isOption1Running=!1})),tween3.start())},UIMgr.prototype.showOption2=function(){var t=this;if(!this.isOption2Running){this.isOption2Running=!0,this.isOption2Visible=!0;var i="Portrait"!==this.viewMode?this.togo4Landscape:this.togo4Portrait;tween4=this.optionBoard2.tween(this.optionBoard2.getLocalPosition()).to({x:i.x,y:i.y,z:i.z},this.durationIn,pc.SineInOut),tween4.on("complete",(function(){t.isOption2Running=!1})),tween4.start()}},UIMgr.prototype.hideOption2=function(){var t=this;this.isOption2Running||(this.isOption2Running=!0,this.isOption2Visible=!1,tween4=this.optionBoard2.tween(this.optionBoard2.getLocalPosition()).to({x:this.pos4.x,y:this.pos4.y,z:this.pos4.z},this.durationOut,pc.SineInOut),tween4.on("complete",(function(){t.isOption2Running=!1})),tween4.start())},UIMgr.prototype.update=function(t){this.isMainRunning&&this.isDone1&&this.isDone2&&(this.isMainRunning=!1)};var FadeOut=pc.createScript("fadeOut");FadeOut.attributes.add("event",{type:"string"}),FadeOut.attributes.add("duration",{type:"number",default:1e3}),FadeOut.prototype.initialize=function(){this.app.on(this.event,(function(){var t=this.entity.sprite;t.opacity=1;var e=this.duration;new TWEEN.Tween(t).to({opacity:0},e).onStart((function(){t.enabled=!0})).onComplete((function(){t.enabled=!1})).repeat(0).yoyo(!1).start()}),this),this.on("enable",(function(){var t=this.entity.sprite;t.enabled=!0,t.opacity=1}))};var FadeIn=pc.createScript("fadeIn");FadeIn.attributes.add("event",{type:"string"}),FadeIn.attributes.add("duration",{type:"number",default:1e3}),FadeIn.prototype.initialize=function(){this.app.on(this.event,(function(){var t=this.entity.sprite;t.opacity=0;var e=this.duration;new TWEEN.Tween(t).to({opacity:1},e).onStart((function(){t.enabled=!0})).onComplete((function(){t.enabled=!0})).repeat(0).yoyo(!1).start()}),this),this.on("enable",(function(){var t=this.entity.sprite;t.enabled=!1,t.opacity=0}))};var Fade=pc.createScript("fade");Fade.attributes.add("event",{type:"string"}),Fade.attributes.add("type",{type:"number",enum:[{In:0},{Out:1},{InOut:2}]}),Fade.attributes.add("duration",{type:"number",default:1e3}),Fade.attributes.add("delay",{type:"number",default:0}),Fade.prototype.initialize=function(){this.app.on(this.event,(function(){var t=this.type,e=this.entity.sprite;e.opacity=1===t?1:0;var a=this.duration;2===t&&(a*=.5);new TWEEN.Tween(e).to({opacity:1===t?0:1},a).onStart((function(){e.enabled=!0})).onComplete((function(){e.enabled=0===t})).repeat(2===t?1:0).yoyo(2===t).delay(this.delay).start()}),this),this.on("enable",(function(){var t=this.type,e=this.entity.sprite;e.enabled=1===t,e.opacity=1===t?1:0}))};var Ui=pc.createScript("uiShare");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"css-share"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"html-share"}),Ui.attributes.add("buttonSound",{type:"string"}),Ui.prototype.initialize=function(){var e=this.app,i=document.createElement("style");document.head.appendChild(i),i.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container-share"),this.div.innerHTML=this.html.resource||"";this.app.assets.find("path3@3x.png").getFileUrl();this.div.innerHTML=this.div.innerHTML.replace("{closex-image}",e.assets.find("close.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{ebike-image}",e.assets.find("ebike.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{facebook-image}",e.assets.find("Facebook.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{redit-image}",e.assets.find("Reddit.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{snapchat-image}",e.assets.find("Snapchat.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{twitter-image}",e.assets.find("Twitter.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{whatsapp-image}",e.assets.find("WhatsApp.png").getFileUrl()),this.pageIsShown=!1},Ui.prototype.showPage=function(){if(!this.pageIsShown){this.pageIsShown=!0;var e=this.app,i=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){e.fire("game:playSound",i.buttonSound),i.hidePage(),e.fire("game:closeSharePage")})}},Ui.prototype.hidePage=function(){this.pageIsShown&&(this.pageIsShown=!1,this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=null),document.body.removeChild(this.div))};var DrawTomiddleScreen=pc.createScript("drawTomiddleScreen");DrawTomiddleScreen.attributes.add("cameraEntity",{type:"entity"}),DrawTomiddleScreen.prototype.initialize=function(){},DrawTomiddleScreen.prototype.doRaycast=function(e,t){var i=this.app.systems.rigidbody.raycastFirst(e,t);i?(this.entity.sprite.enabled=!0,this.entity.setPosition(i.point)):this.entity.sprite.enabled=!1},DrawTomiddleScreen.prototype.update=function(e){var t=this.app,i=t.graphicsDevice.width/2/window.devicePixelRatio,a=t.graphicsDevice.height/2/window.devicePixelRatio,r=this.cameraEntity.camera.screenToWorld(i,a,this.cameraEntity.camera.nearClip),c=this.cameraEntity.camera.screenToWorld(i,a,this.cameraEntity.camera.farClip);this.doRaycast(r,c)};var Ui=pc.createScript("uiBattery");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"html-battery"}),Ui.attributes.add("buttonSound",{type:"string"}),Ui.prototype.initialize=function(){var t=this.app,e=document.createElement("style");document.head.appendChild(e),e.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"",this.div.innerHTML=this.div.innerHTML.replace("{closex-image}",t.assets.find("close.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{pedals-image}",t.assets.find("pedals.png").getFileUrl()),this.pageIsShown=!1},Ui.prototype.showPage=function(){if(!this.pageIsShown){this.pageIsShown=!0;var t=this.app,e=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){t.fire("game:playSound",e.buttonSound),e.hidePage(),t.fire("game:closeBatteryInfoPage")}),this.title=document.getElementById("batterytitle"),this.title&&(this.title.innerHTML="500w/h battery")}},Ui.prototype.showPage2=function(){if(!this.pageIsShown){this.pageIsShown=!0;var t=this.app,e=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){t.fire("game:playSound",e.buttonSound),e.hidePage(),t.fire("game:closeBatteryInfoPage")}),this.title=document.getElementById("batterytitle"),this.title&&(this.title.innerHTML="1000w/h battery")}},Ui.prototype.hidePage=function(){this.pageIsShown&&(this.pageIsShown=!1,this.btnXClose&&(this.btnXClose.onclick=null),document.body.removeChild(this.div))};var Ui=pc.createScript("uiMotor");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"html-motor"}),Ui.attributes.add("buttonSound",{type:"string"}),Ui.prototype.initialize=function(){var t=this.app,e=document.createElement("style");document.head.appendChild(e),e.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"",this.div.innerHTML=this.div.innerHTML.replace("{closex-image}",t.assets.find("close.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{motor-image}",t.assets.find("motors.jpg").getFileUrl()),this.pageIsShown=!1},Ui.prototype.showPage=function(){if(!this.pageIsShown){this.pageIsShown=!0;var t=this.app,e=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){t.fire("game:playSound",e.buttonSound),e.hidePage(),t.fire("game:closeEngineInfoPage")}),this.title=document.getElementById("motortitle"),this.title&&(this.title.innerHTML="1000w motor")}},Ui.prototype.showPage2=function(){if(!this.pageIsShown){this.pageIsShown=!0;var t=this.app,e=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){t.fire("game:playSound",e.buttonSound),e.hidePage(),t.fire("game:closeEngineInfoPage")}),this.title=document.getElementById("motortitle"),this.title&&(this.title.innerHTML="2000w motor")}},Ui.prototype.hidePage=function(){this.pageIsShown&&(this.pageIsShown=!1,this.btnXClose&&(this.btnXClose.onclick=null),document.body.removeChild(this.div))};var Ui=pc.createScript("uiBuy");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"html-buy"}),Ui.attributes.add("buttonSound",{type:"string"}),Ui.prototype.initialize=function(){var i=this.app,e=document.createElement("style");document.head.appendChild(e),e.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"";var t=i.assets.find("path3@3x.png").getFileUrl();this.div.innerHTML=this.div.innerHTML.replace("{closex-image}",i.assets.find("close.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{arrow-left}",i.assets.find("arrow-left.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{cart-image}",i.assets.find("cart.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{arrow}",t),this.div.innerHTML=this.div.innerHTML.replace("{arrow2}",t),this.div.innerHTML=this.div.innerHTML.replace("{arrow3}",t),this.div.innerHTML=this.div.innerHTML.replace("{arrow4}",t),this.div.innerHTML=this.div.innerHTML.replace("{arrow5}",t),this.div.innerHTML=this.div.innerHTML.replace("{ebike-image}",i.assets.find("ebike.png").getFileUrl());var n=i.assets.find("star_active.png").getFileUrl();this.div.innerHTML=this.div.innerHTML.replace("{star-image}",n),this.div.innerHTML=this.div.innerHTML.replace("{star-image2}",n),this.div.innerHTML=this.div.innerHTML.replace("{star-image3}",n),this.div.innerHTML=this.div.innerHTML.replace("{star-image4}",n),this.div.innerHTML=this.div.innerHTML.replace("{star-image5}",n),this.div.innerHTML=this.div.innerHTML.replace("{stars5-image}",i.assets.find("stars5.png").getFileUrl()),this.pageIsShown=!1},Ui.prototype.showPage=function(){if(!this.pageIsShown){this.pageIsShown=!0;var i=this.app,e=this;document.body.appendChild(this.div),console.log("showing buy page 1"),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){i.fire("game:playSound",e.buttonSound),e.hidePage(),i.fire("game:closeBuyPage")}),console.log("showing buy page 2"),this.btnAdd=document.getElementById("btn-add"),this.btnAdd&&(this.btnAdd.onclick=function(){i.fire("game:playSound",e.buttonSound),e.hidePage(),i.fire("game:openAddPage")}),console.log("showing buy page 3")}},Ui.prototype.hidePage=function(){this.pageIsShown&&(console.log("hidding buy page"),this.pageIsShown=!1,this.btnXClose&&(this.btnXClose.onclick=null),this.btnAdd&&(this.btnAdd.onclick=null),document.body.removeChild(this.div))};var Ui=pc.createScript("uiAdd");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"html-add"}),Ui.attributes.add("buttonSound",{type:"string"}),Ui.prototype.initialize=function(){var i=this.app,e=document.createElement("style");document.head.appendChild(e),e.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"";var t=i.assets.find("path3@3x.png").getFileUrl();this.div.innerHTML=this.div.innerHTML.replace("{closex-image}",i.assets.find("close.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{arrow-left}",t),this.div.innerHTML=this.div.innerHTML.replace("{cart-image}",i.assets.find("cart.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{arrow}",t),this.div.innerHTML=this.div.innerHTML.replace("{arrow2}",t),this.div.innerHTML=this.div.innerHTML.replace("{arrow3}",t),this.div.innerHTML=this.div.innerHTML.replace("{arrow4}",t),this.div.innerHTML=this.div.innerHTML.replace("{arrow5}",t),this.div.innerHTML=this.div.innerHTML.replace("{ebike-image}",i.assets.find("ebike.png").getFileUrl());var n=i.assets.find("star_active.png").getFileUrl();this.div.innerHTML=this.div.innerHTML.replace("{star-image}",n),this.div.innerHTML=this.div.innerHTML.replace("{star-image2}",n),this.div.innerHTML=this.div.innerHTML.replace("{star-image3}",n),this.div.innerHTML=this.div.innerHTML.replace("{star-image4}",n),this.div.innerHTML=this.div.innerHTML.replace("{star-image5}",n),this.div.innerHTML=this.div.innerHTML.replace("{stars5-image}",i.assets.find("stars5.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{slides-image}",i.assets.find("slides.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{applepay-image}",i.assets.find("applepay.png").getFileUrl()),this.pageIsShown=!1},Ui.prototype.showPage=function(){if(!this.pageIsShown){this.pageIsShown=!0;var i=this.app,e=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){i.fire("game:playSound",e.buttonSound),e.hidePage(),i.fire("game:closeAddPage")}),this.btnBack=document.getElementById("btn-back"),this.btnBack&&(this.btnBack.onclick=function(){i.fire("game:playSound",e.buttonSound),e.hidePage(),i.fire("game:openBuyPage")}),this.btnPay=document.getElementById("btn-pay"),this.btnPay&&(this.btnPay.onclick=function(){i.fire("game:playSound",e.buttonSound),e.hidePage(),i.fire("game:openPayPage")})}},Ui.prototype.hidePage=function(){this.pageIsShown&&(this.pageIsShown=!1,this.btnXClose&&(this.btnXClose.onclick=null),this.btnBack&&(this.btnBack.onclick=null),this.btnPay&&(this.btnPay.onclick=null),document.body.removeChild(this.div))};var Ui=pc.createScript("uiPay");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"html-Pay"}),Ui.attributes.add("buttonSound",{type:"string"}),Ui.prototype.initialize=function(){var e=this.app,i=document.createElement("style");document.head.appendChild(i),i.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container","container-grey"),this.div.innerHTML=this.html.resource||"";var t=e.assets.find("blue-arrow.png").getFileUrl();this.div.innerHTML=this.div.innerHTML.replace("{blue-arrow-image}",t),this.div.innerHTML=this.div.innerHTML.replace("{blue-arrow-image2}",t),this.div.innerHTML=this.div.innerHTML.replace("{blue-arrow-image3}",t),this.div.innerHTML=this.div.innerHTML.replace("{blue-arrow-image4}",t),this.div.innerHTML=this.div.innerHTML.replace("{applepayongrey-image}",e.assets.find("applepayongrey.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{chasecard-image}",e.assets.find("chasecard.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{applefaceid-image}",e.assets.find("applefaceid.png").getFileUrl()),this.pageIsShown=!1},Ui.prototype.showPage=function(){if(!this.pageIsShown){this.pageIsShown=!0;var e=this.app,i=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){e.fire("game:playSound",i.buttonSound),i.hidePage(),e.fire("game:closePayPage")})}},Ui.prototype.hidePage=function(){this.pageIsShown&&(this.pageIsShown=!1,this.btnXClose&&(this.btnXClose.onclick=null),document.body.removeChild(this.div))};var Ui=pc.createScript("uiTypes");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"html-types"}),Ui.attributes.add("buttonSound",{type:"string"}),Ui.prototype.initialize=function(){var e=this.app,t=document.createElement("style");document.head.appendChild(t),t.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"",this.div.innerHTML=this.div.innerHTML.replace("{closex-image}",e.assets.find("close.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{types-image}",e.assets.find("types.jpg").getFileUrl()),this.pageIsShown=!1},Ui.prototype.showPage=function(){if(!this.pageIsShown){this.pageIsShown=!0;var e=this.app,t=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){e.fire("game:playSound",t.buttonSound),t.hidePage(),e.fire("game:closeBikeTypeInfoPage")}),this.title=document.getElementById("bikeTypetitle"),this.title&&(this.title.innerHTML="Wheel Drive")}},Ui.prototype.showPage2=function(){if(!this.pageIsShown){this.pageIsShown=!0;var e=this.app,t=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){e.fire("game:playSound",t.buttonSound),t.hidePage(),e.fire("game:closeBikeTypeInfoPage")}),this.title=document.getElementById("bikeTypetitle"),this.title&&(this.title.innerHTML="Hub-Drive")}},Ui.prototype.hidePage=function(){this.pageIsShown&&(this.pageIsShown=!1,this.btnXClose&&(this.btnXClose.onclick=null),document.body.removeChild(this.div))};var Ui=pc.createScript("uiRide");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"html-ride"}),Ui.attributes.add("buttonSound",{type:"string"}),Ui.prototype.initialize=function(){var e=this.app,t=document.createElement("style");document.head.appendChild(t),t.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"";this.app.assets.find("path3@3x.png").getFileUrl();this.div.innerHTML=this.div.innerHTML.replace("{closex-image}",e.assets.find("close.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{day-image}",e.assets.find("pick-day.png").getFileUrl()),this.div.innerHTML=this.div.innerHTML.replace("{map-image}",e.assets.find("MapToTestRide.png").getFileUrl()),this.pageIsShown=!1},Ui.prototype.showPage=function(){if(!this.pageIsShown){this.pageIsShown=!0;var e=this.app,t=this;document.body.appendChild(this.div),this.btnXClose=document.getElementById("btn-closeX"),this.btnXClose&&(this.btnXClose.onclick=function(){e.fire("game:playSound",t.buttonSound),t.hidePage(),e.fire("game:closeRentPage")})}},Ui.prototype.hidePage=function(){this.pageIsShown&&(this.pageIsShown=!1,this.btnXClose&&(this.btnXClose.onclick=null),document.body.removeChild(this.div))};

//# sourceMappingURL=__game-scripts.js.map