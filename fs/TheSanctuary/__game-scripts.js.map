{"version":3,"sources":["scripts/fly_camera.js","scripts/vr.js","scripts/fadeOut.js","scripts/fade.js","scripts/fadeIn.js","scripts/button.js","scripts/pulse.js","scripts/gameManager.js","scripts/Tween.js","scripts/library/tween.js","scripts/library/tweener.js","scripts/SwitchingMaterials.js","scripts/xr-input-manager.js","scripts/controller.js","scripts/circle.js","scripts/events.js","scripts/media-player.js","scripts/FadeObject.js","scripts/audio-curve.js","scripts/FadeSounds.js","scripts/interactionManager.js","scripts/sphereIn.js","scripts/sphereOut.js","scripts/bottleManager.js","scripts/bottleIn.js","scripts/bottleOut.js","scripts/splash.js","scripts/billboard.js","scripts/screensMgr.js","scripts/HoverChangeColor.js","scripts/launchUrl.js","scripts/fadeElement.js","scripts/infoBoardMgr.js","scripts/reparentBoard.js","scripts/dynamicloading.js","scripts/camera-aspect.js"],"names":[],"mappings":"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","sourcesContent":["// fly_camera.js\nvar LookCamera = pc.createScript('lookCamera');\n\nLookCamera.attributes.add(\"mouseLookSensitivity\", {type: \"number\", default: 0, title: \"Mouse Look Sensitivity\", description: \"\"});\nLookCamera.attributes.add(\"touchLookSensitivity\", {type: \"number\", default: 0, title: \"Touch Look Sensitivity\", description: \"\"});\n\nLookCamera.attributes.add(\"sphere\", {type: \"entity\", title: \"Sphere\"});\nLookCamera.attributes.add(\"bottle\", {type: \"entity\", title: \"Bottle\"});\n\nLookCamera.prototype.initialize = function () {\n    // Camera euler angle rotation around x and y axes\n    var quat = this.entity.getLocalRotation();\n    this.ex = this.getPitch(quat) * pc.math.RAD_TO_DEG;\n    this.ey = this.getYaw(quat) * pc.math.RAD_TO_DEG;\n    \n    this.targetEx = this.ex;\n    this.targetEy = this.ey;\n       \n    this.moved = false;\n    this.lmbDown = false;\n    \n    this.externalControl = false;\n    var quat2 = this.bottle.getLocalRotation();\n    this.selItemEx = this.getPitch(quat2) * pc.math.RAD_TO_DEG;\n    this.selItemEy = this.getYaw(quat2) * pc.math.RAD_TO_DEG;\n    this.targetSelItemEx = this.selItemEx;\n    this.targetSelItemEy = this.selItemEy;\n\n    // Disabling the context menu stops the browser displaying a menu when\n    // you right-click the page\n    this.app.mouse.disableContextMenu();\n\n    this.lastTouchPosition = new pc.Vec2();\n\n    this.addEventCallbacks();\n        \n    this.app.on('lookCamera:focusModeOn', function () {\n        this.externalControl = true;   \n    }, this);\n    \n    this.app.on('lookCamera:focusModeOff', function () {\n        this.externalControl = false;\n    }, this);\n    \n    this.app.on('lookCamera:rotateleft', function () {\n        var increment = -15;\n        if(!pc.platform.mobile && this.app.xr.active)\n            increment = -30;\n            \n        this.targetSelItemEy += increment * this.mouseLookSensitivity;  \n    }, this);\n    \n    this.app.on('lookCamera:rotateright', function () {\n        var increment = 15;\n        if(!pc.platform.mobile && this.app.xr.active)\n            increment = 30;\n        \n        this.targetSelItemEy += increment * this.mouseLookSensitivity;  \n    }, this);\n    \n    this.on(\"destroy\", function () {\n        this.removeEventCallbacks();\n    });\n    \n    this.app.xr.on('start', function() {\n        this.entity.setLocalEulerAngles(0,0,0);\n    }, this);\n};\n\nLookCamera.prototype.addEventCallbacks = function() {\n    if (this.app.mouse) {\n        this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n        this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n        this.app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n    }\n    \n    if (this.app.touch) {\n        this.app.touch.on(pc.EVENT_TOUCHSTART, this.onTouchStart, this);\n        this.app.touch.on(pc.EVENT_TOUCHEND, this.onTouchEnd, this);\n        this.app.touch.on(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        this.app.touch.on(pc.EVENT_TOUCHCANCEL, this.onTouchCancel, this);   \n    }\n};\n\nLookCamera.prototype.removeEventCallbacks = function() {\n    if (this.app.mouse) {\n        this.app.mouse.off(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n        this.app.mouse.off(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n        this.app.mouse.off(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n    }\n    \n    if (this.app.touch) {\n        this.app.touch.off(pc.EVENT_TOUCHSTART, this.onTouchStart, this);\n        this.app.touch.off(pc.EVENT_TOUCHEND, this.onTouchEnd, this);\n        this.app.touch.off(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        this.app.touch.off(pc.EVENT_TOUCHCANCEL, this.onTouchCancel, this);   \n    }\n};\n\n// Taken from http://stackoverflow.com/questions/23310299/quaternion-from-tait-bryan-angles\n// Not completely accurate, usually a couple of degrees out\nLookCamera.prototype.getYaw = function (quaternion) {\n    var q = quaternion;\n    var x = q.x * q.x;\n    var y = q.y * q.y;\n    \n    return Math.atan2(2 * q.y * q.w - 2 * q.z * q.x, 1 - 2 * y - 2 * x);    \n};\n\nLookCamera.prototype.getPitch = function(quaternion) {\n    var q = quaternion;\n    return -Math.asin(2 * q.z * q.y + 2 * q.x * q.w);\n};\n\nLookCamera.prototype.update = function (dt) {\n    \n    // Update the camera's orientation\n    this.selItemEx = pc.math.lerp(this.selItemEx, this.targetSelItemEx, dt / 0.2);\n    this.selItemEy = pc.math.lerp(this.selItemEy, this.targetSelItemEy, dt / 0.2);\n\n    if (this.bottle) {\n        this.bottle.setLocalEulerAngles(this.selItemEx, this.selItemEy, 0);\n    }   \n\n    // Update the camera's orientation\n    this.ex = pc.math.lerp(this.ex, this.targetEx, dt / 0.2);\n    this.ey = pc.math.lerp(this.ey, this.targetEy, dt / 0.2);\n\n    if (! this.app.xr.active) {\n        this.entity.setLocalEulerAngles(this.ex, this.ey, 0);\n    }   \n\n    // Make sure that the user is always in the center of the sphere\n    this.sphere.setPosition(this.entity.getPosition());\n};\n\nLookCamera.prototype.moveCamera = function(dx, dy, lookSensitivity) {\n    \n    // Update the current Euler angles, clamp the pitch.\n    if (!this.moved) {\n        // first move event can be very large\n        this.moved = true;\n        return;\n    }\n      \n    if(this.externalControl) {\n        this.targetSelItemEx += dy * lookSensitivity;\n        this.targetSelItemEx = pc.math.clamp(this.targetSelItemEx, -90, 90);\n        this.targetSelItemEy += dx * lookSensitivity;  \n    }  \n    else  {\n        this.targetEx += dy * lookSensitivity;\n        this.targetEx = pc.math.clamp(this.targetEx, -90, 90);\n        this.targetEy += dx * lookSensitivity;  \n    } \n};\n\nLookCamera.prototype.onMouseMove = function (event) {  \n    \n    if (!this.lmbDown)\n        return;\n    \n    this.moveCamera(event.dx, event.dy, this.mouseLookSensitivity);\n};\n\nLookCamera.prototype.onMouseDown = function (event) {\n    if (event.button === 0) {\n        this.lmbDown = true;\n    }\n};\n\nLookCamera.prototype.onMouseUp = function (event) {\n    if (event.button === 0) {\n        this.lmbDown = false;\n    }\n};\n\nLookCamera.prototype.onTouchStart = function(event) {\n    if (event.touches.length == 1) {\n        this.lmbDown = true;\n\n        var touch = event.touches[0];\n        this.lastTouchPosition.set(touch.x, touch.y);\n        \n        var entity = this.onSelect(touch.x, touch.y);\n        if(entity && entity === this.bottle) {\n            this.externalControl = true;\n        }\n    }\n    event.event.preventDefault();\n};\n\nLookCamera.prototype.onTouchEnd = function(event) {\n    if (event.touches.length === 0) {\n        this.lmbDown = false;\n        this.externalControl = false;\n    } else if (event.touches.length == 1) {\n        var touch = event.touches[0];\n        this.lastTouchPosition.set(touch.x, touch.y);  \n    }\n};\n\nLookCamera.prototype.onTouchMove = function(event) {\n    var touch = event.touches[0];\n    if (event.touches.length == 1) {\n        this.moveCamera((touch.x - this.lastTouchPosition.x), (touch.y - this.lastTouchPosition.y), this.touchLookSensitivity);\n    }\n    this.lastTouchPosition.set(touch.x, touch.y);\n};\n\nLookCamera.prototype.onTouchCancel = function(event) {\n    this.externalControl = false;\n    this.lmbDown = false;\n};\n\nLookCamera.prototype.onSelect = function (x, y) {\n    var app = this.app;\n    \n    var from = this.entity.camera.screenToWorld(x, y, this.entity.camera.nearClip);\n    var to = this.entity.camera.screenToWorld(x, y, this.entity.camera.farClip);\n\n    var result = app.systems.rigidbody.raycastFirst(from, to); \n      \n    var pickedEntity = null;\n    if(result) {\n        pickedEntity = result.entity;\n    }\n    \n    return pickedEntity;\n};\n\n","// vr.js\nvar Vr = pc.createScript('vr');\n\n// entity with button element\nVr.attributes.add('vrButton', {\n    type: 'entity'\n});\n\n// entity with camera component\nVr.attributes.add('cameraEntity', {\n    type: 'entity'\n});\n\n// entity with camera component\nVr.attributes.add('helperPointer', {\n    type: 'entity'\n});\n\nVr.attributes.add('gazingTime', {\n    type: 'number',\n    default: 1,\n    description: 'Time before selection when gazing'\n});\n\nVr.attributes.add('mouseHelper', { type: 'boolean', default: false });\nVr.attributes.add('touchHelper', { type: 'boolean', default: false });\n\nVr.prototype.initialize = function() {\n    var app = this.app;\n    \n    this.selectedEntity = null;\n    this.worldPos = new pc.Vec3();\n    this.isAction = false;\n    this.isDragging = false;\n    this.timer = 0;\n    this.pointerScale = this.helperPointer.getLocalScale().clone();\n    \n    if(app.mouse) {\n        app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n        app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n        app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n        app.mouse.on(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n    }\n    \n    if(app.touch) {\n        app.touch.on(pc.EVENT_TOUCHSTART, this.onTouchStart, this);\n        app.touch.on(pc.EVENT_TOUCHEND, this.onTouchEnd, this);\n        app.touch.on(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n    }\n    \n    this.vrButton.enabled = app.xr.supported && app.xr.isAvailable(pc.XRTYPE_VR);\n    \n    // click button\n    this.vrButton.element.on('click', function() {\n        \n        this.vrButton.script.pulse.pulse();\n        \n        // check support\n        if (this.app.xr.isAvailable(pc.XRTYPE_VR)) {\n            \n            // ask for motion permissions if we can\n            if (window.DeviceOrientationEvent && window.DeviceOrientationEvent.requestPermission) {\n                \n                DeviceOrientationEvent.requestPermission().then(\n                    function(response) {\n                        if (response == 'granted') {\n                            window.addEventListener('deviceorientation', function (e) {\n                                \n                                // start session\n                                this.cameraEntity.camera.startXr(pc.XRTYPE_VR, pc.XRSPACE_LOCAL);\n                                \n                            }.bind(this));\n                        }\n                    }.bind(this)).catch(console.error);\n            } else {\n                // start session\n                this.cameraEntity.camera.startXr(pc.XRTYPE_VR, pc.XRSPACE_LOCAL);\n            }\n        }\n    }, this);\n    \n    app.keyboard.on('keydown', function(evt) {\n        if (evt.key === pc.KEY_ESCAPE && app.xr.active) {\n            app.xr.end();\n        }\n    }, this);\n    \n    app.xr.on('start', function() {\n        \n        var assetsToHide = app.root.findByTag('HideInVR');\n\n        for (var i = 0; i < assetsToHide.length; ++i) { \n            assetsToHide[i].enabled = false;\n        }\n        \n        if(app.mouse) {\n            app.mouse.off(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n            app.mouse.off(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n            app.mouse.off(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n            app.mouse.off(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n        }\n        \n        if(app.touch) {\n            if(pc.platform.mobile)\n                this.helperPointerEnabled(true);\n            \n            app.touch.off(pc.EVENT_TOUCHSTART, this.onTouchStart, this);\n            app.touch.off(pc.EVENT_TOUCHEND, this.onTouchEnd, this);\n            app.touch.off(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        }\n        \n        this.vrButton.enabled = false;\n    }, this);\n    \n    app.xr.on('end', function() {\n        \n        var assetsToShow = app.root.findByTag('HideInVR');\n\n        for (var i = 0; i < assetsToShow.length; ++i) { \n            assetsToShow[i].enabled = true;\n        }\n        \n        //just making sure camera comes back to right position when getting out of VR\n        this.cameraEntity.setPosition(0, 0, 0);\n        \n        if(app.mouse) {\n            app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n            app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n            app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n            app.mouse.on(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n        }\n        \n        if(app.touch) {\n            if(pc.platform.mobile)\n                this.helperPointerEnabled(false);\n            \n            app.touch.on(pc.EVENT_TOUCHSTART, this.onTouchStart, this);\n            app.touch.on(pc.EVENT_TOUCHEND, this.onTouchEnd, this);\n            app.touch.on(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        }\n        \n        this.vrButton.enabled = true;\n    }, this);\n};\n\nVr.prototype.helperPointerEnabled = function (val) {\n    this.helperPointer.enabled = val;\n};\n\nVr.prototype.onTouchStart = function (e) {\n    this.isAction = true;\n};\n\nVr.prototype.onTouchEnd = function (e) {\n    var app = this.app;\n    var self = this;\n    \n    this.isAction = false;\n    \n    if(app.xr.active)\n        return;\n    \n    if(this.isDragging) {\n        this.isDragging = false;\n        return;  \n    }\n    \n    if (e.changedTouches.length === 0) {\n        return;\n    }\n        \n    var touch = e.changedTouches[0];\n    var result = this.onSelect(touch.x, touch.y);\n    \n    if(!result && this.touchHelper) {\n        \n        this.helperPointerEnabled(true);\n        this.setHelperPointer(touch.x, touch.y, this.cameraEntity);\n        this.helperPointer.script.pulse.pulse();\n        \n        setTimeout(function () {\n            self.helperPointerEnabled(false);\n        }, 300);\n    }  \n    \n    e.event.preventDefault();\n};\n\nVr.prototype.setHelperPointer = function (x, y, cameraEntity) {\n    \n    var camPos = cameraEntity.getPosition();\n    var worldPos = this.worldPos;\n\n    cameraEntity.camera.screenToWorld(x, y, camPos.z + 2, worldPos);\n    \n    this.helperPointer.setLocalPosition(worldPos);\n    this.helperPointer.setRotation(cameraEntity.getRotation());\n    this.helperPointer.rotateLocal(90, 0, 0);\n};\n\nVr.prototype.onTouchMove = function (e) {\n    if(this.isAction) {\n        this.isDragging = true;\n    }\n};\n\nVr.prototype.onMouseDown = function (e) {\n    this.isAction = true;\n};\n\nVr.prototype.onMouseUp = function (e) {\n    var app = this.app;\n    var self = this;\n    \n    this.isAction = false;\n    \n    if(this.isDragging) {\n        this.isDragging = false;\n        return;  \n    }\n    \n    app.fire('interactMgr:hoveroff', this.selectedEntity);\n    this.selectedEntity = null;\n\n    var result = this.onSelect(e.x, e.y);\n    \n    if(!result && this.mouseHelper) {\n        \n        this.helperPointerEnabled(true);\n        this.setHelperPointer(e.x, e.y, this.cameraEntity);\n        this.helperPointer.script.pulse.pulse();\n        \n        setTimeout(function () {\n            self.helperPointerEnabled(false);\n        }, 300);\n    }\n};\n\nVr.prototype.onMouseMove = function (e) { \n\n    if(this.isAction) { \n        this.isDragging = true;\n        return;\n    }\n\n   var from = this.cameraEntity.camera.screenToWorld(e.x, e.y, this.cameraEntity.camera.nearClip);\n   var to = this.cameraEntity.camera.screenToWorld(e.x, e.y, this.cameraEntity.camera.farClip);\n   this.doRaycast(from, to, 0, false);\n};\n\nVr.prototype.onMouseWheel = function (e) {\n\n    // Prevent default zoom when using laptop + trackpad + pinch/spread\n    if(e && e.event)\n        e.event.preventDefault();\n};\n\nVr.prototype.onSelect = function (x, y) {\n    var app = this.app;\n    \n    var from = this.cameraEntity.camera.screenToWorld(x, y, this.cameraEntity.camera.nearClip);\n    var to = this.cameraEntity.camera.screenToWorld(x, y, this.cameraEntity.camera.farClip);\n\n    var result = app.systems.rigidbody.raycastFirst(from, to); \n        \n    if(result) {\n        var pickedEntity = result.entity;\n        app.fire('interactMgr:activate', pickedEntity);\n    }\n    \n    return !(result === null || result === undefined);\n};\n\nVr.prototype.doRaycast = function (from, to, dt, isGazing) {\n    var app = this.app;\n    var self = this;\n    \n    var rayResult = app.systems.rigidbody.raycastFirst(from, to); \n        \n    if(rayResult) {\n  \n        var pickedEntity = rayResult.entity;\n        //console.log('PickedEntity: ' + pickedEntity.name);\n\n        if(pickedEntity !== self.selectedEntity) {\n            \n            //restore the materials on previouly selected item\n            app.fire('interactMgr:hoveroff', self.selectedEntity);\n\n            //change selected item materials\n            app.fire('interactMgr:hoveron', pickedEntity);\n\n            //new selected items\n            self.selectedEntity = pickedEntity;\n            \n            if(isGazing) {\n                this.timer = 0;\n                this.helperPointer.setLocalScale(this.pointerScale);\n            }\n        }\n        else {\n            if(isGazing) {\n                this.timer += dt;\n\n                if(this.timer > this.gazingTime) {\n                    app.fire('interactMgr:activate', pickedEntity);  \n                    if(!pickedEntity.tags.has('repeatable'))\n                        this.timer = 0;\n                }\n                else {\n                    var curScale = this.helperPointer.getScale();\n                    curScale.x -= 0.006;\n                    curScale.y -= 0.006;\n                    curScale.z -= 0.006;\n                    this.helperPointer.setLocalScale(curScale);\n                }\n            }\n        }\n    }\n    else {\n        if(self.selectedEntity) {\n        \n            //restore the materials on previouly selected item\n            app.fire('interactMgr:hoveroff', self.selectedEntity);\n\n            //no selection\n            self.selectedEntity = null;\n            \n            if(isGazing) {\n                this.timer = 0;\n                this.helperPointer.setLocalScale(this.pointerScale);\n            }\n        }\n    }\n};   \n\n// update code called every frame\nVr.prototype.update = function(dt) {\n    var app = this.app;\n    \n    //gazing code\n    if(pc.platform.mobile && app.xr.active) {\n        \n        var screenCenterX = app.graphicsDevice.width / 2;\n        var screenCenterY = app.graphicsDevice.height / 2;\n\n        this.helperPointerEnabled(true);\n        this.setHelperPointer(screenCenterX, screenCenterY, this.cameraEntity);\n\n        var from = this.cameraEntity.camera.screenToWorld(screenCenterX, screenCenterY, this.cameraEntity.camera.nearClip);\n        var to = this.cameraEntity.camera.screenToWorld(screenCenterX, screenCenterY, this.cameraEntity.camera.farClip);\n        this.doRaycast(from, to, dt, true);\n    }\n};\n\n\n","// fadeOut.js\nvar FadeOut = pc.createScript('fadeOut');\n\nFadeOut.attributes.add('event', { type:'string' });\nFadeOut.attributes.add('duration', { type:'number', default: 1000 });\n/*enum: [\n        { 'In': 0 },\n        { 'Out': 1 },\n        { 'InOut': 2 }\n    ]*/\n// initialize code called once per entity\nFadeOut.prototype.initialize = function() {\n    var app = this.app;\n\n    app.on(this.event, function () {\n        var type = 1;\n        var sprite = this.entity.sprite;\n        sprite.opacity = type === 1 ? 1 : 0;\n\n        var time = this.duration;\n        if (type === 2) {\n            time *= 0.5;\n        }\n        var tween = new TWEEN.Tween(sprite)\n            .to({ opacity: type === 1 ? 0 : 1 }, time)\n            .onStart(function () {\n                sprite.enabled = true;\n            })\n            .onComplete(function () {\n                sprite.enabled = type === 0;\n            })\n            .repeat(type === 2 ? 1 : 0)\n            .yoyo(type === 2)\n            .start();\n    }, this);\n    \n    this.on('enable', function () {\n        var type = 1;\n        var sprite = this.entity.sprite;\n        sprite.enabled = type === 1;\n        sprite.opacity = type === 1 ? 1 : 0;\n    });\n};\n\n","// fade.js\nvar Fade = pc.createScript('fade');\n\nFade.attributes.add('event', { type:'string' });\nFade.attributes.add('type', {\n    type: 'number',\n    enum: [\n        { 'In': 0 },\n        { 'Out': 1 },\n        { 'InOut': 2 }\n    ]\n});\nFade.attributes.add('duration', { type:'number', default: 1000 });\nFade.attributes.add('delay', { type:'number', default: 0 });\n\n// initialize code called once per entity\nFade.prototype.initialize = function() {\n    var app = this.app;\n\n    app.on(this.event, function () {\n        var type = this.type;\n        var sprite = this.entity.sprite;\n        sprite.opacity = type === 1 ? 1 : 0;\n\n        var time = this.duration;\n        if (type === 2) {\n            time *= 0.5;\n        }\n        var tween = new TWEEN.Tween(sprite)\n            .to({ opacity: type === 1 ? 0 : 1 }, time)\n            .onStart(function () {\n                sprite.enabled = true;\n            })\n            .onComplete(function () {\n                sprite.enabled = type === 0;\n            })\n            .repeat(type === 2 ? 1 : 0)\n            .yoyo(type === 2)\n            .delay(this.delay)\n            .start();\n    }, this);\n    \n    this.on('enable', function () {\n        var type = this.type;\n        var sprite = this.entity.sprite;\n        sprite.enabled = type === 1;\n        sprite.opacity = type === 1 ? 1 : 0;\n    });\n};\n\n\n","// fadeIn.js\nvar FadeIn = pc.createScript('fadeIn');\n\nFadeIn.attributes.add('event', { type:'string' });\nFadeIn.attributes.add('duration', { type:'number', default: 1000 });\n\n/*enum: [\n        { 'In': 0 },\n        { 'Out': 1 },\n        { 'InOut': 2 }\n    ]*/\n\n// initialize code called once per entity\nFadeIn.prototype.initialize = function() {\n    var app = this.app;\n\n    app.on(this.event, function () {\n        var type = 0;\n        var sprite = this.entity.sprite;\n        sprite.opacity = type === 1 ? 1 : 0;\n\n        var time = this.duration;\n        if (type === 2) {\n            time *= 0.5;\n        }\n        var tween = new TWEEN.Tween(sprite)\n            .to({ opacity: type === 1 ? 0 : 1 }, time)\n            .onStart(function () {\n                sprite.enabled = true;\n            })\n            .onComplete(function () {\n                sprite.enabled = type === 0;\n            })\n            .repeat(type === 2 ? 1 : 0)\n            .yoyo(type === 2)\n            .start();\n    }, this);\n    \n    this.on('enable', function () {\n        var type = 0;\n        var sprite = this.entity.sprite;\n        sprite.enabled = type === 1;\n        sprite.opacity = type === 1 ? 1 : 0;\n    });\n};\n\n","// button.js\nvar Button = pc.createScript('button');\n\nButton.attributes.add('sound', { type: 'string' });\nButton.attributes.add('event', { type: 'string' });\n\nButton.attributes.add('copyEnabled', { type: 'boolean', default: false });\nButton.attributes.add(\"entityToCopyText\", { type: \"entity\", title: \"Entity to copy text\"});\nButton.attributes.add('eventCopy', { type: 'string', default: 'game:copycoupon'});\n\nButton.attributes.add('switchEnabled', { type: 'boolean', default: false });\nButton.attributes.add('stringidstart', { type: 'string' });\nButton.attributes.add('stringidfinish', { type: 'string' });\nButton.attributes.add('switchMessageTime', { type: 'number', default: 2000 });\n\n// initialize code called once per entity\nButton.prototype.initialize = function() {\n    var app = this.app;\n\n    this.pressed = false;\n    \n    this.entity.element.on('click', this.onClick, this);\n};\n\n// When we release the element assign the original texture if\n// we are not hovering or the hover texture if we are still hovering\nButton.prototype.onClick = function (event) {\n\n    var app = this.app;\n    //console.log('Playcanvas OnClick');\n    \n    if(this.entity.button && !this.entity.button.active)\n        return;\n\n    if(this.entity.script.pulse)\n        this.entity.script.pulse.pulse();\n    \n    app.fire(this.event);\n    app.fire('game:playSound', this.sound);\n\n    if(this.copyEnabled)\n        app.fire(this.eventCopy, this.entityToCopyText.element.text);\n\n    if(this.switchEnabled) {\n\n        var self = this;  \n\n        //text directly on entity?\n        if(this.entity.element && this.entity.element.text) {\n\n            this.entity.element.text = app.i18n.getText(this.stringidfinish);\n\n            setTimeout(function () {\n                self.entity.element.text = app.i18n.getText(self.stringidstart);\n            }, this.switchMessageTime);\n        }\n        else  { //text element as a child?\n            if(this.entity.children.length > 0 && this.entity.children[0]) {\n                if(this.entity.children[0].element && this.entity.children[0].element.text) {\n\n                    this.entity.children[0].element.text = app.i18n.getText(this.stringidfinish);\n\n                    setTimeout(function () {\n                        self.entity.children[0].element.text = app.i18n.getText(self.stringidstart);\n                    }, this.switchMessageTime);\n                }\n            }  \n        }\n    }  \n\n};\n\n","// pulse.js\nvar Pulse = pc.createScript('pulse');\n\nPulse.attributes.add('startingEvent', {\n    title: 'Event',\n    type: 'string'\n});\n\nPulse.attributes.add('loop', {\n    title: 'Loop',\n    type: 'boolean',\n    default: false\n});\n\nPulse.attributes.add('duration', {\n    type: 'number',\n    default: 0.1,\n    description: 'Tween animation duration'\n});\n\nPulse.attributes.add('scaleincrement', {\n    type: 'number',\n    default: 1,\n    description: 'Amout of scaling on pulse animation'\n});\n\n// initialize code called once per entity\nPulse.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    this.app.on(this.startingEvent, function () {\n        this.pulse();\n    }, this);\n};\n\nPulse.prototype.pulse = function () {\n\n    var self = this;\n    \n    if(!this.isRunning)\n    {\n        this.isRunning = true;\n        var scale = this.entity.getLocalScale().clone();\n        var tween = this.entity.tween(this.entity.getLocalScale()).to({x: scale.x+this.scaleincrement, y: scale.y+this.scaleincrement, z: scale.z+this.scaleincrement}, this.duration, pc.SineInOut);\n        \n        if(!this.loop) {\n            tween.yoyo(true).repeat(2).on('complete', function () {\n                self.isRunning = false;\n            }); \n        }\n        else {\n            tween.loop(true).yoyo(true);\n        }    \n       \n        tween.start();\n    }\n    \n};\n\n\n","// gameManager.js\nvar GameManager = pc.createScript('gameManager');\n\nGameManager.attributes.add('Entry', { type: 'entity' });\nGameManager.attributes.add('Training', { type: 'entity' });\nGameManager.attributes.add('Tattoo', { type: 'entity' });\nGameManager.attributes.add('Lounge', { type: 'entity' });\nGameManager.attributes.add('Board', { type: 'entity' });\nGameManager.attributes.add('timeTutoIsShown', { type:'number', default: 2 });\nGameManager.attributes.add('formUrl', { type: 'string' });\n\n// entity with camera component\nGameManager.attributes.add('cameraEntity', {\n    type: 'entity'\n});\n\n\n// initialize code called once per entity\nGameManager.prototype.initialize = function() {\n    var app = this.app;\n    app.addTweenManager();\n    app.fire('game:playSound', 'Music');\n    \n    this.viewMode = 'Landscape';\n    this.boardStartingPos = this.Board.getPosition().clone();\n    this.UpdateVisuals(this.viewMode === 'Landscape');\n    \n    \n    this.currentIndex = 0;\n\n    app.on('game:landscape', function () {\n        if(this.viewMode === 'Landscape')\n            return;\n        \n        this.viewMode = 'Landscape';\n        this.UpdateVisuals(this.viewMode === 'Landscape');\n    }, this);\n    \n    app.on('game:portrait', function () {    \n        if(this.viewMode === 'Portrait')\n            return; \n        \n        this.viewMode = 'Portrait';\n        this.UpdateVisuals(this.viewMode === 'Landscape');\n    }, this);\n    \n    app.keyboard.on('keydown', function(evt) {\n        \n        /*var index = -1;\n        switch (evt.key) {\n            case pc.KEY_1: \n                index = 0;\n                break;\n            case pc.KEY_2: \n                index = 1;\n                break;\n            case pc.KEY_3:\n                index = 2;\n                break;\n            case pc.KEY_4: \n                index = 3;\n                break;\n            case pc.KEY_5: \n                break;\n        }*/\n        \n        /*if(index !== -1) {\n            if(this.currentIndex === index)\n                return;\n            \n            this.currentIndex = index;\n            app.fire('game:switchview', index);\n        }*/\n    }, this);\n    \n    app.on('game:activate', function (entity) {\n        \n        var index = -1;\n        switch (entity.name) {\n            case 'GenTeleportZone': \n                index = 0;\n                break;\n            case 'TattooTeleportZone': \n                index = 1;\n                break;\n            case 'LoungeTeleportZone':\n                index = 2;\n                break;\n            case 'TrainingTeleportZone': \n                index = 3;\n                break;\n        }\n        \n        if(entity.tags.has('url')) {\n            app.fire('bottlemgr:hideBtnClick', false);\n            entity.script.launchUrl.launch();\n        } else if(entity.tags.has('closeboard')) {\n            app.fire('infoboard:close');\n        } else if(entity.tags.has('openweb')) {\n            app.fire('infoboard:openlink');\n        }\n        \n        if(index !== -1) {\n            if(this.currentIndex === index)\n                return;\n\n            app.fire('infoboard:close');\n            this.currentIndex = index;\n            app.fire('game:switchview', index, entity.getPosition());\n        }\n    }, this);\n    \n    app.on('game:switchview', function (index, to) {\n        var self = this;\n        \n        var direction = new pc.Vec3();\n        direction.sub2(to, this.cameraEntity.getPosition());\n        direction.y = 0;\n        direction.normalize();\n        \n        self.Entry.enabled = false;\n        self.Training.enabled = false;\n        self.Tattoo.enabled = false;\n        self.Lounge.enabled = false;\n        app.fire('tv:fadeout');\n        \n        app.fire('flash:blackIn');\n        app.fire('sphere:startAnim', direction.clone().scale(-1));\n        app.fire('media-player:muteVideo', false);\n        this.entity.script.bottleManager.hideBottle(false);\n        \n\n        setTimeout(function () {\n\n            app.fire('switch:toindex', index); \n            app.fire('sphere:endAnim', direction);\n            app.fire('flash:blackOut');\n            \n            setTimeout(function () {\n                switch(index) {\n                    case 0 : {\n                        self.Entry.enabled = true;\n                        self.Training.enabled = false;\n                        self.Tattoo.enabled = false;\n                        self.Lounge.enabled = false;\n                        app.fire('entry:enabled');\n                        app.fire('tv:fadein');\n                        app.fire('reparentboard:update');\n                    }\n                        break;\n                    case 1 : {\n                        self.Tattoo.enabled = true;\n                        self.Entry.enabled = false;\n                        self.Training.enabled = false;\n                        self.Lounge.enabled = false;\n                        app.fire('pulse:start');\n                        app.fire('tattoo:enabled');\n                        app.fire('tv:fadein');\n                        app.fire('reparentboard:update');\n                    }\n                        break;\n                    case 2 : {\n                        self.Lounge.enabled = true;\n                        self.Entry.enabled = false;\n                        self.Training.enabled = false;\n                        self.Tattoo.enabled = false;\n                        app.fire('pulse:start');\n                        app.fire('lounge:enabled');\n                        app.fire('tv:fadein');\n                        app.fire('reparentboard:update');\n                    }\n                        break;\n                    case 3 : {\n                        self.Training.enabled = true;\n                        self.Entry.enabled = false;\n                        self.Tattoo.enabled = false;\n                        self.Lounge.enabled = false;\n                        app.fire('pulse:start');\n                        app.fire('training:enabled');\n                        app.fire('tv:fadein');\n                        app.fire('reparentboard:update');\n                    }\n                        break;\n                }\n            }, 750);\n        }, 500);\n    }, this);\n    \n    \n    app.on('game:openform', function () {\n        var left = (screen.width / 2) - (640 / 2);\n        var top = (screen.height / 2) - (380 / 2);\n        window.open(this.formUrl, 'popup', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=640, height=380, top=' + top + ', left=' + left);\n    \n    }, this);\n    \n    app.on('game:playSound', function (slot) {\n        this.entity.sound.play(slot);\n    }, this);\n    \n    app.on('game:stopSound', function (slot) {\n        this.entity.sound.stop(slot);\n    }, this);\n    \n    app.on('game:muteAll', function () {\n        \n        /*this.app.systems.sound.volume = this.app.systems.sound.volume !== 0 ? 0 : 1;\n        if(this.app.systems.sound.volume === 0) {\n            var asset1 = app.assets.find(\"btn_mute.png\", \"sprite\");\n            app.root.findByName('UI').findByName('SoundButton').enabled = true;\n            app.root.findByName('UI').findByName('SoundButtonMuted').enabled = false;\n            \n            if(window.tc_events_100)\n                window.tc_events_100(this, 'clickevent', {'ACTION':'contest - sound - activate'}); \n        }\n        else {\n            var asset2 = app.assets.find(\"btn_mute_bleu.png\", \"sprite\");\n            app.root.findByName('UI').findByName('SoundButton').enabled = false;\n            app.root.findByName('UI').findByName('SoundButtonMuted').enabled = true;\n            \n            if(window.tc_events_100)\n                window.tc_events_100(this, 'clickevent', {'ACTION':'contest - sound - deactivate'}); \n        } */\n    }, this);\n};\n\nGameManager.prototype.UpdateVisuals = function(isLandscape) {\n    var app = this.app;\n    \n    if(isLandscape) { \n        this.Board.setLocalPosition(this.boardStartingPos.x, this.boardStartingPos.y, this.boardStartingPos.z);\n    } \n    else { \n        this.Board.setLocalPosition(this.boardStartingPos.x, this.boardStartingPos.y, this.boardStartingPos.z - 1);\n    } \n};\n\nGameManager.prototype.postInitialize = function() {\n    var app = this.app;\n    \n    app.fire('media-player:playBtnClick', false, true);\n    \n    setTimeout(function () {\n        app.fire('tuto:fadeout');\n    }, this.timeTutoIsShown);\n};  \n\n\n\n// update code called every frame\nGameManager.prototype.update = function(dt) {\n    TWEEN.update();\n};\n\n","// Tween.js\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\n\nvar _Group = function () {\n\tthis._tweens = {};\n\tthis._tweensAddedDuringUpdate = {};\n};\n\n_Group.prototype = {\n\tgetAll: function () {\n\n\t\treturn Object.keys(this._tweens).map(function (tweenId) {\n\t\t\treturn this._tweens[tweenId];\n\t\t}.bind(this));\n\n\t},\n\n\tremoveAll: function () {\n\n\t\tthis._tweens = {};\n\n\t},\n\n\tadd: function (tween) {\n\n\t\tthis._tweens[tween.getId()] = tween;\n\t\tthis._tweensAddedDuringUpdate[tween.getId()] = tween;\n\n\t},\n\n\tremove: function (tween) {\n\n\t\tdelete this._tweens[tween.getId()];\n\t\tdelete this._tweensAddedDuringUpdate[tween.getId()];\n\n\t},\n\n\tupdate: function (time, preserve) {\n\n\t\tvar tweenIds = Object.keys(this._tweens);\n\n\t\tif (tweenIds.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t// Tweens are updated in \"batches\". If you add a new tween during an update, then the\n\t\t// new tween will be updated in the next batch.\n\t\t// If you remove a tween during an update, it may or may not be updated. However,\n\t\t// if the removed tween was added during the current batch, then it will not be updated.\n\t\twhile (tweenIds.length > 0) {\n\t\t\tthis._tweensAddedDuringUpdate = {};\n\n\t\t\tfor (var i = 0; i < tweenIds.length; i++) {\n\n\t\t\t\tvar tween = this._tweens[tweenIds[i]];\n\n\t\t\t\tif (tween && tween.update(time) === false) {\n\t\t\t\t\ttween._isPlaying = false;\n\n\t\t\t\t\tif (!preserve) {\n\t\t\t\t\t\tdelete this._tweens[tweenIds[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttweenIds = Object.keys(this._tweensAddedDuringUpdate);\n\t\t}\n\n\t\treturn true;\n\n\t}\n};\n\nvar TWEEN = new _Group();\n\nTWEEN.Group = _Group;\nTWEEN._nextId = 0;\nTWEEN.nextId = function () {\n\treturn TWEEN._nextId++;\n};\n\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (self) === 'undefined' && typeof (process) !== 'undefined' && process.hrtime) {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n}\n// In a browser, use self.performance.now if it is available.\nelse if (typeof (self) !== 'undefined' &&\n         self.performance !== undefined &&\n\t\t self.performance.now !== undefined) {\n\t// This must be bound, because directly assigning this function\n\t// leads to an invocation exception in Chrome.\n\tTWEEN.now = self.performance.now.bind(self.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n\tTWEEN.now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n\tTWEEN.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n\nTWEEN.Tween = function (object, group) {\n\tthis._object = object;\n\tthis._valuesStart = {};\n\tthis._valuesEnd = {};\n\tthis._valuesStartRepeat = {};\n\tthis._duration = 1000;\n\tthis._repeat = 0;\n\tthis._repeatDelayTime = undefined;\n\tthis._yoyo = false;\n\tthis._isPlaying = false;\n\tthis._reversed = false;\n\tthis._delayTime = 0;\n\tthis._startTime = null;\n\tthis._easingFunction = TWEEN.Easing.Linear.None;\n\tthis._interpolationFunction = TWEEN.Interpolation.Linear;\n\tthis._chainedTweens = [];\n\tthis._onStartCallback = null;\n\tthis._onStartCallbackFired = false;\n\tthis._onUpdateCallback = null;\n\tthis._onRepeatCallback = null;\n\tthis._onCompleteCallback = null;\n\tthis._onStopCallback = null;\n\tthis._group = group || TWEEN;\n\tthis._id = TWEEN.nextId();\n\n};\n\nTWEEN.Tween.prototype = {\n\tgetId: function () {\n\t\treturn this._id;\n\t},\n\n\tisPlaying: function () {\n\t\treturn this._isPlaying;\n\t},\n\n\tto: function (properties, duration) {\n\n\t\tthis._valuesEnd = Object.create(properties);\n\n\t\tif (duration !== undefined) {\n\t\t\tthis._duration = duration;\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tduration: function duration(d) {\n\t\tthis._duration = d;\n\t\treturn this;\n\t},\n\n\tstart: function (time) {\n\n\t\tthis._group.add(this);\n\n\t\tthis._isPlaying = true;\n\n\t\tthis._onStartCallbackFired = false;\n\n\t\tthis._startTime = time !== undefined ? typeof time === 'string' ? TWEEN.now() + parseFloat(time) : time : TWEEN.now();\n\t\tthis._startTime += this._delayTime;\n\n\t\tfor (var property in this._valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (this._valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (this._valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\tthis._valuesEnd[property] = [this._object[property]].concat(this._valuesEnd[property]);\n\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (this._object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Save the starting value.\n\t\t\tthis._valuesStart[property] = this._object[property];\n\n\t\t\tif ((this._valuesStart[property] instanceof Array) === false) {\n\t\t\t\tthis._valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\tthis._valuesStartRepeat[property] = this._valuesStart[property] || 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tif (!this._isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis._group.remove(this);\n\t\tthis._isPlaying = false;\n\n\t\tif (this._onStopCallback !== null) {\n\t\t\tthis._onStopCallback(this._object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\n\t},\n\n\tend: function () {\n\n\t\tthis.update(Infinity);\n\t\treturn this;\n\n\t},\n\n\tstopChainedTweens: function () {\n\n\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\tthis._chainedTweens[i].stop();\n\t\t}\n\n\t},\n\n\tgroup: function (group) {\n\t\tthis._group = group;\n\t\treturn this;\n\t},\n\n\tdelay: function (amount) {\n\n\t\tthis._delayTime = amount;\n\t\treturn this;\n\n\t},\n\n\trepeat: function (times) {\n\n\t\tthis._repeat = times;\n\t\treturn this;\n\n\t},\n\n\trepeatDelay: function (amount) {\n\n\t\tthis._repeatDelayTime = amount;\n\t\treturn this;\n\n\t},\n\n\tyoyo: function (yoyo) {\n\n\t\tthis._yoyo = yoyo;\n\t\treturn this;\n\n\t},\n\n\teasing: function (easingFunction) {\n\n\t\tthis._easingFunction = easingFunction;\n\t\treturn this;\n\n\t},\n\n\tinterpolation: function (interpolationFunction) {\n\n\t\tthis._interpolationFunction = interpolationFunction;\n\t\treturn this;\n\n\t},\n\n\tchain: function () {\n\n\t\tthis._chainedTweens = arguments;\n\t\treturn this;\n\n\t},\n\n\tonStart: function (callback) {\n\n\t\tthis._onStartCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonUpdate: function (callback) {\n\n\t\tthis._onUpdateCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonRepeat: function onRepeat(callback) {\n\n\t\tthis._onRepeatCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonComplete: function (callback) {\n\n\t\tthis._onCompleteCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonStop: function (callback) {\n\n\t\tthis._onStopCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tupdate: function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < this._startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._onStartCallbackFired === false) {\n\n\t\t\tif (this._onStartCallback !== null) {\n\t\t\t\tthis._onStartCallback(this._object);\n\t\t\t}\n\n\t\t\tthis._onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - this._startTime) / this._duration;\n\t\telapsed = (this._duration === 0 || elapsed > 1) ? 1 : elapsed;\n\n\t\tvalue = this._easingFunction(elapsed);\n\n\t\tfor (property in this._valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (this._valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = this._valuesStart[property] || 0;\n\t\t\tvar end = this._valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\tthis._object[property] = this._interpolationFunction(end, value);\n\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\tthis._object[property] = start + (end - start) * value;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (this._onUpdateCallback !== null) {\n\t\t\tthis._onUpdateCallback(this._object, elapsed);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (this._repeat > 0) {\n\n\t\t\t\tif (isFinite(this._repeat)) {\n\t\t\t\t\tthis._repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in this._valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof (this._valuesEnd[property]) === 'string') {\n\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._yoyo) {\n\t\t\t\t\t\tvar tmp = this._valuesStartRepeat[property];\n\n\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesEnd[property];\n\t\t\t\t\t\tthis._valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._valuesStart[property] = this._valuesStartRepeat[property];\n\n\t\t\t\t}\n\n\t\t\t\tif (this._yoyo) {\n\t\t\t\t\tthis._reversed = !this._reversed;\n\t\t\t\t}\n\n\t\t\t\tif (this._repeatDelayTime !== undefined) {\n\t\t\t\t\tthis._startTime = time + this._repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\tthis._startTime = time + this._delayTime;\n\t\t\t\t}\n\n\t\t\t\tif (this._onRepeatCallback !== null) {\n\t\t\t\t\tthis._onRepeatCallback(this._object);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (this._onCompleteCallback !== null) {\n\n\t\t\t\t\tthis._onCompleteCallback(this._object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\tthis._chainedTweens[i].start(this._startTime + this._duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n};\n\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function (k) {\n\n\t\t\treturn k;\n\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k * (2 - k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t}\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t},\n\n\tBezier: function (v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\n\t},\n\n\tCatmullRom: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t}\n\n\t},\n\n\tUtils: {\n\n\t\tLinear: function (p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t},\n\n\t\tBernstein: function (n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t},\n\n\t\tFactorial: (function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\n\t\t\t};\n\n\t\t})(),\n\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t}\n\n\t}\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n\n\tif (typeof define === 'function' && define.amd) {\n\n\t\t// AMD\n\t\tdefine([], function () {\n\t\t\treturn TWEEN;\n\t\t});\n\n\t} else if (typeof module !== 'undefined' && typeof exports === 'object') {\n\n\t\t// Node.js\n\t\tmodule.exports = TWEEN;\n\n\t} else if (root !== undefined) {\n\n\t\t// Global variable\n\t\troot.TWEEN = TWEEN;\n\n\t}\n\n})(this);\n\n\n","// tween.js\npc.extend(pc, function () {\n\n    /**\n     * @name pc.TweenManager\n     * @description Handles updating tweens\n     * @param {pc.Application} app  The application\n     */\n    var TweenManager = function (app) {\n        this._app = app;\n        this._tweens = [];\n        this._add = []; // to be added\n    };\n\n    TweenManager.prototype = {\n        add: function (tween) {\n            this._add.push(tween);\n            return tween;\n        },\n\n        update: function (dt) {\n            var i = 0;\n            var n = this._tweens.length;\n            while (i < n) {\n                if (this._tweens[i].update(dt)) {\n                    i++;\n                } else {\n                    this._tweens.splice(i, 1);\n                    n--;\n                }\n            }\n\n            // add any tweens that were added mid-update\n            if (this._add.length) {\n                this._tweens = this._tweens.concat(this._add);\n                this._add.length = 0;\n            }\n        }\n    };\n\n    /**\n     * @name  pc.Tween\n     * @param {Object} target The target property that will be tweened\n     * @param {pc.TweenManager} manager The tween manager\n     * @param {pc.Entity} entity The pc.Entity whose property we are tweening\n     */\n    var Tween = function (target, manager, entity) {\n        pc.events.attach(this);\n\n        this.manager = manager;\n\n        if (entity) {\n            this.entity = null; // if present the tween will dirty the transforms after modify the target\n        }\n\n        this.time = 0;\n\n        this.complete = false;\n        this.playing = false;\n        this.stopped = true;\n        this.pending = false;\n\n        this.target = target;\n\n        this.duration = 0;\n        this._currentDelay = 0;\n        this.timeScale = 1;\n        this._reverse = false;\n\n        this._delay = 0;\n        this._yoyo = false;\n\n        this._count = 0;\n        this._numRepeats = 0;\n        this._repeatDelay = 0;\n\n        this._from = false; // indicates a \"from\" tween\n\n        // for rotation tween\n        this._slerp = false; // indicates a rotation tween\n        this._fromQuat = new pc.Quat();\n        this._toQuat = new pc.Quat();\n        this._quat = new pc.Quat();\n\n        this.easing = pc.Linear;\n\n        this._sv = {}; // start values\n        this._ev = {}; // end values\n    };\n\n    var _parseProperties = function (properties) {\n        var _properties;\n        if (properties instanceof pc.Vec2) {\n            _properties = {\n                x: properties.x,\n                y: properties.y\n            };\n        } else if (properties instanceof pc.Vec3) {\n            _properties = {\n                x: properties.x,\n                y: properties.y,\n                z: properties.z\n            };\n        } else if (properties instanceof pc.Vec4) {\n            _properties = {\n                x: properties.x,\n                y: properties.y,\n                z: properties.z,\n                w: properties.w\n            };\n        } else if (properties instanceof pc.Quat) {\n            _properties = {\n                x: properties.x,\n                y: properties.y,\n                z: properties.z,\n                w: properties.w\n            };\n        } else if (properties instanceof pc.Color) {\n            _properties = {\n                r: properties.r,\n                g: properties.g,\n                b: properties.b,\n            };\n            if (properties.a !== undefined) {\n                _properties.a = properties.a;\n            }\n        } else {\n            _properties = properties;\n        }\n        return _properties;\n    }\n    Tween.prototype = {\n        // properties - js obj of values to update in target\n        to: function (properties, duration, easing, delay, repeat, yoyo) {\n            this._properties = _parseProperties(properties);\n            this.duration = duration;\n\n            if (easing) this.easing = easing;\n            if (delay) {\n                this.delay(delay);\n            }\n            if (repeat) {\n                this.repeat(repeat);\n            }\n\n            if (yoyo) {\n                this.yoyo(yoyo);\n            }\n\n            return this;\n        },\n\n        from: function (properties, duration, easing, delay, repeat, yoyo) {\n            this._properties = _parseProperties(properties);\n            this.duration = duration;\n\n            if (easing) this.easing = easing;\n            if (delay) {\n                this.delay(delay);\n            }\n            if (repeat) {\n                this.repeat(repeat);\n            }\n\n            if (yoyo) {\n                this.yoyo(yoyo);\n            }\n\n            this._from = true;\n\n            return this;\n        },\n\n        rotate: function (properties, duration, easing, delay, repeat, yoyo) {\n            this._properties = _parseProperties(properties);\n\n            this.duration = duration;\n\n            if (easing) this.easing = easing;\n            if (delay) {\n                this.delay(delay);\n            }\n            if (repeat) {\n                this.repeat(repeat);\n            }\n\n            if (yoyo) {\n                this.yoyo(yoyo);\n            }\n\n            this._slerp = true;\n\n            return this;\n        },\n\n        start: function () {\n            var prop, _x, _y, _z;\n\n            this.playing = true;\n            this.complete = false;\n            this.stopped = false;\n            this._count = 0;\n            this.pending = (this._delay > 0);\n\n            if (this._reverse && !this.pending) {\n                this.time = this.duration;\n            } else {\n                this.time = 0;\n            }\n\n            if (this._from) {\n                for (prop in this._properties) {\n                    if (this._properties.hasOwnProperty(prop)) {\n                        this._sv[prop] = this._properties[prop];\n                        this._ev[prop] = this.target[prop];\n                    }\n                }\n\n                if (this._slerp) {\n                    this._toQuat.setFromEulerAngles(this.target.x, this.target.y, this.target.z);\n\n                    _x = this._properties.x !== undefined ? this._properties.x : this.target.x;\n                    _y = this._properties.y !== undefined ? this._properties.y : this.target.y;\n                    _z = this._properties.z !== undefined ? this._properties.z : this.target.z;\n                    this._fromQuat.setFromEulerAngles(_x, _y, _z);\n                }\n            } else {\n                for (prop in this._properties) {\n                    if (this._properties.hasOwnProperty(prop)) {\n                        this._sv[prop] = this.target[prop];\n                        this._ev[prop] = this._properties[prop];\n                    }\n                }\n\n                if (this._slerp) {\n                    this._fromQuat.setFromEulerAngles(this.target.x, this.target.y, this.target.z);\n\n                    _x = this._properties.x !== undefined ? this._properties.x : this.target.x;\n                    _y = this._properties.y !== undefined ? this._properties.y : this.target.y;\n                    _z = this._properties.z !== undefined ? this._properties.z : this.target.z;\n                    this._toQuat.setFromEulerAngles(_x, _y, _z);\n                }\n            }\n\n            // set delay\n            this._currentDelay = this._delay;\n\n            // add to manager when started\n            this.manager.add(this);\n\n            return this;\n        },\n\n        pause: function () {\n            this.playing = false;\n        },\n\n        resume: function () {\n            this.playing = true;\n        },\n\n        stop: function () {\n            this.playing = false;\n            this.stopped = true;\n        },\n\n        delay: function (delay) {\n            this._delay = delay;\n            this.pending = true;\n\n            return this;\n        },\n\n        repeat: function (num, delay) {\n            this._count = 0;\n            this._numRepeats = num;\n            if (delay) {\n                this._repeatDelay = delay;\n            } else {\n                this._repeatDelay = 0;\n            }\n\n            return this;\n        },\n\n        loop: function (loop) {\n            if (loop) {\n                this._count = 0;\n                this._numRepeats = Infinity;\n            } else {\n                this._numRepeats = 0;\n            }\n\n            return this;\n        },\n\n        yoyo: function (yoyo) {\n            this._yoyo = yoyo;\n            return this;\n        },\n\n        reverse: function () {\n            this._reverse = !this._reverse;\n\n            return this;\n        },\n\n        chain: function () {\n            var n = arguments.length;\n\n            while(n--) {\n                if (n > 0) {\n                    arguments[n-1]._chained = arguments[n];\n                } else {\n                    this._chained = arguments[n];\n                }\n            }\n\n            return this;\n        },\n\n        update: function (dt) {\n            if (this.stopped) return false;\n\n            if (!this.playing) return true;\n\n            if (!this._reverse || this.pending) {\n                this.time += dt*this.timeScale;\n            } else {\n                this.time -= dt*this.timeScale;\n            }\n\n            // delay start if required\n            if (this.pending) {\n                if (this.time > this._currentDelay) {\n                    if (this._reverse) {\n                        this.time = this.duration - (this.time - this._currentDelay);\n                    } else {\n                        this.time = this.time - this._currentDelay;\n                    }\n                    this.pending = false;\n                } else {\n                    return true;\n                }\n            }\n\n            var _extra = 0;\n            if ((!this._reverse && this.time > this.duration) || (this._reverse && this.time < 0)){\n                this._count++;\n                this.complete = true;\n                this.playing = false;\n                if (this._reverse) {\n                    _extra = this.duration - this.time;\n                    this.time = 0;\n                } else {\n                    _extra = this.time - this.duration;\n                    this.time = this.duration;\n                }\n            }\n\n            var elapsed = this.time / this.duration;\n\n            // run easing\n            var a = this.easing(elapsed);\n\n            // increment property\n            var s,e,d;\n            for (var prop in this._properties) {\n                if (this._properties.hasOwnProperty(prop)) {\n                    s = this._sv[prop];\n                    e = this._ev[prop];\n                    this.target[prop] = s + (e - s) * a;\n                }\n            }\n\n            if (this._slerp) {\n                this._quat.slerp(this._fromQuat, this._toQuat, a);\n            }\n\n            // if this is a entity property then we should dirty the transform\n            if (this.entity) {\n                this.entity._dirtifyLocal();\n\n                // apply element property changes\n                if (this.element && this.entity.element) {\n                    this.entity.element[this.element] = this.target;\n                }\n\n                if (this._slerp) {\n                    this.entity.setLocalRotation(this._quat);\n                }\n            }\n\n            this.fire(\"update\", dt);\n\n            if (this.complete) {\n                var repeat = this._repeat(_extra);\n                if (!repeat) {\n                    this.fire(\"complete\", _extra);\n                    if (this.entity)\n                        this.entity.off('destroy', this.stop, this);\n                    if (this._chained) this._chained.start();\n                } else {\n                    this.fire(\"loop\");\n                }\n\n                return repeat;\n            }\n\n            return true;\n        },\n\n        _repeat: function (extra) {\n            // test for repeat conditions\n            if (this._count < this._numRepeats) {\n                // do a repeat\n                if (this._reverse) {\n                    this.time = this.duration - extra;\n                } else {\n                    this.time = extra; // include overspill time\n                }\n                this.complete = false;\n                this.playing = true;\n\n                this._currentDelay = this._repeatDelay;\n                this.pending = true;\n\n                if (this._yoyo) {\n                    // swap start/end properties\n                    for (var prop in this._properties) {\n                        var tmp = this._sv[prop];\n                        this._sv[prop] = this._ev[prop];\n                        this._ev[prop] = tmp;\n                    }\n\n                    if (this._slerp) {\n                        this._quat.copy(this._fromQuat);\n                        this._fromQuat.copy(this._toQuat);\n                        this._toQuat.copy(this._quat);\n                    }\n                }\n\n                return true;\n            }\n            return false;\n        },\n\n    };\n\n\n    /**\n     * Easing methods\n     */\n\n    var Linear = function (k) {\n        return k;\n    };\n\n    var QuadraticIn = function (k) {\n        return k * k;\n    };\n\n    var QuadraticOut = function (k) {\n        return k * (2 - k);\n    };\n\n    var QuadraticInOut = function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    };\n\n    var CubicIn = function (k) {\n        return k * k * k;\n    };\n\n    var CubicOut = function (k) {\n        return --k * k * k + 1;\n    };\n\n    var CubicInOut = function (k) {\n        if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k;\n        return 0.5 * ( ( k -= 2 ) * k * k + 2 );\n    };\n\n    var QuarticIn = function (k) {\n            return k * k * k * k;\n    };\n\n    var QuarticOut = function (k) {\n        return 1 - ( --k * k * k * k );\n    };\n\n    var QuarticInOut = function (k) {\n        if ( ( k *= 2 ) < 1) return 0.5 * k * k * k * k;\n        return - 0.5 * ( ( k -= 2 ) * k * k * k - 2 );\n    };\n\n    var QuinticIn = function (k) {\n            return k * k * k * k * k;\n    };\n\n    var QuinticOut = function (k) {\n            return --k * k * k * k * k + 1;\n    };\n\n    var QuinticInOut = function (k) {\n        if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k * k * k;\n        return 0.5 * ( ( k -= 2 ) * k * k * k * k + 2 );\n    };\n\n    var SineIn = function (k) {\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        return 1 - Math.cos( k * Math.PI / 2 );\n    };\n\n    var SineOut = function (k) {\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        return Math.sin( k * Math.PI / 2 );\n    };\n\n    var SineInOut = function (k) {\n        if (k === 0) return 0;\n        if (k === 1) return 1;\n        return 0.5 * ( 1 - Math.cos( Math.PI * k ) );\n    };\n\n    var ExponentialIn = function (k) {\n        return k === 0 ? 0 : Math.pow( 1024, k - 1 );\n    };\n\n    var ExponentialOut = function (k) {\n        return k === 1 ? 1 : 1 - Math.pow( 2, - 10 * k );\n    };\n\n    var ExponentialInOut = function (k) {\n        if ( k === 0 ) return 0;\n        if ( k === 1 ) return 1;\n        if ( ( k *= 2 ) < 1 ) return 0.5 * Math.pow( 1024, k - 1 );\n        return 0.5 * ( - Math.pow( 2, - 10 * ( k - 1 ) ) + 2 );\n    };\n\n    var CircularIn = function (k) {\n        return 1 - Math.sqrt( 1 - k * k );\n    };\n\n    var CircularOut = function (k) {\n        return Math.sqrt( 1 - ( --k * k ) );\n    };\n\n    var CircularInOut = function (k) {\n        if ( ( k *= 2 ) < 1) return - 0.5 * ( Math.sqrt( 1 - k * k) - 1);\n        return 0.5 * ( Math.sqrt( 1 - ( k -= 2) * k) + 1);\n    };\n\n    var ElasticIn = function (k) {\n        var s, a = 0.1, p = 0.4;\n        if ( k === 0 ) return 0;\n        if ( k === 1 ) return 1;\n        if ( !a || a < 1 ) { a = 1; s = p / 4; }\n        else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n        return - ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n    };\n\n    var ElasticOut = function (k) {\n        var s, a = 0.1, p = 0.4;\n        if ( k === 0 ) return 0;\n        if ( k === 1 ) return 1;\n        if ( !a || a < 1 ) { a = 1; s = p / 4; }\n        else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n        return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n    };\n\n    var ElasticInOut = function (k) {\n        var s, a = 0.1, p = 0.4;\n        if ( k === 0 ) return 0;\n        if ( k === 1 ) return 1;\n        if ( !a || a < 1 ) { a = 1; s = p / 4; }\n        else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n        if ( ( k *= 2 ) < 1 ) return - 0.5 * ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n        return a * Math.pow( 2, -10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) * 0.5 + 1;\n    };\n\n    var BackIn = function (k) {\n            var s = 1.70158;\n            return k * k * ( ( s + 1 ) * k - s );\n    };\n\n    var BackOut = function (k) {\n        var s = 1.70158;\n        return --k * k * ( ( s + 1 ) * k + s ) + 1;\n    };\n\n    var BackInOut = function (k) {\n        var s = 1.70158 * 1.525;\n        if ( ( k *= 2 ) < 1 ) return 0.5 * ( k * k * ( ( s + 1 ) * k - s ) );\n        return 0.5 * ( ( k -= 2 ) * k * ( ( s + 1 ) * k + s ) + 2 );\n    };\n\n    var BounceIn = function (k) {\n        return 1 - BounceOut( 1 - k );\n    };\n\n    var BounceOut = function (k) {\n        if ( k < ( 1 / 2.75 ) ) {\n            return 7.5625 * k * k;\n        } else if ( k < ( 2 / 2.75 ) ) {\n            return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n        } else if ( k < ( 2.5 / 2.75 ) ) {\n            return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n        } else {\n            return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n        }\n    };\n\n    var BounceInOut = function (k) {\n        if ( k < 0.5 ) return BounceIn( k * 2 ) * 0.5;\n        return BounceOut( k * 2 - 1 ) * 0.5 + 0.5;\n    };\n\n    return {\n        TweenManager: TweenManager,\n        Tween: Tween,\n        Linear: Linear,\n        QuadraticIn: QuadraticIn,\n        QuadraticOut: QuadraticOut,\n        QuadraticInOut: QuadraticInOut,\n        CubicIn: CubicIn,\n        CubicOut: CubicOut,\n        CubicInOut: CubicInOut,\n        QuarticIn: QuarticIn,\n        QuarticOut: QuarticOut,\n        QuarticInOut: QuarticInOut,\n        QuinticIn: QuinticIn,\n        QuinticOut: QuinticOut,\n        QuinticInOut: QuinticInOut,\n        SineIn: SineIn,\n        SineOut: SineOut,\n        SineInOut: SineInOut,\n        ExponentialIn: ExponentialIn,\n        ExponentialOut: ExponentialOut,\n        ExponentialInOut: ExponentialInOut,\n        CircularIn: CircularIn,\n        CircularOut: CircularOut,\n        CircularInOut: CircularInOut,\n        BackIn: BackIn,\n        BackOut: BackOut,\n        BackInOut: BackInOut,\n        BounceIn: BounceIn,\n        BounceOut: BounceOut,\n        BounceInOut: BounceInOut,\n        ElasticIn: ElasticIn,\n        ElasticOut: ElasticOut,\n        ElasticInOut: ElasticInOut\n    };\n}());\n\n// Expose prototype methods and create a default tween manager on the application\n(function () {\n    // Add pc.Application#addTweenManager method\n    pc.Application.prototype.addTweenManager = function () {\n        this._tweenManager = new pc.TweenManager(this);\n\n        this.on(\"update\", function (dt) {\n            this._tweenManager.update(dt);\n        });\n    };\n\n    // Add pc.Application#tween method\n    pc.Application.prototype.tween = function (target) {\n        return new pc.Tween(target, this._tweenManager);\n    };\n\n    // Add pc.Entity#tween method\n    pc.Entity.prototype.tween = function (target, options) {\n        var tween = this._app.tween(target);\n        tween.entity = this;\n\n        this.once('destroy', tween.stop, tween);\n\n        if (options && options.element) {\n            // specifiy a element property to be updated\n            tween.element = options.element;\n        }\n        return tween;\n    };\n\n    // Create a default tween manager on the application\n    var application = pc.Application.getApplication();\n    if (application) {\n        application.addTweenManager();\n    }\n})();\n\n\n","// tweener.js\nvar Tweener = pc.createScript('tweener');\n\nTweener.attributes.add('event', {\n    title: 'Event',\n    type: 'string'\n});\nTweener.attributes.add('duration', {\n    title: 'Duration',\n    type: 'number',\n    default: 1000\n});\nTweener.attributes.add('easingFunction', {\n    title: 'Easing Function',\n    type: 'number',\n    enum: [\n        { 'Linear': 0 },\n        { 'Quadratic': 1 },\n        { 'Cubic': 2 },\n        { 'Quartic': 3 },\n        { 'Quintic': 4 },\n        { 'Sinusoidal': 5 },\n        { 'Exponential': 6 },\n        { 'Circular': 7 },\n        { 'Elastic': 8 },\n        { 'Back': 9 },\n        { 'Bounce': 10 }\n    ]\n});\nTweener.attributes.add('easingType', { \n    title: 'Easing Type',\n    type: 'number',\n    enum: [\n        { 'In': 0 },\n        { 'Out': 1 },\n        { 'InOut': 2 }\n    ]\n});\nTweener.attributes.add('delay', {\n    title: 'Delay',\n    type: 'number',\n    default: 0\n});\nTweener.attributes.add('repeat', {\n    title: 'Repeat',\n    type: 'number',\n    default: 0\n});\nTweener.attributes.add('repeatDelay', {\n    title: 'Repeat Delay',\n    type: 'number',\n    default: 0\n});\nTweener.attributes.add('yoyo', {\n    title: 'Yoyo',\n    type: 'boolean',\n    default: false\n});\nTweener.attributes.add('startPos', {\n    title: 'Start Pos',\n    type: 'vec3',\n    default: [0, 0, 0]\n});\nTweener.attributes.add('endPos', {\n    title: 'End Pos',\n    type: 'vec3',\n    default: [0, 0, 0]\n});\nTweener.attributes.add('startRot', {\n    title: 'Start Rot',\n    type: 'vec3',\n    default: [0, 0, 0]\n});\nTweener.attributes.add('endRot', {\n    title: 'End Rot',\n    type: 'vec3',\n    default: [0, 0, 0]\n});\nTweener.attributes.add('startScale', {\n    title: 'Start Scale',\n    type: 'vec3',\n    default: [1, 1, 1]\n});\nTweener.attributes.add('endScale', {\n    title: 'End Scale',\n    type: 'vec3',\n    default: [1, 1, 1]\n});\nTweener.attributes.add('startEvent', {\n    title: 'Start Event',\n    type: 'string'\n});\nTweener.attributes.add('stopEvent', {\n    title: 'Stop Event',\n    type: 'string'\n});\nTweener.attributes.add('updateEvent', {\n    title: 'Update Event',\n    type: 'string'\n});\nTweener.attributes.add('completeEvent', {\n    title: 'Complete Event',\n    type: 'string'\n});\nTweener.attributes.add('repeatEvent', {\n    title: 'Repeat Event',\n    type: 'string'\n});\n\n// initialize code called once per entity\nTweener.prototype.initialize = function() {\n    var app = this.app;\n\n    this.initialPos = this.entity.getPosition().clone();\n    this.initialScl = this.entity.getLocalScale().clone();\n    this.initialRot = this.entity.getLocalEulerAngles().clone();\n\n    this.tween = null;\n\n    app.on(this.event, function () {\n        this.start();\n    }, this);\n    \n    this.on('enable', function () {\n        this.entity.setPosition(this.initialPos);\n        this.entity.setLocalScale(this.initialScl);\n        this.entity.setLocalEulerAngles(this.initialRot);\n    });\n\n    this.on('attr', function (name, value, prev) {\n        this.start();\n    });\n};\n\nTweener.prototype.start = function() {\n    var app = this.app;\n\n    var easingTypes = [ 'In', 'Out', 'InOut' ];\n    var easingFuncs = [ 'Linear', 'Quadratic', 'Cubic', 'Quartic', 'Quintic', 'Sinusoidal', 'Exponential', 'Circular', 'Elastic', 'Back', 'Bounce'];\n\n    var easingFunc;\n    if (this.easingFunction === 0) {\n        easingFunc = TWEEN.Easing[easingFuncs[this.easingFunction]].None;\n    } else {\n        easingFunc = TWEEN.Easing[easingFuncs[this.easingFunction]][easingTypes[this.easingType]];\n    }\n\n    if (this.tween) {\n        this.tween.stop();\n    }\n\n    var startState = { \n        px: this.startPos.x, py: this.startPos.y, pz: this.startPos.z,\n        sx: this.startScale.x, sy: this.startScale.y, sz: this.startScale.z, \n        rx: this.startRot.x, ry: this.startRot.y, rz: this.startRot.z\n    };\n    var endState = {\n        px: this.endPos.x, py: this.endPos.y, pz: this.endPos.z,\n        sx: this.endScale.x, sy: this.endScale.y, sz: this.endScale.z, \n        rx: this.endRot.x, ry: this.endRot.y, rz: this.endRot.z \n    };\n\n    var e = this.entity;\n\n    this.tween = new TWEEN.Tween(startState)\n        .to(endState, this.duration)\n        .easing(easingFunc)\n        .onStart(function (obj) {\n            if (this.startEvent !== '') {\n                app.fire(this.startEvent);\n            }\n        }.bind(this))\n        .onStop(function (obj) {\n            if (this.stopEvent !== '') {\n                app.fire(this.stopEvent);\n            }\n        }.bind(this))\n        .onUpdate(function (obj) {\n            e.setPosition(obj.px, obj.py, obj.pz);\n            e.setLocalScale(obj.sx, obj.sy, obj.sz);\n            e.setEulerAngles(obj.rx, obj.ry, obj.rz);\n            if (this.updateEvent !== '') {\n                app.fire(this.updateEvent);\n            }\n        }.bind(this))\n        .onComplete(function (obj) {\n            if (this.completeEvent !== '') {\n                app.fire(this.completeEvent);\n            }\n        }.bind(this))\n        .onRepeat(function (obj) {\n            if (this.repeatEvent !== '') {\n                app.fire(this.repeatEvent);\n            }\n        }.bind(this))\n        .repeat(this.repeat)\n        .repeatDelay(this.repeatDelay)\n        .yoyo(this.yoyo)\n        .delay(this.delay)\n        .start();\n};\n\n\n","// SwitchingMaterials.js\n// More information about materials: http://developer.playcanvas.com/en/tutorials/beginner/basic-materials/\nvar SwitchingMaterials = pc.createScript('switchingMaterials');\n\n// Create an array of materials to cycle the model through\nSwitchingMaterials.attributes.add(\"materials\", {\n    type: \"asset\", \n    assetType: \"material\", \n    array: true, \n    title: \"Materials\"});\n\n// initialize code called once per entity\nSwitchingMaterials.prototype.initialize = function() {\n    var app = this.app;\n    \n    this.materialIndex = 0;\n    \n    app.on('switch:toindex', function(index) {\n        this.changeMaterial(index); \n    }, this);\n    \n    app.on('switch:general', function () {\n        this.changeMaterial(0);\n    }, this);\n    \n    app.on('switch:lounge', function () {\n        this.changeMaterial(1);\n    }, this);\n    \n    app.on('switch:tattoo', function () {\n        this.changeMaterial(2);\n    }, this);\n    \n    app.on('switch:training', function () {\n        this.changeMaterial(3);\n    }, this);\n    \n    // Change materials every second\n    /*var self = this;\n    setInterval(function () {\n        self.changeToNextMaterial();\n    }, 2000);*/\n};\n\nSwitchingMaterials.prototype.changeMaterial = function(index) \n{\n    if(index < this.materials.length && index >= 0)\n    {\n        // Get the next material asset in the array \n        this.materialIndex = index;\n        var material = this.materials[this.materialIndex];        \n\n        // Assign the material to all the mesh instances in the model\n        var meshInstances = this.entity.model.meshInstances;\n        for (var i = 0; i < meshInstances.length; ++i) { \n            var mesh = meshInstances[i];\n            mesh.material = material.resource;\n        }\n    }\n};\n\nSwitchingMaterials.prototype.changeToNextMaterial = function() {\n    \n    // Get the next material asset in the array \n    this.materialIndex = (this.materialIndex + 1) % this.materials.length;\n    var material = this.materials[this.materialIndex];        \n\n    // Assign the material to all the mesh instances in the model\n    var meshInstances = this.entity.model.meshInstances;\n    for (var i = 0; i < meshInstances.length; ++i) { \n        var mesh = meshInstances[i];\n        mesh.material = material.resource;\n    }\n};\n\n\n\n","// xr-input-manager.js\nvar XrInputManager = pc.createScript('xrInputManager');\n\nXrInputManager.attributes.add('controllerTemplate', {\n    type: 'entity'\n});\n\nXrInputManager.attributes.add('cameraParent', {\n    type: 'entity'\n});\n\nXrInputManager.prototype.initialize = function() {\n\n    this.app.xr.input.on('add', this.onAdd, this);\n};\n\nXrInputManager.prototype.onAdd = function(source) {\n    var entity = this.controllerTemplate.clone();\n    entity.script.controller.setInputSource(source);\n    entity.reparent(this.cameraParent);\n    entity.enabled = true;\n};\n\n\n\n","// controller.js\nvar Controller = pc.createScript('controller');\n\nController.prototype.initialize = function() { \n    this.vecA = new pc.Vec3();\n    this.vecB = new pc.Vec3();\n    this.matA = new pc.Mat4();\n    this.quat = new pc.Quat();\n    this.color = new pc.Color(1, 1, 1);\n    this.isAction = false;\n    this.selectedEntity = null;\n};\n\nController.prototype.setInputSource = function(inputSource) {\n    this.inputSource = inputSource;\n    this.inputSource.once('remove', this.onRemove, this);\n};\n\nController.prototype.onRemove = function() {\n    this.entity.destroy();\n};\n\nController.prototype.update = function(dt) {\n    // render ray line\n    this.vecA.copy(this.inputSource.getOrigin());\n    this.vecB.copy(this.inputSource.getDirection());\n    this.vecB.scale(1000).add(this.vecA);\n\n    if (this.inputSource.selecting) {\n        this.color.set(0, 1, 0);\n        this.isAction = true;\n    } else { \n        this.color.set(1, 1, 1);\n        \n        if(this.isAction && this.selectedEntity) {\n            \n            this.app.fire('interactMgr:hoveroff', this.selectedEntity);\n            this.app.fire('interactMgr:activate', this.selectedEntity);\n            this.selectedEntity = null;\n            this.isAction = false;\n            return;\n        }\n        \n        this.isAction = false;\n    }\n\n    this.app.renderLine(this.vecA, this.vecB, this.color);\n    this.onMove(this.vecA, this.vecB);\n  \n    // grip\n    if (this.inputSource.grip) {\n        this.entity.model.enabled = true;\n        this.entity.setPosition(this.inputSource.getPosition());\n        this.entity.setRotation(this.inputSource.getRotation());\n    } else {\n        this.entity.model.enabled = false;\n        this.entity.setLocalPosition(0, 0, 0);\n        \n        this.vecA.set(0, 0, 0);\n        this.vecB.set(0, 1, 0);\n        this.matA.setLookAt(this.vecA, this.inputSource.getDirection(), this.vecB);\n        this.quat.setFromMat4(this.matA);\n        this.entity.setRotation(this.quat);\n    }\n};\n\nController.prototype.onMove = function (from, to) {\n    var app = this.app;\n    var self = this;\n    \n    var rayResult = app.systems.rigidbody.raycastFirst(from, to);\n    if(rayResult) {\n  \n        var pickedEntity = rayResult.entity;\n        //console.log('PickedEntity: ' + pickedEntity.name);\n\n        if(pickedEntity !== self.selectedEntity) {\n            \n            //restore the materials on previouly selected item\n            app.fire('interactMgr:hoveroff', self.selectedEntity);\n\n            //change selected item materials\n            app.fire('interactMgr:hoveron', pickedEntity);\n\n            //new selected items\n            self.selectedEntity = pickedEntity;\n        }\n    }\n    else {\n\n        if(self.selectedEntity) {\n        \n            //restore the materials on previouly selected item\n            app.fire('interactMgr:hoveroff', self.selectedEntity);\n\n            //no selection\n            self.selectedEntity = null;\n        }\n    }\n};\n\n","// circle.js\nvar Circle = pc.createScript('circle');\n\nCircle.attributes.add('InnerRadius', { type: 'number', default: 0.05 });\nCircle.attributes.add('OuterRadius', { type: 'number', default: 0.45 });\nCircle.attributes.add('Thickness', { type: 'number', default: 0.025 });\nCircle.attributes.add('Speed', { type: 'number', default: 0.001 });\nCircle.attributes.add('Animated', { type: 'boolean', default: true });\n\n// initialize code called once per entity\nCircle.prototype.initialize = function() {\n    \n    this.UpdateMaterial(this.entity.model.material);\n    this.entity.model.meshInstances[0].setParameter('circle_radius', this.OuterRadius);\n    this.entity.model.meshInstances[0].setParameter('circle_thickness', this.Thickness);\n};\n\nCircle.prototype.GetRandomInt = function(min, max) {\n\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min;\n};\n\nCircle.prototype.UpdateMaterial = function(material) {\n\n    // Replace this chunk:\n    // https://github.com/playcanvas/engine/blob/master/src/graphics/program-lib/chunks/diffuse.frag\n    material.chunks.emissivePS = [\n        \"#ifdef MAPCOLOR\",\n        \"uniform vec3 material_emissive;\",\n        \"#endif\",\n        \"\",\n        \"#ifdef MAPFLOAT\",\n        \"uniform float material_emissiveIntensity;\",\n        \"#endif\",\n        \"\",\n        \"#ifdef MAPTEXTURE\",\n        \"uniform sampler2D texture_emissiveMap;\",\n        \"uniform float circle_radius;\",\n        \"uniform float circle_thickness;\",\n        \"#endif\",\n        \"\",\n        \"vec3 getEmission() {\",\n        \"    vec3 emission = vec3(1.0);\",\n        \"\",\n        \"    #ifdef MAPFLOAT\",\n        \"        emission *= material_emissiveIntensity;\",\n        \"    #endif\",\n        \"\",\n        \"    #ifdef MAPCOLOR\",\n        \"        emission *= material_emissive;\",\n        \"    #endif\",\n        \"\",\n        \"    #ifdef MAPTEXTURE\",\n        \"        emission *= $texture2DSAMPLE(texture_emissiveMap, $UV).$CH;\",\n        \"        vec2 uv = $UV.xy - vec2(0.5);\",\n        \"        if ((length(uv) < circle_radius - circle_thickness * 0.5) || (length(uv) > circle_radius + circle_thickness * 0.5))\",\n        \"        {\",\n        \"            discard;\",\n        \"        }\",\n        \"        else if (length(uv) > circle_radius + circle_thickness * 0.5)\",\n        \"        {\",\n        \"            emission *= 0.25;\",\n        \"        }\",\n        \"    #endif\",\n        \"\",\n        \"    #ifdef MAPVERTEX\",\n        \"        emission *= gammaCorrectInput(saturate(vVertexColor.$VC));\",\n        \"    #endif\",\n        \"\",\n        \"    return emission;\",\n        \"}\"\n    ].join('\\n');\n    material.update();\n};\n\n// update code called every frame\nCircle.prototype.update = function(dt) {\n    \n    if(!this.Animated)\n        return;\n    \n    // Update the radius of the cirle every frame based on a sine wave\n    var s = (Math.sin(Date.now() * this.Speed) + 1) * 0.5;\n    \n    var r = pc.math.lerp(this.InnerRadius, this.OuterRadius, s);\n    this.entity.model.meshInstances[0].setParameter('circle_radius', r);\n    this.entity.model.meshInstances[0].setParameter('circle_thickness', this.Thickness);\n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// Circle.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// http://developer.playcanvas.com/en/user-manual/scripting/\n\n","// events.js\nvar ColorEvent = pc.createScript('colorEvent');\n\nColorEvent.attributes.add('eventName', { type: 'string', title: 'Event Name' });\nColorEvent.attributes.add('color', { type: 'rgba', title: 'Color' });\n\nColorEvent.prototype.initialize = function() {\n    this.entity.button.on('click', function () {\n        this.app.fire(this.eventName, this.color);\n    }, this);\n};\n\nvar NumberEvent = pc.createScript('numberEvent');\n\nNumberEvent.attributes.add('eventName', { type: 'string', title: 'Event Name' });\nNumberEvent.attributes.add('number', { type: 'number', title: 'Number' });\n\nNumberEvent.prototype.initialize = function() {\n    this.entity.button.on('click', function () {\n        this.app.fire(this.eventName, this.number);\n    }, this);\n};\n\nvar Event = pc.createScript('event');\n\nEvent.attributes.add('eventName', { type: 'string', title: 'Event Name' });\n\nEvent.prototype.initialize = function() {\n    this.entity.button.on('click', function () {\n        this.app.fire(this.eventName);\n    }, this);\n};\n\n\n","// media-player.js\nvar MediaPlayer = pc.createScript('mediaPlayer');\n\nMediaPlayer.attributes.add('screenMaterial', { type: 'asset', assetType: 'material', title: 'Material' });\nMediaPlayer.attributes.add('url', { type: 'string', title: 'Url' });\nMediaPlayer.attributes.add('videoToPlay', {\n    title: 'Video',\n    description: 'MP4 video asset to play back on this video texture.',\n    type: 'asset'\n});\nMediaPlayer.attributes.add('playButton', { type: 'entity' });\nMediaPlayer.attributes.add('stopButton', { type: 'entity' });\nMediaPlayer.attributes.add('ignoreEvents', { type: 'boolean', default: false });\nMediaPlayer.attributes.add('autoPlay', { type: 'boolean', default: false });\n\nMediaPlayer.prototype.createTexture = function () {\n    var app = this.app;\n    var i, texture, material;\n\n    texture = new pc.Texture(app.graphicsDevice, {\n        format: pc.PIXELFORMAT_R8_G8_B8,\n        autoMipmap: false\n    });\n    texture.minFilter = pc.FILTER_LINEAR;\n    texture.magFilter = pc.FILTER_LINEAR;\n    texture.addressU = pc.ADDRESS_CLAMP_TO_EDGE;\n    texture.addressV = pc.ADDRESS_CLAMP_TO_EDGE;\n\n    if(this.screenMaterial) {\n        material = this.screenMaterial.resource;\n        material.emissiveMap = texture;\n        material.update();\n    }\n    \n    return texture;\n};\n\nMediaPlayer.prototype.initVideo = function (url) {\n    this.video.src = url;\n    this.play(false, false);\n};\n\nMediaPlayer.prototype.stopVideo = function () {\n    this.stop(false);\n};\n\nMediaPlayer.prototype.initialize = function () {\n    var app = this.app;\n    var self = this;\n    \n    this.isVideo = false;\n    this.updateEvery = 2;\n    this.playing = false;\n    this.frameCount = 0;\n\n    var texture = this.createTexture();\n    var video = document.createElement('video');\n    var image = new Image();\n    \n    // muted attribute is required for videos to autoplay\n    video.muted = true;\n    \n    // critical for iOS or the video won't initially play, and will go fullscreen when playing\n    video.playsInline = true;\n    this.isFromUrl = true;\n    \n    var ext = '';\n    if(this.url) {\n        ext = this.url.split('.').pop();\n    }\n    else if(this.videoToPlay) {\n        ext = this.videoToPlay.getFileUrl().split('.').pop();\n        ext = ext.split('?').shift();\n        this.isFromUrl = false;\n    }\n    \n    if (ext === \"mp4\" || this.isFromUrl) {\n        video.addEventListener('canplay', function (e) {\n            texture.setSource(video);\n        });\n        video.src = this.isFromUrl ? this.url : this.videoToPlay.getFileUrl();\n        video.crossOrigin = 'anonymous';\n        video.loop = true;\n        video.preload = true;\n\n        this.isVideo = true;\n    } else {\n        image.addEventListener('load', function (e) {\n            texture.setSource(image);\n        });\n        image.crossOrigin = 'anonymous';\n        image.src = this.url;\n\n        this.isVideo = false;\n    }\n    \n    this.texture = texture;\n    this.image = image;\n    this.video = video;\n    \n    app.on('media-player:playBtnClick', function (fromBtnClick, muted) {\n        if(!this.ignoreEvents)\n            this.play(fromBtnClick, muted);\n    }, this);\n    \n    app.on('media-player:stopBtnClick', function (fromBtnClick) {\n        if(!this.ignoreEvents)\n            this.stop(fromBtnClick);\n    }, this);\n    \n    app.on('media-player:muteVideo', function (fromBtnClick) {\n        if(!this.ignoreEvents)\n            this.mute(fromBtnClick);\n    }, this);\n    \n    if(this.autoPlay)\n        this.play(false, true);\n    \n    app.fire('pulse:start');\n};\n\n// Video API\nMediaPlayer.prototype.isPlaying = function () {\n    return this.isVideo && this.playing;\n};\n\nMediaPlayer.prototype.PlayButtonEnabled = function (val) {\n    if(this.playButton)\n        this.playButton.enabled = val;\n};\n\nMediaPlayer.prototype.StopButtonEnabled = function (val) {\n    if(this.stopButton)\n        this.stopButton.enabled = val;\n};\n\nMediaPlayer.prototype.play = function (fromBtnClick, muted) {\n    var app = this.app;\n    var self = this;\n    \n    if (this.isVideo) {\n        \n        if (!this.playing) {\n            console.log('play video');\n\n            if(!muted) {\n                this.PlayButtonEnabled(false);\n                this.StopButtonEnabled(true);\n            }\n            \n            if(fromBtnClick) {\n                if(!(pc.platform.mobile && !app.xr.active)) {\n                    if(this.stopButton) {\n                        this.stopButton.model.material.emissive = this.stopButton.script.hoverChangeColor.hoverColor;\n                        this.stopButton.model.material.update();\n                    }\n                }\n            }\n            \n            setTimeout(function () {\n                self.playing = true;\n                self.video.muted = muted;\n                self.video.play();\n                app.fire('pulse:start');\n                if(!muted)\n                    app.fire('music:fadeOut', 'Music');\n\n            }, 250);\n        } else  {\n            console.log('restart video');\n            \n            this.PlayButtonEnabled(false);\n            this.StopButtonEnabled(true);\n            \n            if(fromBtnClick) {\n                if(!(pc.platform.mobile && !app.xr.active)) {\n                    if(this.stopButton) {\n                        this.stopButton.model.material.emissive = this.stopButton.script.hoverChangeColor.hoverColor;\n                        this.stopButton.model.material.update();\n                    }\n                }\n            }\n                \n            setTimeout(function () {\n                self.playing = true;\n                self.video.muted = false;\n                self.video.load();\n                self.video.play();\n                app.fire('pulse:start');\n                app.fire('music:fadeOut', 'Music');\n\n            }, 250);\n        }\n    }\n};\n\nMediaPlayer.prototype.stop = function (fromBtnClick) {\n    var app = this.app;\n    var self = this;\n    \n    if (this.isVideo && this.playing) {\n        console.log('stop video');\n        \n        this.StopButtonEnabled(false);\n        this.PlayButtonEnabled(true);\n        \n        if(fromBtnClick) {\n            if(!(pc.platform.mobile && !app.xr.active)) {\n                if(this.playButton) {\n                    this.playButton.model.material.emissive = this.playButton.script.hoverChangeColor.hoverColor;\n                    this.playButton.model.material.update();\n                }\n            }\n        }\n        \n        setTimeout(function () {\n            self.playing = false;\n            self.video.muted = true;\n            self.video.load();\n            app.fire('pulse:start');\n            app.fire('music:fadeIn', 'Music');\n            \n        }, 250);\n    }\n};\n\nMediaPlayer.prototype.mute = function (fromBtnClick) {\n    var app = this.app;\n    var self = this;\n    \n    if(!this.video.muted) {\n        \n        if(fromBtnClick) {\n            if(!(pc.platform.mobile && !app.xr.active)) {\n                if(this.playButton) {\n                    this.playButton.model.material.emissive = this.playButton.script.hoverChangeColor.hoverColor;\n                    this.playButton.model.material.update();\n                }\n            }\n        }\n        \n        this.StopButtonEnabled(false);\n        this.PlayButtonEnabled(true);\n        \n        setTimeout(function () {\n            self.video.muted = true;\n            app.fire('pulse:start');\n            app.fire('music:fadeIn', 'Music');\n            \n        }, 250);\n    }\n};\n\nMediaPlayer.prototype.update = function (dt) {\n    if (this.playing) {\n        if (this.frameCount++ % this.updateEvery === 0)\n            this.texture.upload();\n    }\n};\n\n","// FadeObject.js\nvar FadingObjectIn = pc.createScript('FadeObjectIn');\n\nFadingObjectIn.attributes.add(\"duration\", {type: \"number\", default: 2, title: \"Duration (Secs)\"});\nFadingObjectIn.attributes.add('startingEvent', {\n    title: 'Event',\n    type: 'string'\n});\n\n// initialize code called once per entity\nFadingObjectIn.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    this.app.on(this.startingEvent, function () {\n        this.fadeIn();\n    }, this);\n};\n\nFadingObjectIn.prototype.fadeIn = function () {\n\n    var self = this;\n    \n    if(!this.isRunning)\n    {\n        this.isRunning = true;\n        \n        var data = {\n            alpha: 0\n        };\n        \n        var meshInstances = this.entity.model.meshInstances;   \n        var tween = this.entity.tween(data).to({alpha: 1}, this.duration, pc.SineInOut);\n        \n        tween.on('update', function () {\n             \n            for(var i = 0; i < meshInstances.length; ++i) {\n                // WARNING: setParameter() is still a beta feature and may change in the future      \n                // This is where we set how transparent we want the object to be on a value between 0 and 1\n                // 0 = fully transparent\n                // 1 = fully opaque\n\n                // Note: The materials on the model MUST have alpha set on opacity -> blend type \n                // See the material 'proto_orange' as an example\n                meshInstances[i].setParameter(\"material_opacity\", data.alpha);\n            }\n        }).on('complete', function () {\n            self.isRunning = false;\n        });\n  \n        tween.start();\n    }\n    \n};\n\nvar FadingObjectOut = pc.createScript('FadeObjectOut');\n\nFadingObjectOut.attributes.add(\"duration\", {type: \"number\", default: 2, title: \"Duration (Secs)\"});\nFadingObjectOut.attributes.add('startingEvent', {\n    title: 'Event',\n    type: 'string'\n});\n\n// initialize code called once per entity\nFadingObjectOut.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    this.app.on(this.startingEvent, function () {\n        this.fadeOut();\n    }, this);\n};\n\nFadingObjectOut.prototype.fadeOut = function () {\n\n    var self = this;\n    \n    if(!this.isRunning)\n    {\n        this.isRunning = true;\n        \n        var data = {\n            alpha: 1\n        };\n        \n        var meshInstances = this.entity.model.meshInstances;   \n        var tween = this.entity.tween(data).to({alpha: 0}, this.duration, pc.SineInOut);\n        \n        tween.on('update', function () {\n             \n            for(var i = 0; i < meshInstances.length; ++i) {\n                // WARNING: setParameter() is still a beta feature and may change in the future      \n                // This is where we set how transparent we want the object to be on a value between 0 and 1\n                // 0 = fully transparent\n                // 1 = fully opaque\n\n                // Note: The materials on the model MUST have alpha set on opacity -> blend type \n                // See the material 'proto_orange' as an example\n                meshInstances[i].setParameter(\"material_opacity\", data.alpha);\n            }\n        }).on('complete', function () {\n            self.isRunning = false;\n        });\n  \n        tween.start();\n    }\n    \n};\n\n","// audio-curve.js\nvar AudioCurve = pc.createScript('audioCurve');\n\nAudioCurve.attributes.add(\"volumeCurve\", {type: \"curve\", title: \"Volume Curve\"});\nAudioCurve.attributes.add('sound', { type: 'string' });\n\n// initialize code called once per entity\nAudioCurve.prototype.initialize = function() {\n    // Get a reference to a soundslot\n    this.slot = this.entity.sound.slot(this.sound);    \n    var assetId = this.slot.asset;\n    \n    // Find the duration of the audio sample directly from the asset resource\n    this.duration = this.app.assets.get(assetId).resource.duration;\n};\n\n// update code called every frame\nAudioCurve.prototype.update = function(dt) {\n    for (var i = 0; i < this.slot.instances.length; ++i) {\n        var instance = this.slot.instances[i];\n        \n        // Change the volume of the audio based on the value of the curve at \n        // the current play time of the audio\n        instance.volume = this.volumeCurve.value(instance.currentTime / this.duration);\n    }  \n};\n\n","// FadeSounds.js\nvar FadingSoundIn = pc.createScript('FadeSoundIn');\n\nFadingSoundIn.attributes.add(\"duration\", {type: \"number\", default: 2, title: \"Duration (Secs)\"});\nFadingSoundIn.attributes.add('startingEvent', {\n    title: 'Event',\n    type: 'string'\n});\n\n// initialize code called once per entity\nFadingSoundIn.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    this.app.on(this.startingEvent, function (soundName) {\n        var slot = this.entity.sound.slot(soundName); \n        this.currentVolume = slot.volume;\n        this.fadeIn(soundName);\n    }, this);\n};\n\nFadingSoundIn.prototype.fadeIn = function (soundName) {\n\n    var self = this;\n    \n    // Get a reference to a soundslot\n    var slot = this.entity.sound.slot(soundName);  \n    \n    if(!this.isRunning && slot && slot.instances[0] && slot.instances[0].volume === 0)\n    {\n        this.isRunning = true;\n        \n        var data = {\n            volume: 0\n        };\n        \n        var tween = this.entity.tween(data).to({volume: this.currentVolume}, this.duration, pc.SineInOut);\n        \n        tween.on('update', function () {\n             \n            for (var i = 0; i < slot.instances.length; ++i) {\n                var instance = slot.instances[i];\n\n                // Change the volume of the audio based on the value of the curve at \n                // the current play time of the audio\n                instance.volume = data.volume;\n            }  \n        }).on('complete', function () {\n            self.isRunning = false;\n        });\n  \n        tween.start();\n    }\n    \n};\n\nvar FadingSoundOut = pc.createScript('FadeSoundOut');\n\nFadingSoundOut.attributes.add(\"duration\", {type: \"number\", default: 2, title: \"Duration (Secs)\"});\nFadingSoundOut.attributes.add('startingEvent', {\n    title: 'Event',\n    type: 'string'\n});\n\n// initialize code called once per entity\nFadingSoundOut.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    \n    this.app.on(this.startingEvent, function (soundName) {\n        var slot = this.entity.sound.slot(soundName); \n        this.currentVolume = slot.volume;\n        this.fadeOut(soundName);\n    }, this);\n};\n\nFadingSoundOut.prototype.fadeOut = function (soundName) {\n\n    var self = this;\n    \n    // Get a reference to a soundslot\n    var slot = this.entity.sound.slot(soundName);  \n    \n    if(!this.isRunning && slot && slot.instances[0] && slot.instances[0].volume !== 0)\n    {\n        this.isRunning = true;\n        \n        var data = {\n            volume: this.currentVolume\n        };\n        \n        var tween = this.entity.tween(data).to({volume: 0}, this.duration, pc.SineInOut);\n        \n        tween.on('update', function () {\n             \n            for (var i = 0; i < slot.instances.length; ++i) {\n                var instance = slot.instances[i];\n\n                // Change the volume of the audio based on the value of the curve at \n                // the current play time of the audio\n                instance.volume = data.volume;\n            }  \n        }).on('complete', function () {\n            self.isRunning = false;\n        });\n  \n        tween.start();\n    }\n    \n};\n\n","// interactionManager.js\nvar InteractionManager = pc.createScript('interactionManager');\n\n/*InteractionManager.attributes.add(\"selectionMaterial\", {\n    type: \"asset\", \n    assetType: \"material\"\n});*/\n\n// initialize code called once per entity\nInteractionManager.prototype.initialize = function() {\n    var app = this.app;\n    \n    //this.previousMaterials = [];\n    \n    app.on('interactMgr:hoveroff', function (selectedEntity) {\n        \n        if(!selectedEntity)\n            return;\n        \n        if(selectedEntity.tags.has('interactable'))\n            this.hoverOff(selectedEntity);\n        else if(selectedEntity.tags.has('UI'))\n            this.hoverOff(selectedEntity);\n        else if(selectedEntity.tags.has('bottle')) {\n            app.fire('lookCamera:focusModeOff');\n        }\n    }, this);\n    \n    app.on('interactMgr:hoveron', function (selectedEntity) {\n        \n        if(!selectedEntity)\n            return;\n        \n        if(selectedEntity.tags.has('interactable'))\n            this.hoverOn(selectedEntity);\n        else if(selectedEntity.tags.has('UI'))\n            this.hoverOn(selectedEntity);\n        else if(selectedEntity.tags.has('bottle')) {\n            app.fire('lookCamera:focusModeOn');\n        }\n    }, this);\n    \n    app.on('interactMgr:activate', function (selectedEntity) {\n        \n        if(!selectedEntity)\n            return;\n        \n        if(selectedEntity.tags.has('clickable')) {\n            //console.log('clicked!');\n            app.fire('game:activate', selectedEntity);\n        }\n        else if(selectedEntity.tags.has('UI_PlayBtn')) {\n            app.fire('infoboard:close');\n            app.fire('media-player:playBtnClick', true, false);\n        }\n        else if(selectedEntity.tags.has('UI_StopBtn')) {\n            app.fire('media-player:stopBtnClick', true);\n        }\n        else if(selectedEntity.tags.has('UI_MuteBtn')) {\n            app.fire('media-player:muteVideo', true);\n        }\n        else if(selectedEntity.tags.has('UI_ShowBottleBtn')) {\n            app.fire('bottlemgr:showBtnClick', true);\n        }\n        else if(selectedEntity.tags.has('UI_HideBottleBtn')) {\n            app.fire('bottlemgr:hideBtnClick', true);\n        }\n        else if(selectedEntity.tags.has('UI_LeftBtn')) {\n            app.fire('lookCamera:rotateleft');\n        }\n        else if(selectedEntity.tags.has('UI_RightBtn')) {\n            app.fire('lookCamera:rotateright');\n        }\n    }, this);\n};\n\n        \nInteractionManager.prototype.hoverOn = function(selectedEntity) \n{\n    selectedEntity.script.hoverChangeColor.hoverOn();\n};\n\nInteractionManager.prototype.hoverOff = function(selectedEntity) \n{\n    selectedEntity.script.hoverChangeColor.hoverOff();\n};\n\n/*InteractionManager.prototype.changeMaterials = function(entity) \n{\n    // Assign the material to all the mesh instances in the model\n    var meshInstances = entity.model.meshInstances;\n    for (var i = 0; i < meshInstances.length; ++i) { \n        var mesh = meshInstances[i];\n        this.previousMaterials.push(mesh.material);\n        mesh.material = this.selectionMaterial.resource;\n        \n        var script = entity.script.circle;\n        if(script)\n            script.UpdateMaterial(mesh.material);\n    }\n};\n\nInteractionManager.prototype.restoreMaterials = function(entity) \n{\n    // Assign the material to all the mesh instances in the model\n    var meshInstances = entity.model.meshInstances;\n    for (var i = meshInstances.length-1; i >= 0; --i) { \n        var mesh = meshInstances[i];\n        \n        var mat = this.previousMaterials.pop();\n        mesh.material = mat;\n         \n        var script = entity.script.circle;\n        if(script)\n            script.UpdateMaterial(mesh.material);\n    }\n};*/\n\n","// sphereIn.js\nvar SphereIn = pc.createScript('sphereIn');\n\nSphereIn.attributes.add('event', { type:'string' });\nSphereIn.attributes.add('duration', { type:'number', default: 1 });\nSphereIn.attributes.add('distance', { type:'number', default: 10 });\n\n// initialize code called once per entity\nSphereIn.prototype.initialize = function() {\n    this.isRunning = false;\n\n    this.app.on(this.event, function (direction) {\n        this.animate(direction);\n    }, this);\n};\n\nSphereIn.prototype.animate = function (direction) {\n\n    var self = this;\n    \n    if(!this.isRunning)\n    {\n        this.isRunning = true;\n\n        this.finalDest = new pc.Vec3();\n        this.finalDest.x = this.entity.getLocalPosition().x+(direction.x*this.distance);\n        this.finalDest.y = this.entity.getLocalPosition().y+(direction.y*this.distance);\n        this.finalDest.z = this.entity.getLocalPosition().z+(direction.z*this.distance);\n        \n        var tween = this.entity.tween(this.entity.getLocalPosition()).to(this.finalDest, this.duration, pc.SineIn);\n\n        /*tween.on('update', function () {\n            console.log('SphereIn update ' + self.entity.getLocalPosition());\n        });*/\n\n        tween.on('complete', function () {\n            //self.entity.setLocalPosition(0, 0, 0);\n            //console.log('SphereIn final ' + this.entity.getLocalPosition());\n            self.isRunning = false;\n        }); \n\n        tween.start();\n    } \n};\n\n","// sphereOut.js\nvar SphereOut = pc.createScript('sphereOut');\n\nSphereOut.attributes.add('event', { type:'string' });\nSphereOut.attributes.add('duration', { type:'number', default: 1 });\nSphereOut.attributes.add('distance', { type:'number', default: 10 });\n\n// initialize code called once per entity\nSphereOut.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    this.app.on(this.event, function (direction) {\n        this.animate(direction);\n    }, this);\n};\n\nSphereOut.prototype.animate = function (direction) {\n\n    var self = this;\n    \n    if(!this.isRunning)\n    {\n\n        \n        this.isRunning = true;\n        var currentPos = this.entity.getLocalPosition().clone();\n        this.entity.setLocalPosition(currentPos.x + direction.x*self.distance, currentPos.y + direction.y*self.distance, currentPos.z + direction.z*self.distance);\n        \n        /*console.log('SphereOut from ' + this.entity.getLocalPosition());\n        console.log('SphereOut to' + currentPos);*/\n        \n        var tween = this.entity\n        .tween(this.entity.getLocalPosition())\n        .to({x: currentPos.x, y: currentPos.y, z: currentPos.z}, \n            this.duration, pc.SineOut);\n        \n        /*tween.on('update', function () {\n            console.log('SphereOut ' + this.entity.getLocalPosition());\n        });*/\n        \n        tween.on('complete', function () {\n            self.isRunning = false;\n            //self.entity.setLocalPosition(0, 0, 0);\n            //console.log('SphereOut final' + this.entity.getLocalPosition());\n        }); \n       \n        tween.start();\n    }\n    \n};\n\n","// bottleManager.js\nvar BottleManager = pc.createScript('bottleManager');\n\nBottleManager.attributes.add('playButton', { type: 'entity' });\nBottleManager.attributes.add('stopButton', { type: 'entity' });\nBottleManager.attributes.add('cameraEntity', {type: 'entity' });\nBottleManager.attributes.add('bottleItem', {type: 'entity' });\nBottleManager.attributes.add('distanceRatio', { type:'number', default: 0.75 });\nBottleManager.attributes.add('leftButton', { type: 'entity' });\nBottleManager.attributes.add('rightButton', { type: 'entity' });\nBottleManager.attributes.add('tuto', {type: 'entity' });\nBottleManager.attributes.add('timeTutoIsShown', { type:'number', default: 3000 });\n\n// initialize code called once per entity\nBottleManager.prototype.initialize = function() {\n    \n    var app = this.app;\n    \n    this.tutoAlreadyShown = false;\n    this.bottleStartingPos = this.bottleItem.getLocalPosition().clone();\n    \n    app.on('bottlemgr:showBtnClick', function (fromBtnClick) {\n        this.showBottle(fromBtnClick);\n    }, this);\n    \n    app.on('bottlemgr:hideBtnClick', function (fromBtnClick) {\n        this.hideBottle(fromBtnClick);\n    }, this);\n    \n    app.xr.on('start', function() {\n        this.leftButton.enabled = true;\n        this.rightButton.enabled = true;\n    }, this);\n    \n    app.xr.on('end', function() {\n        this.leftButton.enabled = false;\n        this.rightButton.enabled = false;\n    }, this);\n    \n    app.fire('pulse:start');\n};\n\nBottleManager.prototype.showBottle = function (fromBtnClick) {\n    var app = this.app;\n    var self = this;\n     \n    this.bottleItem.enabled = true;\n    this.ShowBottleButtonEnabled(false);\n    this.HideBottleButtonEnabled(true);\n    \n    if(!this.tutoAlreadyShown && !app.xr.active) {\n        this.tuto.enabled = true;\n        this.tutoAlreadyShown = true;\n        \n        setTimeout(function () {\n            app.fire('tuto2:fadeout');\n        }, this.timeTutoIsShown);\n    }\n    \n    if(fromBtnClick) {\n        if(!(pc.platform.mobile && !app.xr.active)) {\n            this.stopButton.model.material.emissive = this.stopButton.script.hoverChangeColor.hoverColor;\n            this.stopButton.model.material.update();\n        }\n    }\n\n    if(app.xr.active) {\n        this.stopButton.model.material.emissive = this.stopButton.script.hoverChangeColor.hoverColor;\n        this.stopButton.model.material.update();\n    }\n    \n    app.fire('pulse:start');\n    \n    var camPos = this.cameraEntity.getPosition();\n    \n    var direction = new pc.Vec3();\n    direction.sub2(this.cameraEntity.getPosition(), this.bottleStartingPos);\n    var dist = direction.length();\n    direction.normalize();\n    \n    dist *= this.distanceRatio;\n    \n    var destination = new pc.Vec3();\n    direction.x *= dist;\n    direction.y *= dist;\n    direction.z *= dist;\n    destination.add2(this.bottleStartingPos, direction);\n    destination.y += 0.1;\n    destination.x -= 0.05;\n    \n    app.fire('bottlein:animate', destination);\n};\n\nBottleManager.prototype.hideBottle = function (fromBtnClick) {\n    var app = this.app;\n    var self = this;\n   \n    this.HideBottleButtonEnabled(false);\n    this.ShowBottleButtonEnabled(true);      \n    \n    if(fromBtnClick) {\n        if(!(pc.platform.mobile && !app.xr.active)) {\n            this.playButton.model.material.emissive = this.playButton.script.hoverChangeColor.hoverColor;\n            this.playButton.model.material.update();\n        }\n    }\n\n    app.fire('pulse:start');\n    \n    app.fire('bottleout:animate', this.bottleStartingPos);\n    \n    setTimeout(function () {\n        self.bottleItem.enabled = false;\n    }, 500);\n};\n\nBottleManager.prototype.ShowBottleButtonEnabled = function (val) {\n    this.playButton.enabled = val;\n};\n\nBottleManager.prototype.HideBottleButtonEnabled = function (val) {\n    this.stopButton.enabled = val;\n};\n\n","// bottleIn.js\nvar BottleIn = pc.createScript('bottleIn');\n\nBottleIn.attributes.add('event', { type:'string' });\nBottleIn.attributes.add('duration', { type:'number', default: 1 });\n\n// initialize code called once per entity\nBottleIn.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    this.app.on(this.event, function (destination) {\n        this.animate(destination);\n    }, this);\n};\n\nBottleIn.prototype.animate = function (destination) {\n\n    var self = this;\n    \n    if(!this.isRunning)\n    {\n        this.isRunning = true;\n        \n        var currentPos = this.entity.getLocalPosition().clone();\n        var tween = this.entity\n        .tween(this.entity.getLocalPosition())\n        .to(destination, this.duration, pc.SineIn);\n        \n        /*tween.on('update', function () {\n            console.log('BottleIn ' + this.entity.getLocalPosition());\n        });*/\n        \n        tween.on('complete', function () {\n            self.isRunning = false;\n        }); \n       \n        tween.start();\n    }\n    \n};\n\n","// bottleOut.js\nvar BottleOut = pc.createScript('bottleOut');\n\nBottleOut.attributes.add('event', { type:'string' });\nBottleOut.attributes.add('duration', { type:'number', default: 1 });\n\n// initialize code called once per entity\nBottleOut.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    this.app.on(this.event, function (destination) {\n        this.animate(destination);\n    }, this);\n};\n\nBottleOut.prototype.animate = function (destination) {\n\n    var self = this;\n    \n    if(!this.isRunning)\n    {\n        this.isRunning = true;\n        \n        var currentPos = this.entity.getLocalPosition().clone();\n        var tween = this.entity\n        .tween(this.entity.getLocalPosition())\n        .to(destination, this.duration, pc.SineIn);\n        \n        tween.on('complete', function () {\n            self.isRunning = false;\n        }); \n       \n        tween.start();\n    }\n    \n};\n\n","// splash.js\n\n/*jshint multistr: true*/\npc.script.createLoadingScreen(function (app) {\n    var showSplash = function () {\n        //prevent zooming on desktop\n        window.addEventListener('wheel', e=>{\n            e.preventDefault();\n        }, {passive: false});\n        \n        var wrapper = document.createElement('div');\n        wrapper.id = 'splash__wrapper';\n        wrapper.innerHTML = '\\\n        <div class=\"splash__inner\">\\\n            <div class=\"splash__inner2\">\\\n                <div class=\"splash__inner3\">\\\n                    <div class=\"splash__col-r\" id=\"myId\">\\\n                        <img class=\"splash__img-diesel\" src=\"https://d148xrjotn7dtb.cloudfront.net/titleSplash.png\" alt=\"\" />\\\n                        <div class=\"splash__progress-bar-container\">\\\n                            <div class=\"splash__progress-bar\" id=\"splash__progress-bar\">\\\n                            </div>\\\n                        </div>\\\n                        <img class=\"splash__img-text\" src=\"https://d148xrjotn7dtb.cloudfront.net/texteSplash.png\" alt=\"\" />\\\n                    </div>\\\n                </div>\\\n            </div>\\\n        </div>';\n        \n        document.body.appendChild(wrapper);\n    };\n\n    //<button type=\"button\">Click Me!</button>>\\\n    var hideSplash = function () {\n        var splash = document.getElementById('splash__wrapper');\n        splash.parentElement.removeChild(splash);\n    };\n    \n    var showButton = function () {\n        var item = document.getElementById('myId');\n        var button = document.createElement(\"BUTTON\");\n        \n        button.id = 'myButton';\n        button.innerHTML = \"Enter\";\n        button.style.width = '80%';\n        button.style.height = '5vh';\n        button.style.background = 'white';\n        button.style.color = 'black';\n        button.style.fontSize = '16px';\n\n        item.appendChild(button);\n        console.log(item);\n        \n        button.onclick = function(event) {\n            hideSplash();\n        };\n    };\n\n    var setProgress = function (value) {\n        var bar = document.getElementById('splash__progress-bar');\n        if(bar) {\n            value = Math.min(1, Math.max(0, value));\n            bar.style.width = value * 100 + '%';\n        }\n    };\n\n    var createCss = function () {\n        \n        var fontUrl = 'https://d148xrjotn7dtb.cloudfront.net/Gotham-Bold.otf';\n        var index = fontUrl.lastIndexOf('/');\n        var index2 = fontUrl.lastIndexOf('.');\n        var fontName = fontUrl.substr(index+1, (index2 - index)-1);\n        console.log(fontName);\n        \n        var css = [\n            //prevent zooming on mobile\n            'html {',\n            '    -webkit-text-size-adjust: none;',\n            '    touch-action: pan-y;',\n            '}',\n            \n            'body {',\n            '    background-color: #283538;',\n            '}',\n\n            '#splash__wrapper {',\n            '    position: absolute;',\n            '    top: 0;',\n            '    left: 0;',\n            '    height: 100%;',\n            '    width: 100%;',\n            '    background-color: #000000;',\n            '    display: flex;',\n            '    align-items: center;',\n            '    text-align: center;',\n            '    justify-content: center;',\n            '}',\n\n            '#splash__wrapper img {',\n            '    max-width: 100%;',\n            '}',\n\n            '.splash__inner {',\n            '    width: 100%;',\n            '    max-width: 90vh;',\n            '    margin: 0 20px;',\n            '}',\n\n            '.splash__inner2 {',\n            '    padding-top: 65%;',\n            '    position: relative;',\n            '}',\n\n            '.splash__inner3 {',\n            '    position: absolute;',\n            '    top: 0;',\n            '    right: 0;',\n            '    bottom: 0;',\n            '    left: 0;',\n            '    display: flex;',\n            '    justify-content: center;',\n            '    align-items: center;',\n            '}',\n\n            '.splash__col-l {',\n            '    text-align: left;',\n            '}',\n\n            '.splash__col-r {',\n            '    margin-left: 6%;',\n            '    text-align: left;',\n            '}',\n\n            '.splash__progress-bar-container {',\n            '    margin: 0.5% 0 15px 6px;',\n            '    height: 7px;',\n            '    width: 100%;',\n            '    margin-left: 1vw;',\n            '    max-width: 240px;',\n            '    background-color: #1d292c;',\n            '}',\n\n            '.splash__progress-bar {',\n            '    width: 0%;',\n            '    height: 100%;',\n            '    background-color: #FFFFFF;',\n            '}',\n            \n            '@media (max-width: 900px) {',\n            '    .splash__progress-bar-container {',\n            '        margin: 0.5% 0 15px 4%;',\n            '        height: 5px;',\n            '        width: calc(100% - 7px);',\n            '    }',\n            '   .splash__inner {',\n            '   }',\n            '   .splash__img-text{',\n            '       margin-left: 2px;',\n            '   }',\n            '}',\n            \n            '#myButton {',\n            '    font-family: ' + fontName + ';',\n            '    font-weight: Bold;',\n            '    border-radius: 4px;',\n            '    margin-left: 15px;',\n            '}',\n            \n            '@media screen and (min-width: 320px) {',\n            '#myButton {',\n                'font-size: calc(16px + 6 * ((100vw - 320px) / 680));',\n            '}',\n            '}',\n           '@media screen and (min-width: 1000px) {',\n            '#myButton {',\n                'font-size: 22px;',\n           ' }',\n            \n            '@font-face {',\n            '    font-family: ' + fontName + ';',\n            '    src: url(' + fontUrl + ');',\n            '}'\n        ].join(\"\\n\");\n\n        var style = document.createElement('style');\n        style.type = 'text/css';\n        if (style.styleSheet) {\n          style.styleSheet.cssText = css;\n        } else {\n          style.appendChild(document.createTextNode(css));\n        }\n\n        document.head.appendChild(style);\n    };\n\n\n    createCss();\n\n    showSplash();\n        \n    app.on('preload:end', function () {\n        app.off('preload:progress');\n    });\n    \n    app.on(\"initialize\", function () {\n        app.fire('customload:start');\n    });\n    \n    app.on('customload:end', function () {\n        app.off('customload:progress');\n        showButton();\n    });\n    \n    app.on('preload:progress', setProgress);\n});\n\n","// billboard.js\nvar Billboard = pc.createScript('billboard');\n\nBillboard.attributes.add(\"camera\", { type: \"entity\", title: \"Camera\"});\n\n// initialize code called once per entity\nBillboard.prototype.initialize = function() {\n    \n};\n\n// update code called every frame\nBillboard.prototype.update = function(dt) {\n    this.entity.setEulerAngles(0, this.camera.getEulerAngles().y, 0);\n};\n\n","// screensMgr.js\nvar ScreensMgr = pc.createScript('screensMgr');\n\nScreensMgr.attributes.add('startingEvent', { type: 'string', title: 'Event Name' });\n\nScreensMgr.attributes.add('Tv', { type: 'entity' });\nScreensMgr.attributes.add('Pad', { type: 'entity' });\n\nScreensMgr.attributes.add('TvPos', { type: 'vec3', default: [0,0,0] });\nScreensMgr.attributes.add('TvRot', { type: 'vec3', default: [0,0,0] });\nScreensMgr.attributes.add('TvScale', { type: 'vec3', default: [1,1,1] });\n\nScreensMgr.attributes.add('PadPos', { type: 'vec3', default: [0,0,0] });\nScreensMgr.attributes.add('PadRot', { type: 'vec3', default: [0,0,0] });\nScreensMgr.attributes.add('PadScale', { type: 'vec3', default: [1,1,1] });\n\n// initialize code called once per entity\nScreensMgr.prototype.initialize = function() {\n\n    this.app.on(this.startingEvent, function () {\n        this.Tv.setPosition(this.TvPos);\n        this.Tv.setLocalEulerAngles (this.TvRot);\n        this.Tv.setLocalScale (this.TvScale);\n\n        this.Pad.setPosition(this.PadPos);\n        this.Pad.setLocalEulerAngles(this.PadRot);\n        this.Pad.setLocalScale(this.PadScale);\n    }, this);\n    \n};\n\n","// HoverChangeColor.js\nvar HoverChangeColor = pc.createScript('hoverChangeColor');\n\nHoverChangeColor.attributes.add(\"hoverColor\",{\n    type:\"rgb\",\n    default:[0,0,1]\n});\n\nHoverChangeColor.attributes.add('duration', { type:'number', default: 0.1 });\n\n// initialize code called once per entity\nHoverChangeColor.prototype.initialize = function() {\n    this.originalColor = this.entity.model.material.emissive.clone();\n    this.tweenHoverOnDone = true;\n    this.tweenHoverOffDone = true;\n};\n\nHoverChangeColor.prototype.hoverOn = function() \n{\n    var app = this.app;\n    var self = this;\n    \n    if(!this.tweenHoverOnDone)\n        return;\n    \n    //console.log('hoveron : ' + this.entity.name);\n    this.tweenHoverOnDone = true;\n    \n    var material = this.entity.model.material;\n    var color = this.originalColor.clone();\n\n    var currentTween = this.entity.tween(color).to(self.hoverColor, this.duration, pc.Linear);\n    \n    currentTween.on('update', function () {\n        material.emissive = color;\n        material.update();\n    });\n    \n    currentTween.on('complete', function () { \n        material.emissive = self.hoverColor;\n        material.update();\n        self.tweenHoverOnDone = true;\n    });\n    \n    currentTween.start();\n};\n\n\nHoverChangeColor.prototype.hoverOff = function() \n{\n    var app = this.app;\n    var self = this;\n    \n    if(!this.tweenHoverOffDone)\n        return;\n    \n    //console.log('hoveroff : ' + this.entity.name);\n    this.tweenHoverOffDone = true;\n    \n    var material = this.entity.model.material;\n    var color = material.emissive.clone();\n\n    var currentTween = this.entity.tween(color).to(self.originalColor, this.duration, pc.Linear);\n    \n    currentTween.on('update', function () {\n        material.emissive = color;\n        material.update();\n    });\n    \n    currentTween.on('complete', function () { \n        material.emissive = self.originalColor;\n        material.update();\n        self.tweenHoverOffDone = true;\n    });\n    \n    currentTween.start();\n \n};\n\n","// launchUrl.js\nvar LaunchUrl = pc.createScript('launchUrl');\n\nLaunchUrl.attributes.add('popupWidth', { type:'number', default: 640 });\nLaunchUrl.attributes.add('popupHeight', { type:'number', default: 300 });\nLaunchUrl.attributes.add('url', { type: 'string' });\nLaunchUrl.attributes.add('tag', { type: 'string' });\nLaunchUrl.attributes.add('tagMat', { type: 'string' });\nLaunchUrl.attributes.add('isVideo', { type:'boolean', default: false });\nLaunchUrl.attributes.add('skipIntermWindow', { type:'boolean', default: false });\n\n// initialize code called once per entity\nLaunchUrl.prototype.initialize = function() {\n};\n\n// update code called every frame\nLaunchUrl.prototype.launch = function() {\n    if (pc.platform.desktop && !this.app.xr.active) {\n        if (this.isVideo) {\n            this.app.fire('infoboard:playVideo', this.url);\n        }\n        else  {\n            var left = (screen.width / 2) - (this.popupWidth / 2);\n            var top = (screen.height / 2) - (this.popupHeight / 2);\n\n            window.open(this.url, 'popup', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=' + this.popupWidth + ',' + 'height=' + this.popupHeight + ',top=' + top + ', left=' + left); \n        }\n    }\n    else  {\n        if (this.isVideo)\n            this.app.fire('infoboard:playVideo', this.url);\n        else {\n            \n            if (this.skipIntermWindow) {\n                var left2 = (screen.width / 2) - (this.popupWidth / 2);\n                var top2 = (screen.height / 2) - (this.popupHeight / 2);\n                window.open(this.url, 'popup', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=' + this.popupWidth + ',' + 'height=' + this.popupHeight + ',top=' + top2 + ', left=' + left2); \n                \n                return;\n            }\n            \n            var app = this.app;\n            var self = this;\n            \n            var assets = app.assets.findByTag(this.tagMat);\n            if (assets.lenght === 0)\n                return;\n            \n            var material = assets[0];\n            \n            var assets2 = app.assets.findByTag(this.tag);\n            if (assets2.lenght === 0)\n                return;\n            \n            var texture = assets2[0];\n            \n            var onTextureReady = function() {\n                var onMaterialReady = function() {\n                    material.resource.emissiveMap = texture.resource;\n                    material.resource.update(); \n                    \n                    app.fire('infoboard:weblink', self.url);\n                };\n        \n                material.ready(onMaterialReady);\n                app.assets.load(material);\n            };\n    \n            texture.ready(onTextureReady);\n            app.assets.load(texture);\n        }\n    }\n};\n\n\n\n\n","// fadeElement.js\nvar FadingElementIn = pc.createScript('FadeElementIn');\n\nFadingElementIn.attributes.add(\"duration\", {type: \"number\", default: 2, title: \"Duration (Secs)\"});\nFadingElementIn.attributes.add('startingEvent', {\n    title: 'Event',\n    type: 'string'\n});\n\n// initialize code called once per entity\nFadingElementIn.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    this.app.on(this.startingEvent, function () {\n        this.fadeIn();\n    }, this);\n};\n\nFadingElementIn.prototype.fadeIn = function () {\n\n    var self = this;\n    \n    if(!this.isRunning)\n    {\n        this.isRunning = true;\n        \n        var data = {\n            opacity: 0\n        };\n       \n        var tween = this.entity.tween(data).to({opacity: 1}, this.duration, pc.SineInOut);\n        \n        tween.on('update', function () {\n            self.entity.element.material.opacity = data.opacity;  \n            self.entity.element.material.update();\n        }).on('complete', function () {\n            self.isRunning = false;\n        });\n  \n        tween.start();\n    }\n    \n};\n\nvar FadingElementOut = pc.createScript('FadeElementOut');\n\nFadingElementOut.attributes.add(\"duration\", {type: \"number\", default: 2, title: \"Duration (Secs)\"});\nFadingElementOut.attributes.add('startingEvent', {\n    title: 'Event',\n    type: 'string'\n});\n\n// initialize code called once per entity\nFadingElementOut.prototype.initialize = function() {\n    this.isRunning = false;\n    \n    this.app.on(this.startingEvent, function () {\n        this.fadeOut();\n    }, this);\n};\n\nFadingElementOut.prototype.fadeOut = function () {\n\n    var self = this;\n    \n    if(!this.isRunning)\n    {\n        this.isRunning = true;\n        \n        var data = {\n            opacity: 1\n        };\n        \n      \n        var tween = this.entity.tween(data).to({opacity: 0}, this.duration, pc.SineInOut);\n        \n        tween.on('update', function () { \n            self.entity.element.material.opacity = data.opacity;\n            self.entity.element.material.update();\n        }).on('complete', function () {\n            self.isRunning = false;\n        });\n  \n        tween.start();\n    }\n    \n};\n\n","// infoBoardMgr.js\nvar InfoBoardMgr = pc.createScript('infoBoardMgr');\n\nInfoBoardMgr.attributes.add('VideoBoard', { type: 'entity' });\nInfoBoardMgr.attributes.add('WebBoard', { type: 'entity' });\nInfoBoardMgr.attributes.add('CloseBtn', { type: 'entity' });\nInfoBoardMgr.attributes.add('GoToBtn', { type: 'entity' });\nInfoBoardMgr.attributes.add('WebCloseBtn', { type: 'entity' });\nInfoBoardMgr.attributes.add('WebGoToBtn', { type: 'entity' });\nInfoBoardMgr.attributes.add('CameraNode', { type: 'entity' });\nInfoBoardMgr.attributes.add('WorldNode', { type: 'entity' });\n\nInfoBoardMgr.attributes.add('popupWidth', { type:'number', default: 600 });\nInfoBoardMgr.attributes.add('popupHeight', { type:'number', default: 600 });\n\n// initialize code called once per entity\nInfoBoardMgr.prototype.initialize = function() {\n    \n    this.VideoBoard.enabled = false;\n    this.WebBoard.enabled = false;\n    this.CloseBtn.enabled = false;\n    this.GoToBtn.enabled = false;\n    this.WebCloseBtn.enabled = false;\n    this.WebGoToBtn.enabled = false;\n    this.buttonUrl = '';\n    //this.CloseBtnStartingPos = this.CloseBtn.getLocalPosition().clone();\n    //this.GoToBtnStartingPos = this.GoToBtn.getLocalPosition().clone();\n    \n    this.app.xr.on('end', function() {\n        this.app.fire('infoboard:close');\n        this.entity.reparent(this.CameraNode);\n    }, this);\n    \n    this.app.xr.on('start', function() {\n        this.app.fire('infoboard:close');\n    }, this);\n    \n    this.app.on('infoboard:playVideo', function (url) {\n\n        //this.CloseBtn.setLocalPosition(this.CloseBtnStartingPos.x, this.CloseBtnStartingPos.y, this.CloseBtnStartingPos.z);\n        //this.GoToBtn.setLocalPosition(this.GoToBtnStartingPos.x, this.GoToBtnStartingPos.y, this.GoToBtnStartingPos.z);\n        \n        this.app.fire('music:fadeOut', 'Music');\n        this.buttonUrl = '';\n        this.VideoBoard.enabled = true;\n        this.WebBoard.enabled = false;\n        \n        this.CloseBtn.enabled = true;\n        this.GoToBtn.enabled = false;\n        this.WebCloseBtn.enabled = false;\n        this.WebGoToBtn.enabled = false;\n        \n        this.VideoBoard.script.mediaPlayer.initVideo(url);\n    }, this);\n    \n    this.app.on('infoboard:weblink', function (url) {\n\n        //this.CloseBtn.setLocalPosition(this.CloseBtnStartingPos.x, this.CloseBtnStartingPos.y - 0.44, this.CloseBtnStartingPos.z);\n        //this.GoToBtn.setLocalPosition(this.GoToBtnStartingPos.x, this.GoToBtnStartingPos.y - 0.44, this.GoToBtnStartingPos.z);\n        \n        this.app.fire('iframe:stopVideo');\n        this.app.fire('music:fadeIn', 'Music');\n        this.buttonUrl = url;\n        this.VideoBoard.enabled = false;\n        this.WebBoard.enabled = true;\n        \n        this.CloseBtn.enabled = false;\n        this.GoToBtn.enabled = false;\n        this.WebCloseBtn.enabled = true;\n        \n        \n        //goto not available in VR\n        if(!this.app.xr.active)\n            this.WebGoToBtn.enabled = true;\n    }, this);\n    \n    this.app.on('infoboard:close', function () {\n        \n        this.app.fire('music:fadeIn', 'Music');\n        this.buttonUrl = '';\n        this.VideoBoard.enabled = false;\n        this.WebBoard.enabled = false;\n        \n        this.CloseBtn.enabled = false;\n        this.GoToBtn.enabled = false;\n        this.WebCloseBtn.enabled = false;\n        this.WebGoToBtn.enabled = false;\n        \n        this.VideoBoard.script.mediaPlayer.stopVideo();\n        \n    }, this);\n    \n    this.app.on('infoboard:openlink', function () {\n        \n        if(!this.buttonUrl)\n            return;\n        \n        if (pc.platform.mobile) {\n            window.open(this.buttonUrl);    \n        }\n        else {\n            window.open(this.buttonUrl, 'popup', 'width=' + this.popupWidth + ',' + 'height=' + this.popupHeight);     \n        }\n    }, this);\n    \n\n};\n\n\n","// reparentBoard.js\nvar ReparentBoard = pc.createScript('reparentBoard');\n\nReparentBoard.attributes.add('board', { type: 'entity' });\n\n// initialize code called once per entity\nReparentBoard.prototype.initialize = function() {\n    this.app.xr.on('start', function() {\n        this.board.reparent(this.entity);\n    }, this);\n    \n    this.app.on('reparentboard:update', function() {\n        if(this.app.xr.active && this.entity.enabled)\n            this.board.reparent(this.entity);\n    }, this);\n     \n    if(this.app.xr.active)\n        this.board.reparent(this.entity);\n};\n\n","// dynamicloading.js\nvar DynamicLoading = pc.createScript('dynamicloading');\n\n// initialize code called once per entity\nDynamicLoading.prototype.initialize = function() {\n    var app = this.app;\n    var self = this;\n    \n    this.total = 0;\n    \n    app.on('customload:start', function () {\n        //console.log('Custom load Start!'); \n        self.startCustomLoading();\n        //self.onAssetsLoaded(1, 'Skip!');\n    });\n};\n\nDynamicLoading.prototype.startCustomLoading = function () { \n    if (pc.platform.desktop) {\n        this.loadImageEm('genMat', 'general8K');\n        this.loadImageEm('tattooMat', 'tattoo8K');\n        this.loadImageEm('loungeMat', 'lounge8K');\n        this.loadImageEm('trainingMat', 'training8K');\n        this.loadImageDiff('tutoMat', 'tutoDesktop');\n    }\n    else {\n        this.loadImageEm('genMat', 'general2K');\n        this.loadImageEm('tattooMat', 'tattoo2K');\n        this.loadImageEm('loungeMat', 'lounge2K');\n        this.loadImageEm('trainingMat', 'training2K');\n        this.loadImageDiff('tutoMat', 'tutoMobile');\n    }   \n};\n\nDynamicLoading.prototype.onAssetsLoaded = function(increment, name) {\n    var app = this.app;\n    \n    //console.log(name + ' ' + this.total); \n    \n    this.total += increment;\n    \n    if(this.total === 5) {\n        app.fire('customload:end');\n    }\n};\n                \nDynamicLoading.prototype.loadImageEm = function (tagMat, tag) {\n    \n    var app = this.app;\n    var self = this;\n      \n    var assets = app.assets.findByTag(tagMat);\n    var material = assets[0];\n    \n    var assets2 = app.assets.findByTag(tag);\n    var texture = assets2[0];\n    \n    var onTextureReady = function() {\n        var onMaterialReady = function() {\n            material.resource.emissiveMap = texture.resource;\n            material.resource.update(); \n            self.onAssetsLoaded(1, tag + ' Loaded!');\n        };\n        \n        material.ready(onMaterialReady);\n        app.assets.load(material);\n    };\n    \n    texture.ready(onTextureReady);\n    app.assets.load(texture);\n};\n\nDynamicLoading.prototype.loadImageDiff = function (tagMat, tag) {\n    \n    var app = this.app;\n    var self = this;\n      \n    var assets = app.assets.findByTag(tagMat);\n    var material = assets[0];\n    \n    var assets2 = app.assets.findByTag(tag);\n    var texture = assets2[0];\n    \n    var onTextureReady = function() {\n        var onMaterialReady = function() {\n            material.resource.diffuseMap = texture.resource;\n            material.resource.opacityMap = texture.resource;\n            material.resource.update(); \n            self.onAssetsLoaded(1, tag + ' Loaded!');\n        };\n        \n        material.ready(onMaterialReady);\n        app.assets.load(material);\n    };\n    \n    texture.ready(onTextureReady);\n    app.assets.load(texture);\n};\n\n\n\n","// camera-aspect.js\nvar CameraAspect = pc.createScript('cameraAspect');\n\nCameraAspect.attributes.add('PortraitModeTrigger', { type: 'number', default: 1.125 });\n\n// initialize code called once per entity\nCameraAspect.prototype.initialize = function() {\n};\n\nCameraAspect.prototype.postInitialize = function() {    \n    var app = this.app;\n    \n    this.isLandscape = true;\n\n    var canvas = this.app.graphicsDevice.canvas;\n    this.currentAspectRatio = canvas.width / canvas.height;\n\n    if(this.currentAspectRatio <= this.PortraitModeTrigger) {\n        this.isLandscape = false;\n        app.fire('game:portrait');\n    }\n};\n\nCameraAspect.prototype.update = function(t) {\n    var app = this.app;\n    \n    var canvas = this.app.graphicsDevice.canvas;\n    var aspectRatio = canvas.width / canvas.height;\n\n    if (aspectRatio !== this.currentAspectRatio) {\n\n        if(aspectRatio <= this.PortraitModeTrigger && this.isLandscape) {\n            this.isLandscape = false;\n            app.fire('game:portrait');\n        }\n        else {\n            if(aspectRatio > this.PortraitModeTrigger && !this.isLandscape) {\n                this.isLandscape = true;\n                app.fire('game:landscape');\n            }\n        }\n\n        this.currentAspectRatio = aspectRatio;\n    }   \n};\n\n\n"]}